"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[522],{8522:(s,i,t)=>{var e=t(9288),o=t(4673),h=t(4686),n=t(4147),r=t(3463),c=t(8560);n.x.prototype.getPhysicsEngine=function(){return this._physicsEngine},n.x.prototype.enablePhysics=function(s=null,i){if(this._physicsEngine)return!0;let t=this._getComponent(h.l.NAME_PHYSICSENGINE);t||(t=new p(this),this._addComponent(t));try{if(i&&1!==(null==i?void 0:i.getPluginVersion())){if(2!==(null==i?void 0:i.getPluginVersion()))throw new Error("Unsupported Physics plugin version.");this._physicsEngine=new c.T(s,i)}else this._physicsEngine=new r.T(s,i);return this._physicsTimeAccumulator=0,!0}catch(s){return e.Y.Error(s.message),!1}},n.x.prototype.disablePhysicsEngine=function(){this._physicsEngine&&(this._physicsEngine.dispose(),this._physicsEngine=null)},n.x.prototype.isPhysicsEnabled=function(){return void 0!==this._physicsEngine},n.x.prototype.deleteCompoundImpostor=function(s){const i=s.parts[0].mesh;i.physicsImpostor&&(i.physicsImpostor.dispose(),i.physicsImpostor=null)},n.x.prototype._advancePhysicsEngineStep=function(s){if(this._physicsEngine){const i=this._physicsEngine.getSubTimeStep();if(i>0)for(this._physicsTimeAccumulator+=s;this._physicsTimeAccumulator>i;)this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(i/1e3),this.onAfterPhysicsObservable.notifyObservers(this),this._physicsTimeAccumulator-=i;else this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(s/1e3),this.onAfterPhysicsObservable.notifyObservers(this)}};class p{constructor(s){this.name=h.l.NAME_PHYSICSENGINE,this.scene=s,this.scene.onBeforePhysicsObservable=new o.y$,this.scene.onAfterPhysicsObservable=new o.y$,this.scene.getDeterministicFrameTime=()=>this.scene._physicsEngine?1e3*this.scene._physicsEngine.getTimeStep():1e3/60}register(){}rebuild(){}dispose(){this.scene.onBeforePhysicsObservable.clear(),this.scene.onAfterPhysicsObservable.clear(),this.scene._physicsEngine&&this.scene.disablePhysicsEngine()}}t(2289);var y=t(4482);Object.defineProperty(y.Y.prototype,"physicsBody",{get:function(){return this._physicsBody},set:function(s){this._physicsBody!==s&&(this._disposePhysicsObserver&&this.onDisposeObservable.remove(this._disposePhysicsObserver),this._physicsBody=s,s&&(this._disposePhysicsObserver=this.onDisposeObservable.add((()=>{this.physicsBody&&(this.physicsBody.dispose(),this.physicsBody=null)}))))},enumerable:!0,configurable:!0}),y.Y.prototype.getPhysicsBody=function(){return this.physicsBody},y.Y.prototype.applyImpulse=function(s,i){if(!this.physicsBody)throw new Error("No Physics Body for TransformNode");return this.physicsBody.applyImpulse(s,i),this}},5388:(s,i,t)=>{t.d(i,{d:()=>o});var e=t(972);class o{constructor(){this._hasHit=!1,this._hitDistance=0,this._hitNormalWorld=e.P.Zero(),this._hitPointWorld=e.P.Zero(),this._rayFromWorld=e.P.Zero(),this._rayToWorld=e.P.Zero()}get hasHit(){return this._hasHit}get hitDistance(){return this._hitDistance}get hitNormalWorld(){return this._hitNormalWorld}get hitPointWorld(){return this._hitPointWorld}get rayFromWorld(){return this._rayFromWorld}get rayToWorld(){return this._rayToWorld}setHitData(s,i){this._hasHit=!0,this._hitNormalWorld.set(s.x,s.y,s.z),this._hitPointWorld.set(i.x,i.y,i.z)}setHitDistance(s){this._hitDistance=s}calculateHitDistance(){this._hitDistance=e.P.Distance(this._rayFromWorld,this._hitPointWorld)}reset(s=e.P.Zero(),i=e.P.Zero()){this._rayFromWorld.copyFrom(s),this._rayToWorld.copyFrom(i),this._hasHit=!1,this._hitDistance=0,this._hitNormalWorld.setAll(0),this._hitPointWorld.setAll(0)}}},3463:(s,i,t)=>{t.d(i,{T:()=>h});var e=t(972),o=t(9938);class h{getPluginVersion(){return this._physicsPlugin.getPluginVersion()}static DefaultPluginFactory(){throw(0,o.S)("CannonJSPlugin")}constructor(s,i=h.DefaultPluginFactory()){if(this._physicsPlugin=i,this._impostors=[],this._joints=[],this._subTimeStep=0,this._uniqueIdCounter=0,!this._physicsPlugin.isSupported())throw new Error("Physics Engine "+this._physicsPlugin.name+" cannot be found. Please make sure it is included.");s=s||new e.P(0,-9.807,0),this.setGravity(s),this.setTimeStep()}setGravity(s){this.gravity=s,this._physicsPlugin.setGravity(this.gravity)}setTimeStep(s=1/60){this._physicsPlugin.setTimeStep(s)}getTimeStep(){return this._physicsPlugin.getTimeStep()}setSubTimeStep(s=0){this._subTimeStep=s}getSubTimeStep(){return this._subTimeStep}dispose(){this._impostors.forEach((function(s){s.dispose()})),this._physicsPlugin.dispose()}getPhysicsPluginName(){return this._physicsPlugin.name}addImpostor(s){this._impostors.push(s),s.uniqueId=this._uniqueIdCounter++,s.parent||this._physicsPlugin.generatePhysicsBody(s)}removeImpostor(s){const i=this._impostors.indexOf(s);i>-1&&this._impostors.splice(i,1).length&&this.getPhysicsPlugin().removePhysicsBody(s)}addJoint(s,i,t){const e={mainImpostor:s,connectedImpostor:i,joint:t};t.physicsPlugin=this._physicsPlugin,this._joints.push(e),this._physicsPlugin.generateJoint(e)}removeJoint(s,i,t){const e=this._joints.filter((function(e){return e.connectedImpostor===i&&e.joint===t&&e.mainImpostor===s}));e.length&&this._physicsPlugin.removeJoint(e[0])}_step(s){this._impostors.forEach((s=>{s.isBodyInitRequired()&&this._physicsPlugin.generatePhysicsBody(s)})),s>.1?s=.1:s<=0&&(s=1/60),this._physicsPlugin.executeStep(s,this._impostors)}getPhysicsPlugin(){return this._physicsPlugin}getImpostors(){return this._impostors}getImpostorForPhysicsObject(s){for(let i=0;i<this._impostors.length;++i)if(this._impostors[i].object===s)return this._impostors[i];return null}getImpostorWithPhysicsBody(s){for(let i=0;i<this._impostors.length;++i)if(this._impostors[i].physicsBody===s)return this._impostors[i];return null}raycast(s,i){return this._physicsPlugin.raycast(s,i)}raycastToRef(s,i,t){return this._physicsPlugin.raycastToRef(s,i,t)}}},2289:(s,i,t)=>{var e=t(7257),o=t(7582);Object.defineProperty(e.x.prototype,"physicsImpostor",{get:function(){return this._physicsImpostor},set:function(s){this._physicsImpostor!==s&&(this._disposePhysicsObserver&&this.onDisposeObservable.remove(this._disposePhysicsObserver),this._physicsImpostor=s,s&&(this._disposePhysicsObserver=this.onDisposeObservable.add((()=>{this.physicsImpostor&&(this.physicsImpostor.dispose(),this.physicsImpostor=null)}))))},enumerable:!0,configurable:!0}),e.x.prototype.getPhysicsImpostor=function(){return this.physicsImpostor},e.x.prototype.applyImpulse=function(s,i){return this.physicsImpostor?(this.physicsImpostor.applyImpulse(s,i),this):this},e.x.prototype.setPhysicsLinkWith=function(s,i,t,e){return this.physicsImpostor&&s.physicsImpostor?(this.physicsImpostor.createJoint(s.physicsImpostor,o.q7.HingeJoint,{mainPivot:i,connectedPivot:t,nativeParams:e}),this):this}},7582:(s,i,t)=>{t.d(i,{$Q:()=>h,OT:()=>r,mN:()=>o,q7:()=>e,yr:()=>n});class e{constructor(s,i){this.type=s,this.jointData=i,i.nativeParams=i.nativeParams||{}}get physicsJoint(){return this._physicsJoint}set physicsJoint(s){this._physicsJoint,this._physicsJoint=s}set physicsPlugin(s){this._physicsPlugin=s}executeNativeFunction(s){s(this._physicsPlugin.world,this._physicsJoint)}}e.DistanceJoint=0,e.HingeJoint=1,e.BallAndSocketJoint=2,e.WheelJoint=3,e.SliderJoint=4,e.PrismaticJoint=5,e.UniversalJoint=6,e.Hinge2Joint=e.WheelJoint,e.PointToPointJoint=8,e.SpringJoint=9,e.LockJoint=10;class o extends e{constructor(s){super(e.DistanceJoint,s)}updateDistance(s,i){this._physicsPlugin.updateDistanceJoint(this,s,i)}}class h extends e{constructor(s,i){super(s,i)}setMotor(s,i){this._physicsPlugin.setMotor(this,s||0,i)}setLimit(s,i){this._physicsPlugin.setLimit(this,s,i)}}class n extends h{constructor(s){super(e.HingeJoint,s)}setMotor(s,i){this._physicsPlugin.setMotor(this,s||0,i)}setLimit(s,i){this._physicsPlugin.setLimit(this,s,i)}}class r extends h{constructor(s){super(e.Hinge2Joint,s)}setMotor(s,i,t=0){this._physicsPlugin.setMotor(this,s||0,i,t)}setLimit(s,i,t=0){this._physicsPlugin.setLimit(this,s,i,t)}}},8560:(s,i,t)=>{t.d(i,{T:()=>n});var e=t(972),o=t(5388),h=t(9938);class n{getPluginVersion(){return this._physicsPlugin.getPluginVersion()}static DefaultPluginFactory(){throw(0,h.S)("")}constructor(s,i=n.DefaultPluginFactory()){this._physicsPlugin=i,this._physicsBodies=[],this._subTimeStep=0,s=s||new e.P(0,-9.807,0),this.setGravity(s),this.setTimeStep()}setGravity(s){this.gravity=s,this._physicsPlugin.setGravity(this.gravity)}setTimeStep(s=1/60){this._physicsPlugin.setTimeStep(s)}getTimeStep(){return this._physicsPlugin.getTimeStep()}setSubTimeStep(s=0){this._subTimeStep=s}getSubTimeStep(){return this._subTimeStep}dispose(){this._physicsPlugin.dispose()}getPhysicsPluginName(){return this._physicsPlugin.name}_step(s){s>.1?s=.1:s<=0&&(s=1/60),this._physicsPlugin.executeStep(s,this._physicsBodies)}addBody(s){this._physicsBodies.push(s)}removeBody(s){const i=this._physicsBodies.indexOf(s);i>-1&&this._physicsBodies.splice(i,1)}getBodies(){return this._physicsBodies}getPhysicsPlugin(){return this._physicsPlugin}raycastToRef(s,i,t){this._physicsPlugin.raycast(s,i,t)}raycast(s,i){const t=new o.d;return this._physicsPlugin.raycast(s,i,t),t}}}}]);
//# sourceMappingURL=522.babylonBundle.js.map