"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[14],{1917:(e,t,i)=>{i.d(t,{Y:()=>l});var o=i(3555),s=i(6786),n=i(4673),a=i(147),r=i(6485),h=i(4651);class l{constructor(){this.wheelPrecisionX=3,this.wheelPrecisionY=3,this.wheelPrecisionZ=3,this.onChangedObservable=new n.y$,this._wheelDeltaX=0,this._wheelDeltaY=0,this._wheelDeltaZ=0,this._ffMultiplier=12,this._normalize=120}attachControl(e){e=h.w1.BackCompatCameraNoPreventDefault(arguments),this._wheel=t=>{if(t.type!==a.kD.POINTERWHEEL)return;const i=t.event,o=i.deltaMode===r.G.DOM_DELTA_LINE?this._ffMultiplier:1;this._wheelDeltaX+=this.wheelPrecisionX*o*i.deltaX/this._normalize,this._wheelDeltaY-=this.wheelPrecisionY*o*i.deltaY/this._normalize,this._wheelDeltaZ+=this.wheelPrecisionZ*o*i.deltaZ/this._normalize,i.preventDefault&&(e||i.preventDefault())},this._observer=this.camera.getScene()._inputManager._addCameraPointerObserver(this._wheel,a.kD.POINTERWHEEL)}detachControl(){this._observer&&(this.camera.getScene()._inputManager._removeCameraPointerObserver(this._observer),this._observer=null,this._wheel=null),this.onChangedObservable&&this.onChangedObservable.clear()}checkInputs(){this.onChangedObservable.notifyObservers({wheelDeltaX:this._wheelDeltaX,wheelDeltaY:this._wheelDeltaY,wheelDeltaZ:this._wheelDeltaZ}),this._wheelDeltaX=0,this._wheelDeltaY=0,this._wheelDeltaZ=0}getClassName(){return"BaseCameraMouseWheelInput"}getSimpleName(){return"mousewheel"}}(0,o.gn)([(0,s.qC)()],l.prototype,"wheelPrecisionX",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"wheelPrecisionY",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"wheelPrecisionZ",void 0)},6977:(e,t,i)=>{i.d(t,{Y:()=>l});var o=i(3555),s=i(6786),n=i(4442),a=i(6233),r=i(972),h=i(4651);class l{constructor(){this.keysUp=[38],this.keysUpward=[33],this.keysDown=[40],this.keysDownward=[34],this.keysLeft=[37],this.keysRight=[39],this.rotationSpeed=.5,this.keysRotateLeft=[],this.keysRotateRight=[],this.keysRotateUp=[],this.keysRotateDown=[],this._keys=new Array}attachControl(e){e=h.w1.BackCompatCameraNoPreventDefault(arguments),this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add((()=>{this._keys.length=0})),this._onKeyboardObserver=this._scene.onKeyboardObservable.add((t=>{const i=t.event;if(!i.metaKey)if(t.type===a.OG.KEYDOWN)-1===this.keysUp.indexOf(i.keyCode)&&-1===this.keysDown.indexOf(i.keyCode)&&-1===this.keysLeft.indexOf(i.keyCode)&&-1===this.keysRight.indexOf(i.keyCode)&&-1===this.keysUpward.indexOf(i.keyCode)&&-1===this.keysDownward.indexOf(i.keyCode)&&-1===this.keysRotateLeft.indexOf(i.keyCode)&&-1===this.keysRotateRight.indexOf(i.keyCode)&&-1===this.keysRotateUp.indexOf(i.keyCode)&&-1===this.keysRotateDown.indexOf(i.keyCode)||(-1===this._keys.indexOf(i.keyCode)&&this._keys.push(i.keyCode),e||i.preventDefault());else if(-1!==this.keysUp.indexOf(i.keyCode)||-1!==this.keysDown.indexOf(i.keyCode)||-1!==this.keysLeft.indexOf(i.keyCode)||-1!==this.keysRight.indexOf(i.keyCode)||-1!==this.keysUpward.indexOf(i.keyCode)||-1!==this.keysDownward.indexOf(i.keyCode)||-1!==this.keysRotateLeft.indexOf(i.keyCode)||-1!==this.keysRotateRight.indexOf(i.keyCode)||-1!==this.keysRotateUp.indexOf(i.keyCode)||-1!==this.keysRotateDown.indexOf(i.keyCode)){const t=this._keys.indexOf(i.keyCode);t>=0&&this._keys.splice(t,1),e||i.preventDefault()}})))}detachControl(){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys.length=0}checkInputs(){if(this._onKeyboardObserver){const e=this.camera;for(let t=0;t<this._keys.length;t++){const i=this._keys[t],o=e._computeLocalCameraSpeed();-1!==this.keysLeft.indexOf(i)?e._localDirection.copyFromFloats(-o,0,0):-1!==this.keysUp.indexOf(i)?e._localDirection.copyFromFloats(0,0,o):-1!==this.keysRight.indexOf(i)?e._localDirection.copyFromFloats(o,0,0):-1!==this.keysDown.indexOf(i)?e._localDirection.copyFromFloats(0,0,-o):-1!==this.keysUpward.indexOf(i)?e._localDirection.copyFromFloats(0,o,0):-1!==this.keysDownward.indexOf(i)?e._localDirection.copyFromFloats(0,-o,0):-1!==this.keysRotateLeft.indexOf(i)?(e._localDirection.copyFromFloats(0,0,0),e.cameraRotation.y-=this._getLocalRotation()):-1!==this.keysRotateRight.indexOf(i)?(e._localDirection.copyFromFloats(0,0,0),e.cameraRotation.y+=this._getLocalRotation()):-1!==this.keysRotateUp.indexOf(i)?(e._localDirection.copyFromFloats(0,0,0),e.cameraRotation.x-=this._getLocalRotation()):-1!==this.keysRotateDown.indexOf(i)&&(e._localDirection.copyFromFloats(0,0,0),e.cameraRotation.x+=this._getLocalRotation()),e.getScene().useRightHandedSystem&&(e._localDirection.z*=-1),e.getViewMatrix().invertToRef(e._cameraTransformMatrix),r.P.TransformNormalToRef(e._localDirection,e._cameraTransformMatrix,e._transformedDirection),e.cameraDirection.addInPlace(e._transformedDirection)}}}getClassName(){return"FreeCameraKeyboardMoveInput"}_onLostFocus(){this._keys.length=0}getSimpleName(){return"keyboard"}_getLocalRotation(){let e=this.rotationSpeed*this._engine.getDeltaTime()/1e3;return this.camera.getScene().useRightHandedSystem&&(e*=-1),this.camera.parent&&this.camera.parent._getWorldMatrixDeterminant()<0&&(e*=-1),e}}(0,o.gn)([(0,s.qC)()],l.prototype,"keysUp",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysUpward",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysDown",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysDownward",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysLeft",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysRight",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"rotationSpeed",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysRotateLeft",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysRotateRight",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysRotateUp",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"keysRotateDown",void 0),n.u.FreeCameraKeyboardMoveInput=l},8708:(e,t,i)=>{i.d(t,{A:()=>l});var o=i(3555),s=i(4673),n=i(6786),a=i(4442),r=i(147),h=i(4651);class l{constructor(e=!0){this.touchEnabled=e,this.buttons=[0,1,2],this.angularSensibility=2e3,this._previousPosition=null,this.onPointerMovedObservable=new s.y$,this._allowCameraRotation=!0,this._currentActiveButton=-1,this._activePointerId=-1}attachControl(e){e=h.w1.BackCompatCameraNoPreventDefault(arguments);const t=this.camera.getEngine(),i=t.getInputElement();this._pointerInput||(this._pointerInput=o=>{const s=o.event,n="touch"===s.pointerType;if(t.isInVRExclusivePointerMode)return;if(!this.touchEnabled&&n)return;if(o.type!==r.kD.POINTERMOVE&&-1===this.buttons.indexOf(s.button))return;const a=s.target;if(o.type===r.kD.POINTERDOWN){if(n&&-1!==this._activePointerId||!n&&-1!==this._currentActiveButton)return;this._activePointerId=s.pointerId;try{null==a||a.setPointerCapture(s.pointerId)}catch(e){}-1===this._currentActiveButton&&(this._currentActiveButton=s.button),this._previousPosition={x:s.clientX,y:s.clientY},e||(s.preventDefault(),i&&i.focus()),t.isPointerLock&&this._onMouseMove&&this._onMouseMove(o.event)}else if(o.type===r.kD.POINTERUP){if(n&&this._activePointerId!==s.pointerId||!n&&this._currentActiveButton!==s.button)return;try{null==a||a.releasePointerCapture(s.pointerId)}catch(e){}this._currentActiveButton=-1,this._previousPosition=null,e||s.preventDefault(),this._activePointerId=-1}else if(o.type===r.kD.POINTERMOVE&&(this._activePointerId===s.pointerId||!n))if(t.isPointerLock&&this._onMouseMove)this._onMouseMove(o.event);else if(this._previousPosition){let t=s.clientX-this._previousPosition.x;const i=s.clientY-this._previousPosition.y;this.camera.getScene().useRightHandedSystem&&(t*=-1),this.camera.parent&&this.camera.parent._getWorldMatrixDeterminant()<0&&(t*=-1),this._allowCameraRotation&&(this.camera.cameraRotation.y+=t/this.angularSensibility,this.camera.cameraRotation.x+=i/this.angularSensibility),this.onPointerMovedObservable.notifyObservers({offsetX:t,offsetY:i}),this._previousPosition={x:s.clientX,y:s.clientY},e||s.preventDefault()}}),this._onMouseMove=i=>{if(!t.isPointerLock)return;if(t.isInVRExclusivePointerMode)return;let o=i.movementX;this.camera.getScene().useRightHandedSystem&&(o*=-1),this.camera.parent&&this.camera.parent._getWorldMatrixDeterminant()<0&&(o*=-1),this.camera.cameraRotation.y+=o/this.angularSensibility;const s=i.movementY;this.camera.cameraRotation.x+=s/this.angularSensibility,this._previousPosition=null,e||i.preventDefault()},this._observer=this.camera.getScene()._inputManager._addCameraPointerObserver(this._pointerInput,r.kD.POINTERDOWN|r.kD.POINTERUP|r.kD.POINTERMOVE),i&&(this._contextMenuBind=this.onContextMenu.bind(this),i.addEventListener("contextmenu",this._contextMenuBind,!1))}onContextMenu(e){e.preventDefault()}detachControl(){if(this._observer){if(this.camera.getScene()._inputManager._removeCameraPointerObserver(this._observer),this._contextMenuBind){const e=this.camera.getEngine().getInputElement();e&&e.removeEventListener("contextmenu",this._contextMenuBind)}this.onPointerMovedObservable&&this.onPointerMovedObservable.clear(),this._observer=null,this._onMouseMove=null,this._previousPosition=null}this._currentActiveButton=-1}getClassName(){return"FreeCameraMouseInput"}getSimpleName(){return"mouse"}}(0,o.gn)([(0,n.qC)()],l.prototype,"buttons",void 0),(0,o.gn)([(0,n.qC)()],l.prototype,"angularSensibility",void 0),a.u.FreeCameraMouseInput=l},2463:(e,t,i)=>{i.d(t,{A:()=>c});var o,s=i(3555),n=i(6786),a=i(4442),r=i(1917),h=i(972),l=i(730);!function(e){e[e.MoveRelative=0]="MoveRelative",e[e.RotateRelative=1]="RotateRelative",e[e.MoveScene=2]="MoveScene"}(o||(o={}));class c extends r.Y{constructor(){super(...arguments),this._moveRelative=h.P.Zero(),this._rotateRelative=h.P.Zero(),this._moveScene=h.P.Zero(),this._wheelXAction=o.MoveRelative,this._wheelXActionCoordinate=l.c7.X,this._wheelYAction=o.MoveRelative,this._wheelYActionCoordinate=l.c7.Z,this._wheelZAction=null,this._wheelZActionCoordinate=null}getClassName(){return"FreeCameraMouseWheelInput"}set wheelXMoveRelative(e){null===e&&this._wheelXAction!==o.MoveRelative||(this._wheelXAction=o.MoveRelative,this._wheelXActionCoordinate=e)}get wheelXMoveRelative(){return this._wheelXAction!==o.MoveRelative?null:this._wheelXActionCoordinate}set wheelYMoveRelative(e){null===e&&this._wheelYAction!==o.MoveRelative||(this._wheelYAction=o.MoveRelative,this._wheelYActionCoordinate=e)}get wheelYMoveRelative(){return this._wheelYAction!==o.MoveRelative?null:this._wheelYActionCoordinate}set wheelZMoveRelative(e){null===e&&this._wheelZAction!==o.MoveRelative||(this._wheelZAction=o.MoveRelative,this._wheelZActionCoordinate=e)}get wheelZMoveRelative(){return this._wheelZAction!==o.MoveRelative?null:this._wheelZActionCoordinate}set wheelXRotateRelative(e){null===e&&this._wheelXAction!==o.RotateRelative||(this._wheelXAction=o.RotateRelative,this._wheelXActionCoordinate=e)}get wheelXRotateRelative(){return this._wheelXAction!==o.RotateRelative?null:this._wheelXActionCoordinate}set wheelYRotateRelative(e){null===e&&this._wheelYAction!==o.RotateRelative||(this._wheelYAction=o.RotateRelative,this._wheelYActionCoordinate=e)}get wheelYRotateRelative(){return this._wheelYAction!==o.RotateRelative?null:this._wheelYActionCoordinate}set wheelZRotateRelative(e){null===e&&this._wheelZAction!==o.RotateRelative||(this._wheelZAction=o.RotateRelative,this._wheelZActionCoordinate=e)}get wheelZRotateRelative(){return this._wheelZAction!==o.RotateRelative?null:this._wheelZActionCoordinate}set wheelXMoveScene(e){null===e&&this._wheelXAction!==o.MoveScene||(this._wheelXAction=o.MoveScene,this._wheelXActionCoordinate=e)}get wheelXMoveScene(){return this._wheelXAction!==o.MoveScene?null:this._wheelXActionCoordinate}set wheelYMoveScene(e){null===e&&this._wheelYAction!==o.MoveScene||(this._wheelYAction=o.MoveScene,this._wheelYActionCoordinate=e)}get wheelYMoveScene(){return this._wheelYAction!==o.MoveScene?null:this._wheelYActionCoordinate}set wheelZMoveScene(e){null===e&&this._wheelZAction!==o.MoveScene||(this._wheelZAction=o.MoveScene,this._wheelZActionCoordinate=e)}get wheelZMoveScene(){return this._wheelZAction!==o.MoveScene?null:this._wheelZActionCoordinate}checkInputs(){if(0===this._wheelDeltaX&&0===this._wheelDeltaY&&0==this._wheelDeltaZ)return;this._moveRelative.setAll(0),this._rotateRelative.setAll(0),this._moveScene.setAll(0),this._updateCamera(),this.camera.getScene().useRightHandedSystem&&(this._moveRelative.z*=-1);const e=h.y3.Zero();this.camera.getViewMatrix().invertToRef(e);const t=h.P.Zero();h.P.TransformNormalToRef(this._moveRelative,e,t),this.camera.cameraRotation.x+=this._rotateRelative.x/200,this.camera.cameraRotation.y+=this._rotateRelative.y/200,this.camera.cameraDirection.addInPlace(t),this.camera.cameraDirection.addInPlace(this._moveScene),super.checkInputs()}_updateCamera(){this._updateCameraProperty(this._wheelDeltaX,this._wheelXAction,this._wheelXActionCoordinate),this._updateCameraProperty(this._wheelDeltaY,this._wheelYAction,this._wheelYActionCoordinate),this._updateCameraProperty(this._wheelDeltaZ,this._wheelZAction,this._wheelZActionCoordinate)}_updateCameraProperty(e,t,i){if(0===e)return;if(null===t||null===i)return;let s=null;switch(t){case o.MoveRelative:s=this._moveRelative;break;case o.RotateRelative:s=this._rotateRelative;break;case o.MoveScene:s=this._moveScene}switch(i){case l.c7.X:s.set(e,0,0);break;case l.c7.Y:s.set(0,e,0);break;case l.c7.Z:s.set(0,0,e)}}}(0,s.gn)([(0,n.qC)()],c.prototype,"wheelXMoveRelative",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelYMoveRelative",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelZMoveRelative",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelXRotateRelative",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelYRotateRelative",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelZRotateRelative",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelXMoveScene",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelYMoveScene",null),(0,s.gn)([(0,n.qC)()],c.prototype,"wheelZMoveScene",null),a.u.FreeCameraMouseWheelInput=c},3688:(e,t,i)=>{i.d(t,{y:()=>l});var o=i(3555),s=i(6786),n=i(4442),a=i(147),r=i(972),h=i(4651);class l{constructor(e=!1){this.allowMouse=e,this.touchAngularSensibility=2e5,this.touchMoveSensibility=250,this.singleFingerRotate=!1,this._offsetX=null,this._offsetY=null,this._pointerPressed=new Array,this._isSafari=h.w1.IsSafari()}attachControl(e){e=h.w1.BackCompatCameraNoPreventDefault(arguments);let t=null;if(void 0===this._pointerInput&&(this._onLostFocus=()=>{this._offsetX=null,this._offsetY=null},this._pointerInput=i=>{const o=i.event,s="mouse"===o.pointerType||this._isSafari&&void 0===o.pointerType;if(this.allowMouse||!s)if(i.type===a.kD.POINTERDOWN){if(e||o.preventDefault(),this._pointerPressed.push(o.pointerId),1!==this._pointerPressed.length)return;t={x:o.clientX,y:o.clientY}}else if(i.type===a.kD.POINTERUP){e||o.preventDefault();const i=this._pointerPressed.indexOf(o.pointerId);if(-1===i)return;if(this._pointerPressed.splice(i,1),0!=i)return;t=null,this._offsetX=null,this._offsetY=null}else if(i.type===a.kD.POINTERMOVE){if(e||o.preventDefault(),!t)return;if(0!=this._pointerPressed.indexOf(o.pointerId))return;this._offsetX=o.clientX-t.x,this._offsetY=-(o.clientY-t.y)}}),this._observer=this.camera.getScene()._inputManager._addCameraPointerObserver(this._pointerInput,a.kD.POINTERDOWN|a.kD.POINTERUP|a.kD.POINTERMOVE),this._onLostFocus){const e=this.camera.getEngine().getInputElement();e&&e.addEventListener("blur",this._onLostFocus)}}detachControl(){if(this._pointerInput){if(this._observer&&(this.camera.getScene()._inputManager._removeCameraPointerObserver(this._observer),this._observer=null),this._onLostFocus){const e=this.camera.getEngine().getInputElement();e&&e.removeEventListener("blur",this._onLostFocus),this._onLostFocus=null}this._pointerPressed.length=0,this._offsetX=null,this._offsetY=null}}checkInputs(){if(null===this._offsetX||null===this._offsetY)return;if(0===this._offsetX&&0===this._offsetY)return;const e=this.camera;if(e.cameraRotation.y=this._offsetX/this.touchAngularSensibility,this.singleFingerRotate&&1===this._pointerPressed.length||!this.singleFingerRotate&&this._pointerPressed.length>1)e.cameraRotation.x=-this._offsetY/this.touchAngularSensibility;else{const t=e._computeLocalCameraSpeed(),i=new r.P(0,0,0!==this.touchMoveSensibility?t*this._offsetY/this.touchMoveSensibility:0);r.y3.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,0,e._cameraRotationMatrix),e.cameraDirection.addInPlace(r.P.TransformCoordinates(i,e._cameraRotationMatrix))}}getClassName(){return"FreeCameraTouchInput"}getSimpleName(){return"touch"}}(0,o.gn)([(0,s.qC)()],l.prototype,"touchAngularSensibility",void 0),(0,o.gn)([(0,s.qC)()],l.prototype,"touchMoveSensibility",void 0),n.u.FreeCameraTouchInput=l},156:(e,t,i)=>{i.d(t,{c:()=>c});var o=i(3555),s=i(6786),n=i(972),a=i(7469),r=i(5753),h=i(4639),l=i(4651);class c extends r.C{get angularSensibility(){const e=this.inputs.attached.mouse;return e?e.angularSensibility:0}set angularSensibility(e){const t=this.inputs.attached.mouse;t&&(t.angularSensibility=e)}get keysUp(){const e=this.inputs.attached.keyboard;return e?e.keysUp:[]}set keysUp(e){const t=this.inputs.attached.keyboard;t&&(t.keysUp=e)}get keysUpward(){const e=this.inputs.attached.keyboard;return e?e.keysUpward:[]}set keysUpward(e){const t=this.inputs.attached.keyboard;t&&(t.keysUpward=e)}get keysDown(){const e=this.inputs.attached.keyboard;return e?e.keysDown:[]}set keysDown(e){const t=this.inputs.attached.keyboard;t&&(t.keysDown=e)}get keysDownward(){const e=this.inputs.attached.keyboard;return e?e.keysDownward:[]}set keysDownward(e){const t=this.inputs.attached.keyboard;t&&(t.keysDownward=e)}get keysLeft(){const e=this.inputs.attached.keyboard;return e?e.keysLeft:[]}set keysLeft(e){const t=this.inputs.attached.keyboard;t&&(t.keysLeft=e)}get keysRight(){const e=this.inputs.attached.keyboard;return e?e.keysRight:[]}set keysRight(e){const t=this.inputs.attached.keyboard;t&&(t.keysRight=e)}get keysRotateLeft(){const e=this.inputs.attached.keyboard;return e?e.keysRotateLeft:[]}set keysRotateLeft(e){const t=this.inputs.attached.keyboard;t&&(t.keysRotateLeft=e)}get keysRotateRight(){const e=this.inputs.attached.keyboard;return e?e.keysRotateRight:[]}set keysRotateRight(e){const t=this.inputs.attached.keyboard;t&&(t.keysRotateRight=e)}get keysRotateUp(){const e=this.inputs.attached.keyboard;return e?e.keysRotateUp:[]}set keysRotateUp(e){const t=this.inputs.attached.keyboard;t&&(t.keysRotateUp=e)}get keysRotateDown(){const e=this.inputs.attached.keyboard;return e?e.keysRotateDown:[]}set keysRotateDown(e){const t=this.inputs.attached.keyboard;t&&(t.keysRotateDown=e)}constructor(e,t,i,o=!0){super(e,t,i,o),this.ellipsoid=new n.P(.5,1,.5),this.ellipsoidOffset=new n.P(0,0,0),this.checkCollisions=!1,this.applyGravity=!1,this._needMoveForGravity=!1,this._oldPosition=n.P.Zero(),this._diffPosition=n.P.Zero(),this._newPosition=n.P.Zero(),this._collisionMask=-1,this._onCollisionPositionChange=(e,t,i=null)=>{(e=>{this._newPosition.copyFrom(e),this._newPosition.subtractToRef(this._oldPosition,this._diffPosition),this._diffPosition.length()>a.D.CollisionsEpsilon&&(this.position.addInPlace(this._diffPosition),this.onCollide&&i&&this.onCollide(i))})(t)},this.inputs=new h.a(this),this.inputs.addKeyboard().addMouse()}attachControl(e,t){t=l.w1.BackCompatCameraNoPreventDefault(arguments),this.inputs.attachElement(t)}detachControl(){this.inputs.detachElement(),this.cameraDirection=new n.P(0,0,0),this.cameraRotation=new n.FM(0,0)}get collisionMask(){return this._collisionMask}set collisionMask(e){this._collisionMask=isNaN(e)?-1:e}_collideWithWorld(e){let t;t=this.parent?n.P.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position,t.subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset);const i=this.getScene().collisionCoordinator;this._collider||(this._collider=i.createCollider()),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;let o=e;this.applyGravity&&(o=e.add(this.getScene().gravity)),i.getNewPosition(this._oldPosition,o,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)}_checkInputs(){this._localDirection||(this._localDirection=n.P.Zero(),this._transformedDirection=n.P.Zero()),this.inputs.checkInputs(),super._checkInputs()}_decideIfNeedsToMove(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0}_updatePosition(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):super._updatePosition()}dispose(){this.inputs.clear(),super.dispose()}getClassName(){return"FreeCamera"}}(0,o.gn)([(0,s.hd)()],c.prototype,"ellipsoid",void 0),(0,o.gn)([(0,s.hd)()],c.prototype,"ellipsoidOffset",void 0),(0,o.gn)([(0,s.qC)()],c.prototype,"checkCollisions",void 0),(0,o.gn)([(0,s.qC)()],c.prototype,"applyGravity",void 0)},4639:(e,t,i)=>{i.d(t,{a:()=>h});var o=i(4442),s=i(6977),n=i(8708),a=i(2463),r=i(3688);class h extends o.p{constructor(e){super(e),this._mouseInput=null,this._mouseWheelInput=null}addKeyboard(){return this.add(new s.Y),this}addMouse(e=!0){return this._mouseInput||(this._mouseInput=new n.A(e),this.add(this._mouseInput)),this}removeMouse(){return this._mouseInput&&this.remove(this._mouseInput),this}addMouseWheel(){return this._mouseWheelInput||(this._mouseWheelInput=new a.A,this.add(this._mouseWheelInput)),this}removeMouseWheel(){return this._mouseWheelInput&&this.remove(this._mouseWheelInput),this}addTouch(){return this.add(new r.y),this}clear(){super.clear(),this._mouseInput=null}}},8110:(e,t,i)=>{i.d(t,{NR:()=>l,aR:()=>h,kg:()=>c});var o=i(972),s=i(9859),n=i(3632),a=i(4517),r=i(3027);function h(e){let t=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];const i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],n=[];let h=[];const l=e.width||e.size||1,c=e.height||e.size||1,u=e.depth||e.size||1,d=e.wrap||!1;let p=void 0===e.topBaseAt?1:e.topBaseAt,_=void 0===e.bottomBaseAt?0:e.bottomBaseAt;p=(p+4)%4,_=(_+4)%4;let v=[2,0,3,1][p],y=[2,0,1,3][_],w=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1];if(d){t=[2,3,0,2,0,1,4,5,6,4,6,7,9,10,11,9,11,8,12,14,15,12,13,14],w=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1];let e=[[1,1,1],[-1,1,1],[-1,1,-1],[1,1,-1]],i=[[-1,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1]];const o=[17,18,19,16],s=[22,23,20,21];for(;v>0;)e.unshift(e.pop()),o.unshift(o.pop()),v--;for(;y>0;)i.unshift(i.pop()),s.unshift(s.pop()),y--;e=e.flat(),i=i.flat(),w=w.concat(e).concat(i),t.push(o[0],o[2],o[3],o[0],o[1],o[2]),t.push(s[0],s[2],s[3],s[0],s[1],s[2])}const f=[l/2,c/2,u/2];h=w.reduce(((e,t,i)=>e.concat(t*f[i%3])),[]);const m=0===e.sideOrientation?0:e.sideOrientation||a.x.DEFAULTSIDE,k=e.faceUV||new Array(6),R=e.faceColors,g=[];for(let e=0;e<6;e++)void 0===k[e]&&(k[e]=new o.Lt(0,0,1,1)),R&&void 0===R[e]&&(R[e]=new s.HE(1,1,1,1));for(let e=0;e<6;e++)if(n.push(k[e].z,r.e.UseOpenGLOrientationForUV?1-k[e].w:k[e].w),n.push(k[e].x,r.e.UseOpenGLOrientationForUV?1-k[e].w:k[e].w),n.push(k[e].x,r.e.UseOpenGLOrientationForUV?1-k[e].y:k[e].y),n.push(k[e].z,r.e.UseOpenGLOrientationForUV?1-k[e].y:k[e].y),R)for(let t=0;t<4;t++)g.push(R[e].r,R[e].g,R[e].b,R[e].a);a.x._ComputeSides(m,h,t,i,n,e.frontUVs,e.backUVs);const C=new a.x;if(C.indices=t,C.positions=h,C.normals=i,C.uvs=n,R){const e=m===a.x.DOUBLESIDE?g.concat(g):g;C.colors=e}return C}function l(e,t={},i=null){const o=new n.Kj(e,i);return t.sideOrientation=n.Kj._GetDefaultSideOrientation(t.sideOrientation),o._originalBuilderSideOrientation=t.sideOrientation,h(t).applyToMesh(o,t.updatable),o}const c={CreateBox:l};a.x.CreateBox=h,n.Kj.CreateBox=(e,t,i=null,o,s)=>l(e,{size:t,sideOrientation:s,updatable:o},i)},6654:(e,t,i)=>{i.d(t,{Hq:()=>a,mx:()=>h,pT:()=>r});var o=i(3632),s=i(4517),n=i(3027);function a(e){const t=[],i=[],o=[],a=[],r=e.width||e.size||1,h=e.height||e.size||1,l=0===e.sideOrientation?0:e.sideOrientation||s.x.DEFAULTSIDE,c=r/2,u=h/2;i.push(-c,-u,0),o.push(0,0,-1),a.push(0,n.e.UseOpenGLOrientationForUV?1:0),i.push(c,-u,0),o.push(0,0,-1),a.push(1,n.e.UseOpenGLOrientationForUV?1:0),i.push(c,u,0),o.push(0,0,-1),a.push(1,n.e.UseOpenGLOrientationForUV?0:1),i.push(-c,u,0),o.push(0,0,-1),a.push(0,n.e.UseOpenGLOrientationForUV?0:1),t.push(0),t.push(1),t.push(2),t.push(0),t.push(2),t.push(3),s.x._ComputeSides(l,i,t,o,a,e.frontUVs,e.backUVs);const d=new s.x;return d.indices=t,d.positions=i,d.normals=o,d.uvs=a,d}function r(e,t={},i=null){const s=new o.Kj(e,i);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),s._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(s,t.updatable),t.sourcePlane&&(s.translate(t.sourcePlane.normal,-t.sourcePlane.d),s.setDirection(t.sourcePlane.normal.scale(-1))),s}const h={CreatePlane:r};s.x.CreatePlane=a,o.Kj.CreatePlane=(e,t,i,o,s)=>r(e,{size:t,width:t,height:t,sideOrientation:s,updatable:o},i)}}]);
//# sourceMappingURL=14.babylonBundle.js.map