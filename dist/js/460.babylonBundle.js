"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[460],{1503:(t,i,e)=>{var s,n,o,a,r,h;e.d(i,{Bq:()=>a,Rm:()=>r,c4:()=>h,cK:()=>n,gw:()=>s,hd:()=>o}),function(t){t[t.FREE=0]="FREE",t[t.LIMITED=1]="LIMITED",t[t.LOCKED=2]="LOCKED"}(s||(s={})),function(t){t[t.LINEAR_X=0]="LINEAR_X",t[t.LINEAR_Y=1]="LINEAR_Y",t[t.LINEAR_Z=2]="LINEAR_Z",t[t.ANGULAR_X=3]="ANGULAR_X",t[t.ANGULAR_Y=4]="ANGULAR_Y",t[t.ANGULAR_Z=5]="ANGULAR_Z",t[t.LINEAR_DISTANCE=6]="LINEAR_DISTANCE"}(n||(n={})),function(t){t[t.BALL_AND_SOCKET=1]="BALL_AND_SOCKET",t[t.DISTANCE=2]="DISTANCE",t[t.HINGE=3]="HINGE",t[t.SLIDER=4]="SLIDER",t[t.LOCK=5]="LOCK",t[t.PRISMATIC=6]="PRISMATIC",t[t.SIX_DOF=7]="SIX_DOF"}(o||(o={})),function(t){t[t.SPHERE=0]="SPHERE",t[t.CAPSULE=1]="CAPSULE",t[t.CYLINDER=2]="CYLINDER",t[t.BOX=3]="BOX",t[t.CONVEX_HULL=4]="CONVEX_HULL",t[t.CONTAINER=5]="CONTAINER",t[t.MESH=6]="MESH",t[t.HEIGHTFIELD=7]="HEIGHTFIELD"}(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.VELOCITY=1]="VELOCITY",t[t.POSITION=2]="POSITION"}(r||(r={})),function(t){t[t.STATIC=0]="STATIC",t[t.ANIMATED=1]="ANIMATED",t[t.DYNAMIC=2]="DYNAMIC"}(h||(h={}))},766:(t,i,e)=>{e.d(i,{a:()=>y});var s=e(972),n=e(1503),o=e(9288),a=e(7670),r=e(3239),h=e(3632),_=e(7959),p=e(2085),l=e(4673);class c{constructor(t,i,e){this._vertices=[],this._indices=[];const n=t.computeWorldMatrix(!0),o=new s.P,a=new s._f,r=new s.P;n.decompose(o,a,r),this._bodyFromWorld=s.y3.Compose(s.P.One(),t.rotationQuaternion?t.rotationQuaternion:s._f.Identity(),t.position),this._bodyFromWorld=this._bodyFromWorld.invert(),this._isRightHanded=e.useRightHandedSystem,this._collectIndices=i}addMesh(t,i){const e=this._vertices.length,n=t.computeWorldMatrix(!0).multiply(this._bodyFromWorld),o=t.getVerticesData(_.o.PositionKind)||[],a=o.length/3;for(let t=0;t<a;t++){const i=new s.P(o[3*t+0],o[3*t+1],o[3*t+2]);this._vertices.push(s.P.TransformCoordinates(i,n))}if(this._collectIndices){const i=t.getIndices();if(i)for(let t=0;t<i.length;t+=3)this._isRightHanded?(this._indices.push(i[t+0]+e),this._indices.push(i[t+1]+e),this._indices.push(i[t+2]+e)):(this._indices.push(i[t+2]+e),this._indices.push(i[t+1]+e),this._indices.push(i[t+0]+e))}i&&t.getChildMeshes(!1).filter((t=>!t.physicsBody)).forEach((t=>this.addMesh(t,i)))}getVertices(t){const i=3*this._vertices.length,e=4*i,s=t._malloc(e),n=new Float32Array(t.HEAPU8.buffer,s,i);for(let t=0;t<this._vertices.length;t++)n[3*t+0]=this._vertices[t].x,n[3*t+1]=this._vertices[t].y,n[3*t+2]=this._vertices[t].z;return n}freeBuffer(t,i){t._free(i.byteOffset)}getTriangles(t){const i=4*this._indices.length,e=t._malloc(i),s=new Int32Array(t.HEAPU8.buffer,e,this._indices.length);for(let t=0;t<this._indices.length;t++)s[t]=this._indices[t];return s}}class d{constructor(t){this.hpBodyId=t,this.userMassProps={centerOfMass:void 0,mass:void 0,inertia:void 0,inertiaOrientation:void 0}}}class u{constructor(){this.bodyId=BigInt(0),this.position=new s.P,this.normal=new s.P}}class g{constructor(){this.contactOnA=new u,this.contactOnB=new u,this.impulseApplied=0}static readToRef(t,i,e){const s=new Int32Array(t,i),n=new Float32Array(t,i);e.contactOnA.bodyId=BigInt(s[2]),e.contactOnA.position.set(n[10],n[11],n[12]),e.contactOnA.normal.set(n[13],n[14],n[15]),e.contactOnB.bodyId=BigInt(s[18]),e.contactOnB.position.set(n[26],n[27],n[28]),e.contactOnB.normal.set(n[29],n[30],n[31]),e.impulseApplied=n[33]}}class y{constructor(t=!0,i=HK){this._useDeltaForWorldStep=t,this._hknp={},this.name="HavokPlugin",this._fixedTimeStep=1/60,this._timeStep=1/60,this._tmpVec3=p.B.BuildArray(3,s.P.Zero),this._bodies=new Map,this._bodyCollisionObservable=new Map,this.onCollisionObservable=new l.y$,"function"!=typeof i?(this._hknp=i,this.isSupported()?(this.world=this._hknp.HP_World_Create()[1],this._queryCollector=this._hknp.HP_QueryCollector_Create(1)[1]):o.Y.Error("Havok is not available. Please make sure you included the js file.")):o.Y.Error("Havok is not ready. Please make sure you await HK() before using the plugin.")}isSupported(){return void 0!==this._hknp}setGravity(t){this._hknp.HP_World_SetGravity(this.world,this._bVecToV3(t))}setTimeStep(t){this._fixedTimeStep=t}getTimeStep(){return this._fixedTimeStep}executeStep(t,i){for(const t of i)t.disablePreStep||this.setPhysicsBodyTransformation(t,t.transformNode);this._hknp.HP_World_Step(this.world,this._useDeltaForWorldStep?t:this._timeStep),this._bodyBuffer=this._hknp.HP_World_GetBodyBuffer(this.world)[1];for(const t of i)this.sync(t);this._notifyCollisions()}getPluginVersion(){return 2}initBody(t,i,e,s){t._pluginData=new d(this._hknp.HP_Body_Create()[1]),this._internalSetMotionType(t._pluginData,i);const n=[this._bVecToV3(e),this._bQuatToV4(s)];this._hknp.HP_Body_SetQTransform(t._pluginData.hpBodyId,n),this._hknp.HP_World_AddBody(this.world,t._pluginData.hpBodyId,t.startAsleep),this._bodies.set(t._pluginData.hpBodyId[0],{body:t,index:0})}removeBody(t){if(t._pluginDataInstances&&t._pluginDataInstances.length>0)for(const i of t._pluginDataInstances)this._bodyCollisionObservable.delete(i.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,i.hpBodyId);t._pluginData&&(this._bodyCollisionObservable.delete(t._pluginData.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,t._pluginData.hpBodyId))}initBodyInstances(t,i,e){var s,n;const o=null!==(n=null===(s=e._thinInstanceDataStorage)||void 0===s?void 0:s.instancesCount)&&void 0!==n?n:0,a=e._thinInstanceDataStorage.matrixData;a&&(this._createOrUpdateBodyInstances(t,i,a,0,o,!1),t._pluginDataInstances.forEach(((i,e)=>{this._bodies.set(i.hpBodyId[0],{body:t,index:e})})))}_createOrUpdateBodyInstances(t,i,e,n,o,a){const r=s.jp.Quaternion[0],h=s.y3.Identity();for(let _=n;_<o;_++){const n=[e[16*_+12],e[16*_+13],e[16*_+14]];let o;o=a?t._pluginDataInstances[_].hpBodyId:this._hknp.HP_Body_Create()[1],h.setRowFromFloats(0,e[16*_+0],e[16*_+1],e[16*_+2],0),h.setRowFromFloats(1,e[16*_+4],e[16*_+5],e[16*_+6],0),h.setRowFromFloats(2,e[16*_+8],e[16*_+9],e[16*_+10],0),s._f.FromRotationMatrixToRef(h,r);const p=[n,[r.x,r.y,r.z,r.w]];if(this._hknp.HP_Body_SetQTransform(o,p),!a){const e=new d(o);t._pluginDataInstances.length&&(e.userMassProps=t._pluginDataInstances[0].userMassProps),this._internalSetMotionType(e,i),this._internalUpdateMassProperties(e),t._pluginDataInstances.push(e),this._hknp.HP_World_AddBody(this.world,o,t.startAsleep),e.worldTransformOffset=this._hknp.HP_Body_GetWorldTransformOffset(o)[1]}}}updateBodyInstances(t,i){var e,s;const n=null!==(s=null===(e=i._thinInstanceDataStorage)||void 0===e?void 0:e.instancesCount)&&void 0!==s?s:0,o=i._thinInstanceDataStorage.matrixData;if(!o)return;const a=t._pluginDataInstances.length,r=this.getMotionType(t);if(n>a){this._createOrUpdateBodyInstances(t,r,o,a,n,!1);const i=this._hknp.HP_Body_GetShape(t._pluginDataInstances[0].hpBodyId)[1];for(let e=a;e<n;e++)this._hknp.HP_Body_SetShape(t._pluginDataInstances[e].hpBodyId,i),this._internalUpdateMassProperties(t._pluginDataInstances[e]),this._bodies.set(t._pluginDataInstances[e].hpBodyId[0],{body:t,index:e})}else if(n<a){const i=a-n;for(let e=0;e<i;e++){const i=t._pluginDataInstances.pop();this._bodies.delete(i.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,i.hpBodyId),this._hknp.HP_Body_Release(i.hpBodyId)}this._createOrUpdateBodyInstances(t,r,o,0,n,!0)}}sync(t){this.syncTransform(t,t.transformNode)}syncTransform(t,i){if(t._pluginDataInstances.length){const e=i,s=e._thinInstanceDataStorage.matrixData;if(!s)return;const n=t._pluginDataInstances.length;for(let i=0;i<n;i++){const e=t._pluginDataInstances[i].worldTransformOffset,n=new Float32Array(this._hknp.HEAPU8.buffer,this._bodyBuffer+e,16),o=16*i;for(let t=0;t<15;t++)3!=(3&t)&&(s[o+t]=n[t]);s[o+15]=1}e.thinInstanceBufferUpdated("matrix")}else try{const e=this._hknp.HP_Body_GetQTransform(t._pluginData.hpBodyId)[1],n=e[0],o=e[1],a=s.jp.Quaternion[0];a.set(o[0],o[1],o[2],o[3]);const r=i.parent;if(r&&r.absoluteRotationQuaternion){s.jp.Vector3[2].set(n[0],n[1],n[2]),r.absoluteRotationQuaternion.conjugateToRef(s.jp.Quaternion[1]),a.multiplyInPlace(s.jp.Quaternion[1]),s.jp.Vector3[2].subtractToRef(r.absolutePosition,s.jp.Vector3[0]);const t=s.jp.Vector3[1];s.jp.Vector3[0].rotateByQuaternionToRef(s.jp.Quaternion[1],t),i.position.set(t.x,t.y,t.z)}else i.position.set(n[0],n[1],n[2]);i.rotationQuaternion?i.rotationQuaternion.copyFrom(a):a.toEulerAnglesToRef(i.rotation)}catch(t){console.log(`Syncing transform failed for node ${i.name}: ${t.message}...`)}}setShape(t,i){var e,s,n;const o=i&&i._pluginData?i._pluginData:BigInt(0);if(!(t.transformNode instanceof h.Kj&&(null===(e=t.transformNode._thinInstanceDataStorage)||void 0===e?void 0:e.matrixData)))return this._hknp.HP_Body_SetShape(t._pluginData.hpBodyId,o),void this._internalUpdateMassProperties(t._pluginData);const a=null!==(n=null===(s=t.transformNode._thinInstanceDataStorage)||void 0===s?void 0:s.instancesCount)&&void 0!==n?n:0;for(let i=0;i<a;i++)this._hknp.HP_Body_SetShape(t._pluginDataInstances[i].hpBodyId,o),this._internalUpdateMassProperties(t._pluginDataInstances[i])}_getPluginReference(t,i){var e;return(null===(e=t._pluginDataInstances)||void 0===e?void 0:e.length)?t._pluginDataInstances[null!=i?i:0]:t._pluginData}getShape(t){const i=this._getPluginReference(t),e=this._hknp.HP_Body_GetShape(i.hpBodyId)[1];if(0!=e){const i=t.transformNode.getScene();return new r.$n({pluginData:e},i)}return null}getShapeType(t){return t.type?t.type:this._hknp.HP_Shape_GetType(t._pluginData)}setEventMask(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_SetEventMask(t.hpBodyId,i)}),e)}getEventMask(t,i){const e=this._getPluginReference(t,i);return this._hknp.HP_Body_GetEventMask(e)[1]}_fromMassPropertiesTuple(t){return{centerOfMass:s.P.FromArray(t[0]),mass:t[1],inertia:s.P.FromArray(t[2]),inertiaOrientation:s._f.FromArray(t[3])}}_internalUpdateMassProperties(t){const i=this._internalComputeMassProperties(t),e=t.userMassProps;e.centerOfMass&&(i[0]=e.centerOfMass.asArray()),null!=e.mass&&(i[1]=e.mass),e.inertia&&(i[2]=e.inertia.asArray()),e.inertiaOrientation&&(i[3]=e.inertiaOrientation.asArray()),this._hknp.HP_Body_SetMassProperties(t.hpBodyId,i)}_internalSetMotionType(t,i){switch(i){case n.c4.STATIC:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.STATIC);break;case n.c4.ANIMATED:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.KINEMATIC);break;case n.c4.DYNAMIC:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.DYNAMIC)}}setMotionType(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._internalSetMotionType(t,i)}),e)}getMotionType(t,i){const e=this._getPluginReference(t,i),s=this._hknp.HP_Body_GetMotionType(e.hpBodyId)[1];switch(s){case this._hknp.MotionType.STATIC:return n.c4.STATIC;case this._hknp.MotionType.KINEMATIC:return n.c4.ANIMATED;case this._hknp.MotionType.DYNAMIC:return n.c4.DYNAMIC}throw new Error("Unknown motion type: "+s)}_internalComputeMassProperties(t){const i=this._hknp.HP_Body_GetShape(t.hpBodyId);if(i[0]==this._hknp.Result.RESULT_OK){const t=this._hknp.HP_Shape_BuildMassProperties(i[1]);if(t[0]==this._hknp.Result.RESULT_OK)return t[1]}return[[0,0,0],1,[1,1,1],[0,0,0,1]]}computeMassProperties(t,i){const e=this._getPluginReference(t,i),s=this._internalComputeMassProperties(e);return this._fromMassPropertiesTuple(s)}setMassProperties(t,i,e){this._applyToBodyOrInstances(t,(t=>{t.userMassProps=i,this._internalUpdateMassProperties(t)}),e)}getMassProperties(t,i){const e=this._getPluginReference(t,i),s=this._hknp.HP_Body_GetMassProperties(e.hpBodyId)[1];return this._fromMassPropertiesTuple(s)}setLinearDamping(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_SetLinearDamping(t.hpBodyId,i)}),e)}getLinearDamping(t,i){const e=this._getPluginReference(t,i);return this._hknp.HP_Body_GetLinearDamping(e.hpBodyId)[1]}setAngularDamping(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_SetAngularDamping(t.hpBodyId,i)}),e)}getAngularDamping(t,i){const e=this._getPluginReference(t,i);return this._hknp.HP_Body_GetAngularDamping(e.hpBodyId)[1]}setLinearVelocity(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_SetLinearVelocity(t.hpBodyId,this._bVecToV3(i))}),e)}getLinearVelocityToRef(t,i,e){const s=this._getPluginReference(t,e),n=this._hknp.HP_Body_GetLinearVelocity(s.hpBodyId)[1];this._v3ToBvecRef(n,i)}_applyToBodyOrInstances(t,i,e){var s;if((null===(s=t._pluginDataInstances)||void 0===s?void 0:s.length)>0&&void 0===e)for(let e=0;e<t._pluginDataInstances.length;e++)i(t._pluginDataInstances[e]);else i(this._getPluginReference(t,e))}applyImpulse(t,i,e,s){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_ApplyImpulse(t.hpBodyId,this._bVecToV3(e),this._bVecToV3(i))}),s)}applyForce(t,i,e,s){i.scaleToRef(this.getTimeStep(),this._tmpVec3[0]),this.applyImpulse(t,this._tmpVec3[0],e,s)}setAngularVelocity(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_SetAngularVelocity(t.hpBodyId,this._bVecToV3(i))}),e)}getAngularVelocityToRef(t,i,e){const s=this._getPluginReference(t,e),n=this._hknp.HP_Body_GetAngularVelocity(s.hpBodyId)[1];this._v3ToBvecRef(n,i)}setPhysicsBodyTransformation(t,i){const e=t.transformNode;if(t.numInstances>0){const i=e._thinInstanceDataStorage.matrixData;if(!i)return;const s=t.numInstances;this._createOrUpdateBodyInstances(t,t.getMotionType(),i,0,s,!0)}else this._hknp.HP_Body_SetQTransform(t._pluginData.hpBodyId,this._getTransformInfos(i))}setGravityFactor(t,i,e){this._applyToBodyOrInstances(t,(t=>{this._hknp.HP_Body_SetGravityFactor(t.hpBodyId,i)}),e)}getGravityFactor(t,i){const e=this._getPluginReference(t,i);return this._hknp.HP_Body_GetGravityFactor(e.hpBodyId)[1]}disposeBody(t){if(t._pluginDataInstances&&t._pluginDataInstances.length>0)for(const i of t._pluginDataInstances)this._hknp.HP_Body_Release(i.hpBodyId),i.hpBodyId=void 0;t._pluginData&&(this._hknp.HP_Body_Release(t._pluginData.hpBodyId),t._pluginData.hpBodyId=void 0)}initShape(t,i,e){switch(i){case n.Bq.SPHERE:{const i=e.radius||1,s=e.center?this._bVecToV3(e.center):[0,0,0];t._pluginData=this._hknp.HP_Shape_CreateSphere(s,i)[1]}break;case n.Bq.BOX:{const i=e.rotation?this._bQuatToV4(e.rotation):[0,0,0,1],s=e.extents?this._bVecToV3(e.extents):[1,1,1],n=e.center?this._bVecToV3(e.center):[0,0,0];t._pluginData=this._hknp.HP_Shape_CreateBox(n,i,s)[1]}break;case n.Bq.CAPSULE:{const i=e.pointA?this._bVecToV3(e.pointA):[0,0,0],s=e.pointB?this._bVecToV3(e.pointB):[0,1,0],n=e.radius||0;t._pluginData=this._hknp.HP_Shape_CreateCapsule(i,s,n)[1]}break;case n.Bq.CONTAINER:t._pluginData=this._hknp.HP_Shape_CreateContainer()[1];break;case n.Bq.CYLINDER:{const i=e.pointA?this._bVecToV3(e.pointA):[0,0,0],s=e.pointB?this._bVecToV3(e.pointB):[0,1,0],n=e.radius||0;t._pluginData=this._hknp.HP_Shape_CreateCylinder(i,s,n)[1]}break;case n.Bq.CONVEX_HULL:case n.Bq.MESH:{const s=e.mesh;if(!s)throw new Error("No mesh provided to create physics shape.");{const o=!!e.includeChildMeshes,a=i!=n.Bq.CONVEX_HULL,r=new c(s,a,null==s?void 0:s.getScene());r.addMesh(s,o);const h=r.getVertices(this._hknp),_=h.length/3;if(i==n.Bq.CONVEX_HULL)t._pluginData=this._hknp.HP_Shape_CreateConvexHull(h.byteOffset,_)[1];else{const i=r.getTriangles(this._hknp),e=i.length/3;t._pluginData=this._hknp.HP_Shape_CreateMesh(h.byteOffset,_,i.byteOffset,e)[1],r.freeBuffer(this._hknp,i)}r.freeBuffer(this._hknp,h)}}break;default:throw new Error("Unsupported Shape Type.")}}setShapeFilterMembershipMask(t,i){const e=this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][1];this._hknp.HP_Shape_SetFilterInfo(t._pluginData,[i,e])}getShapeFilterMembershipMask(t){return this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][0]}setShapeFilterCollideMask(t,i){const e=this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][0];this._hknp.HP_Shape_SetFilterInfo(t._pluginData,[e,i])}getShapeFilterCollideMask(t){return this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][1]}setMaterial(t,i){var e,s,n,o,r;const h=null!==(e=i.friction)&&void 0!==e?e:.5,_=null!==(s=i.staticFriction)&&void 0!==s?s:h,p=null!==(n=i.restitution)&&void 0!==n?n:0,l=null!==(o=i.frictionCombine)&&void 0!==o?o:a.z.MINIMUM,c=null!==(r=i.restitutionCombine)&&void 0!==r?r:a.z.MAXIMUM,d=[_,h,p,this._materialCombineToNative(l),this._materialCombineToNative(c)];this._hknp.HP_Shape_SetMaterial(t._pluginData,d)}setDensity(t,i){this._hknp.HP_Shape_SetDensity(t._pluginData,i)}getDensity(t){return this._hknp.HP_Shape_GetDensity(t._pluginData)[1]}_getTransformInfos(t){if(t.parent)return t.computeWorldMatrix(),[this._bVecToV3(t.absolutePosition),this._bQuatToV4(t.absoluteRotationQuaternion)];let i=s.jp.Quaternion[0];if(t.rotationQuaternion)i=t.rotationQuaternion;else{const e=t.rotation;s._f.FromEulerAnglesToRef(e.x,e.y,e.z,i)}return[this._bVecToV3(t.position),this._bQuatToV4(i)]}addChild(t,i,e,s,n){const o=[e?this._bVecToV3(e):[0,0,0],s?this._bQuatToV4(s):[0,0,0,1],n?this._bVecToV3(n):[1,1,1]];this._hknp.HP_Shape_AddChild(t._pluginData,i._pluginData,o)}removeChild(t,i){this._hknp.HP_Shape_RemoveChild(t._pluginData,i)}getNumChildren(t){return this._hknp.HP_Shape_GetNumChildren(t._pluginData)[1]}getBoundingBox(t){return{}}getBodyGeometry(t){var i;const e=(null===(i=t._pluginDataInstances)||void 0===i?void 0:i.length)>0?t._pluginDataInstances[0]:t._pluginData,s=this._hknp.HP_Body_GetShape(e.hpBodyId)[1],n=this._hknp.HP_Shape_CreateDebugDisplayGeometry(s);if(n[0]!=this._hknp.Result.RESULT_OK)return{positions:[],indices:[]};const o=this._hknp.HP_DebugGeometry_GetInfo(n[1])[1],a=new Float32Array(this._hknp.HEAPU8.buffer,o[0],3*o[1]),r=new Uint32Array(this._hknp.HEAPU8.buffer,o[2],3*o[3]),h=a.slice(0),_=r.slice(0);return this._hknp.HP_DebugGeometry_Release(n[1]),{positions:h,indices:_}}disposeShape(t){this._hknp.HP_Shape_Release(t._pluginData),t._pluginData=void 0}initConstraint(t,i,e,a,r){var h,_,p,l;const c=t.type,d=t.options;if(!c||!d)return void o.Y.Warn("No constraint type or options. Constraint is invalid.");if(i._pluginDataInstances.length>0&&void 0===a||e._pluginDataInstances.length>0&&void 0===r)return void o.Y.Warn("Body is instanced but no instance index was specified. Constraint will not be applied.");const u=this._hknp.HP_Constraint_Create()[1];t._pluginData=u;const g=this._getPluginReference(i,a).hpBodyId,y=this._getPluginReference(e,r).hpBodyId;this._hknp.HP_Constraint_SetParentBody(u,g),this._hknp.HP_Constraint_SetChildBody(u,y);const A=d.pivotA?this._bVecToV3(d.pivotA):this._bVecToV3(s.P.Zero()),C=null!==(h=d.axisA)&&void 0!==h?h:new s.P(1,0,0),I=this._tmpVec3[0];d.perpAxisA?I.copyFrom(d.perpAxisA):C.getNormalToRef(I),this._hknp.HP_Constraint_SetAnchorInParent(u,A,this._bVecToV3(C),this._bVecToV3(I));const P=d.pivotB?this._bVecToV3(d.pivotB):this._bVecToV3(s.P.Zero()),M=null!==(_=d.axisB)&&void 0!==_?_:new s.P(1,0,0),k=this._tmpVec3[0];if(d.perpAxisB?k.copyFrom(d.perpAxisB):M.getNormalToRef(k),this._hknp.HP_Constraint_SetAnchorInChild(u,P,this._bVecToV3(M),this._bVecToV3(k)),c==n.hd.LOCK)this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(c==n.hd.DISTANCE){const t=d.maxDistance||0,i=this._hknp.ConstraintAxis.LINEAR_DISTANCE;this._hknp.HP_Constraint_SetAxisMode(u,i,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMinLimit(u,i,t),this._hknp.HP_Constraint_SetAxisMaxLimit(u,i,t)}else if(c==n.hd.HINGE)this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(c==n.hd.PRISMATIC)this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(c==n.hd.SLIDER)this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(c==n.hd.BALL_AND_SOCKET)this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(u,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else{if(c!=n.hd.SIX_DOF)throw new Error("Unsupported Constraint Type.");{const i=t;for(const t of i.limits){const i=this._constraintAxisToNative(t.axis);0==(null!==(p=t.minLimit)&&void 0!==p?p:-1)&&0==(null!==(l=t.maxLimit)&&void 0!==l?l:-1)?this._hknp.HP_Constraint_SetAxisMode(u,i,this._hknp.ConstraintAxisLimitMode.LOCKED):(null!=t.minLimit&&(this._hknp.HP_Constraint_SetAxisMode(u,i,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMinLimit(u,i,t.minLimit)),null!=t.maxLimit&&(this._hknp.HP_Constraint_SetAxisMode(u,i,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMaxLimit(u,i,t.maxLimit)))}}}const m=!!d.collision;this._hknp.HP_Constraint_SetCollisionsEnabled(u,m),this._hknp.HP_Constraint_SetEnabled(u,!0)}addConstraint(t,i,e,s,n){this.initConstraint(e,t,i,s,n)}setEnabled(t,i){this._hknp.HP_Constraint_SetEnabled(t._pluginData,i)}getEnabled(t){return this._hknp.HP_Constraint_GetEnabled(t._pluginData)[1]}setCollisionsEnabled(t,i){this._hknp.HP_Constraint_SetCollisionsEnabled(t._pluginData,i)}getCollisionsEnabled(t){return this._hknp.HP_Constraint_GetCollisionsEnabled(t._pluginData)[1]}setAxisFriction(t,i,e){this._hknp.HP_Constraint_SetAxisFriction(t._pluginData,this._constraintAxisToNative(i),e)}getAxisFriction(t,i){return this._hknp.HP_Constraint_GetAxisFriction(t._pluginData,this._constraintAxisToNative(i))[1]}setAxisMode(t,i,e){this._hknp.HP_Constraint_SetAxisMode(t._pluginData,this._constraintAxisToNative(i),this._limitModeToNative(e))}getAxisMode(t,i){const e=this._hknp.HP_Constraint_GetAxisMode(t._pluginData,this._constraintAxisToNative(i))[1];return this._nativeToLimitMode(e)}setAxisMinLimit(t,i,e){this._hknp.HP_Constraint_SetAxisMinLimit(t._pluginData,this._constraintAxisToNative(i),e)}getAxisMinLimit(t,i){return this._hknp.HP_Constraint_GetAxisMinLimit(t._pluginData,this._constraintAxisToNative(i))[1]}setAxisMaxLimit(t,i,e){this._hknp.HP_Constraint_SetAxisMaxLimit(t._pluginData,this._constraintAxisToNative(i),e)}getAxisMaxLimit(t,i){return this._hknp.HP_Constraint_GetAxisMaxLimit(t._pluginData,this._constraintAxisToNative(i))[1]}setAxisMotorType(t,i,e){this._hknp.HP_Constraint_SetAxisMotorType(t._pluginData,this._constraintAxisToNative(i),this._constraintMotorTypeToNative(e))}getAxisMotorType(t,i){return this._nativeToMotorType(this._hknp.HP_Constraint_GetAxisMotorType(t._pluginData,this._constraintAxisToNative(i))[1])}setAxisMotorTarget(t,i,e){this._hknp.HP_Constraint_SetAxisMotorTarget(t._pluginData,this._constraintAxisToNative(i),e)}getAxisMotorTarget(t,i){return this._hknp.HP_Constraint_GetAxisMotorTarget(t._pluginData,this._constraintAxisToNative(i))[1]}setAxisMotorMaxForce(t,i,e){this._hknp.HP_Constraint_SetAxisMotorMaxForce(t._pluginData,this._constraintAxisToNative(i),e)}getAxisMotorMaxForce(t,i){return this._hknp.HP_Constraint_GetAxisMotorMaxForce(t._pluginData,this._constraintAxisToNative(i))[1]}disposeConstraint(t){const i=t._pluginData;this._hknp.HP_Constraint_SetEnabled(i,!1),this._hknp.HP_Constraint_Release(i),t._pluginData=void 0}raycast(t,i,e){e.reset(t,i);const s=[this._bVecToV3(t),this._bVecToV3(i),[-1,-1]];if(this._hknp.HP_World_CastRayWithCollector(this.world,this._queryCollector,s),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){const t=this._hknp.HP_QueryCollector_GetCastRayResult(this._queryCollector,0)[1],i=t[1][3],s=t[1][4];e.setHitData({x:s[0],y:s[1],z:s[2]},{x:i[0],y:i[1],z:i[2]}),e.calculateHitDistance();const n=this._bodies.get(t[1][0][0]);e.body=null==n?void 0:n.body,e.bodyIndex=null==n?void 0:n.index}}getCollisionObservable(t){const i=t._pluginData.hpBodyId[0];let e=this._bodyCollisionObservable.get(i);return e||(e=new l.y$,this._bodyCollisionObservable.set(i,e)),e}setCollisionCallbackEnabled(t,i){const e=this._hknp.EventType.COLLISION_STARTED.value|this._hknp.EventType.COLLISION_CONTINUED.value|this._hknp.EventType.COLLISION_FINISHED.value;t._pluginDataInstances&&t._pluginDataInstances.length?t._pluginDataInstances.forEach((t=>{this._hknp.HP_Body_SetEventMask(t.hpBodyId,i?e:0)})):t._pluginData&&this._hknp.HP_Body_SetEventMask(t._pluginData.hpBodyId,i?e:0)}_notifyCollisions(){let t=this._hknp.HP_World_GetCollisionEvents(this.world)[1];const i=new g,e=Number(this.world);for(;t;){g.readToRef(this._hknp.HEAPU8.buffer,t,i),i.contactOnB.position.subtractToRef(i.contactOnA.position,this._tmpVec3[0]);const n=s.P.Dot(this._tmpVec3[0],i.contactOnA.normal),o=this._bodies.get(i.contactOnA.bodyId),a=this._bodies.get(i.contactOnB.bodyId),r={collider:o.body,colliderIndex:o.index,collidedAgainst:a.body,collidedAgainstIndex:a.index,point:i.contactOnA.position,distance:n,impulse:i.impulseApplied,normal:i.contactOnA.normal};if(this.onCollisionObservable.notifyObservers(r),this._bodyCollisionObservable.size){const t=this._bodyCollisionObservable.get(i.contactOnA.bodyId),e=this._bodyCollisionObservable.get(i.contactOnB.bodyId);t?t.notifyObservers(r):e&&(r.collider=a.body,r.colliderIndex=a.index,r.collidedAgainst=o.body,r.collidedAgainstIndex=o.index,r.normal=i.contactOnB.normal,e.notifyObservers(r))}t=this._hknp.HP_World_GetNextCollisionEvent(e,t)}}get numBodies(){return this._hknp.HP_World_GetNumBodies(this.world)[1]}dispose(){this._hknp.HP_QueryCollector_Release(this._queryCollector),this._queryCollector=BigInt(0),this._hknp.HP_World_Release(this.world),this.world=void 0}_v3ToBvecRef(t,i){i.set(t[0],t[1],t[2])}_bVecToV3(t){return[t._x,t._y,t._z]}_bQuatToV4(t){return[t._x,t._y,t._z,t._w]}_constraintMotorTypeToNative(t){switch(t){case n.Rm.POSITION:return this._hknp.ConstraintMotorType.POSITION;case n.Rm.VELOCITY:return this._hknp.ConstraintMotorType.VELOCITY}return this._hknp.ConstraintMotorType.NONE}_nativeToMotorType(t){switch(t){case this._hknp.ConstraintMotorType.POSITION:return n.Rm.POSITION;case this._hknp.ConstraintMotorType.VELOCITY:return n.Rm.VELOCITY}return n.Rm.NONE}_materialCombineToNative(t){switch(t){case a.z.GEOMETRIC_MEAN:return this._hknp.MaterialCombine.GEOMETRIC_MEAN;case a.z.MINIMUM:return this._hknp.MaterialCombine.MINIMUM;case a.z.MAXIMUM:return this._hknp.MaterialCombine.MAXIMUM;case a.z.ARITHMETIC_MEAN:return this._hknp.MaterialCombine.ARITHMETIC_MEAN;case a.z.MULTIPLY:return this._hknp.MaterialCombine.MULTIPLY}}_constraintAxisToNative(t){switch(t){case n.cK.LINEAR_X:return this._hknp.ConstraintAxis.LINEAR_X;case n.cK.LINEAR_Y:return this._hknp.ConstraintAxis.LINEAR_Y;case n.cK.LINEAR_Z:return this._hknp.ConstraintAxis.LINEAR_Z;case n.cK.ANGULAR_X:return this._hknp.ConstraintAxis.ANGULAR_X;case n.cK.ANGULAR_Y:return this._hknp.ConstraintAxis.ANGULAR_Y;case n.cK.ANGULAR_Z:return this._hknp.ConstraintAxis.ANGULAR_Z;case n.cK.LINEAR_DISTANCE:return this._hknp.ConstraintAxis.LINEAR_DISTANCE}}_nativeToLimitMode(t){switch(t){case this._hknp.ConstraintAxisLimitMode.FREE:return n.gw.FREE;case this._hknp.ConstraintAxisLimitMode.LIMITED:return n.gw.LIMITED;case this._hknp.ConstraintAxisLimitMode.LOCKED:return n.gw.LOCKED}return n.gw.FREE}_limitModeToNative(t){switch(t){case n.gw.FREE:return this._hknp.ConstraintAxisLimitMode.FREE;case n.gw.LIMITED:return this._hknp.ConstraintAxisLimitMode.LIMITED;case n.gw.LOCKED:return this._hknp.ConstraintAxisLimitMode.LOCKED}}}},8830:(t,i,e)=>{e.d(i,{Q:()=>o});var s=e(972),n=e(730);class o{constructor(t,i,e,n){if(this._pluginData=void 0,this._pluginDataInstances=[],this._collisionCBEnabled=!1,this.disablePreStep=!0,!n)return;const o=n.getPhysicsEngine();if(!o)throw new Error("No Physics Engine available.");if(this._physicsEngine=o,2!=o.getPluginVersion())throw new Error("Plugin version is incorrect. Expected version 2.");const a=o.getPhysicsPlugin();if(!a)throw new Error("No Physics Plugin available.");this._physicsPlugin=a,t.rotationQuaternion||(t.rotationQuaternion=s._f.FromEulerAngles(t.rotation.x,t.rotation.y,t.rotation.z)),this.startAsleep=e;const r=t;r.hasThinInstances?this._physicsPlugin.initBodyInstances(this,i,r):this._physicsPlugin.initBody(this,i,t.absolutePosition,t.absoluteRotationQuaternion),this.transformNode=t,t.physicsBody=this,o.addBody(this),this._nodeDisposeObserver=t.onDisposeObservable.add((()=>{this.dispose()}))}getClassName(){return"PhysicsBody"}clone(t){const i=new o(t,this.getMotionType(),this.startAsleep,this.transformNode.getScene());return i.shape=this.shape,i}updateBodyInstances(){const t=this.transformNode;t.hasThinInstances&&this._physicsPlugin.updateBodyInstances(this,t)}get numInstances(){return this._pluginDataInstances.length}set shape(t){this._physicsPlugin.setShape(this,t)}get shape(){return this._physicsPlugin.getShape(this)}setEventMask(t,i){this._physicsPlugin.setEventMask(this,t,i)}getEventMask(t){return this._physicsPlugin.getEventMask(this,t)}setMotionType(t,i){this._physicsPlugin.setMotionType(this,t,i)}getMotionType(t){return this._physicsPlugin.getMotionType(this,t)}computeMassProperties(t){return this._physicsPlugin.computeMassProperties(this,t)}setMassProperties(t,i){this._physicsPlugin.setMassProperties(this,t,i)}getMassProperties(t){return this._physicsPlugin.getMassProperties(this,t)}setLinearDamping(t,i){this._physicsPlugin.setLinearDamping(this,t,i)}getLinearDamping(t){return this._physicsPlugin.getLinearDamping(this,t)}setAngularDamping(t,i){this._physicsPlugin.setAngularDamping(this,t,i)}getAngularDamping(t){return this._physicsPlugin.getAngularDamping(this,t)}setLinearVelocity(t,i){this._physicsPlugin.setLinearVelocity(this,t,i)}getLinearVelocityToRef(t,i){return this._physicsPlugin.getLinearVelocityToRef(this,t,i)}setAngularVelocity(t,i){this._physicsPlugin.setAngularVelocity(this,t,i)}getAngularVelocityToRef(t,i){return this._physicsPlugin.getAngularVelocityToRef(this,t,i)}applyImpulse(t,i,e){this._physicsPlugin.applyImpulse(this,t,i,e)}applyForce(t,i,e){this._physicsPlugin.applyForce(this,t,i,e)}getGeometry(){return this._physicsPlugin.getBodyGeometry(this)}getCollisionObservable(){return this._physicsPlugin.getCollisionObservable(this)}setCollisionCallbackEnabled(t){this._collisionCBEnabled=t,this._physicsPlugin.setCollisionCallbackEnabled(this,t)}getObjectCenterWorld(t){const i=new s.P;return this.getObjectCenterWorldToRef(i,t)}getObjectCenterWorldToRef(t,i){var e;if((null===(e=this._pluginDataInstances)||void 0===e?void 0:e.length)>0){const e=i||0,s=this.transformNode._thinInstanceDataStorage.matrixData;s&&t.set(s[16*e+12],s[16*e+13],s[16*e+14])}else t.copyFrom(this.transformNode.position);return t}addConstraint(t,i,e,s){this._physicsPlugin.addConstraint(this,t,i,e,s)}syncWithBone(t,i,e,o,a,r){const h=this.transformNode;if(h.rotationQuaternion)if(a){const e=s.jp.Quaternion[0];t.getRotationQuaternionToRef(n.T.WORLD,i,e),e.multiplyToRef(a,h.rotationQuaternion)}else t.getRotationQuaternionToRef(n.T.WORLD,i,h.rotationQuaternion);const _=s.jp.Vector3[0],p=s.jp.Vector3[1];r||((r=s.jp.Vector3[2]).x=0,r.y=1,r.z=0),t.getDirectionToRef(r,i,p),t.getAbsolutePositionToRef(i,_),null==o&&e&&(o=e.length()),null!=o&&(_.x+=p.x*o,_.y+=p.y*o,_.z+=p.z*o),h.setAbsolutePosition(_)}iterateOverAllInstances(t){var i;if((null===(i=this._pluginDataInstances)||void 0===i?void 0:i.length)>0)for(let i=0;i<this._pluginDataInstances.length;i++)t(this,i);else t(this,void 0)}setGravityFactor(t,i){this._physicsPlugin.setGravityFactor(this,t,i)}getGravityFactor(t){return this._physicsPlugin.getGravityFactor(this,t)}dispose(){this._collisionCBEnabled&&this.setCollisionCallbackEnabled(!1),this._nodeDisposeObserver&&(this.transformNode.onDisposeObservable.remove(this._nodeDisposeObserver),this._nodeDisposeObserver=null),this._physicsEngine.removeBody(this),this._physicsPlugin.removeBody(this),this._physicsPlugin.disposeBody(this),this._pluginData=null,this._pluginDataInstances.length=0}}},7670:(t,i,e)=>{var s;e.d(i,{z:()=>s}),function(t){t[t.GEOMETRIC_MEAN=0]="GEOMETRIC_MEAN",t[t.MINIMUM=1]="MINIMUM",t[t.MAXIMUM=2]="MAXIMUM",t[t.ARITHMETIC_MEAN=3]="ARITHMETIC_MEAN",t[t.MULTIPLY=4]="MULTIPLY"}(s||(s={}))},3239:(t,i,e)=>{e.d(i,{$n:()=>o,A1:()=>p,Tk:()=>h,V_:()=>a,gA:()=>l,oz:()=>r,vJ:()=>c,y2:()=>_});var s=e(1503),n=e(972);class o{constructor(t,i){var e;if(this._pluginData=void 0,!i)return;const s=i.getPhysicsEngine();if(!s)throw new Error("No Physics Engine available.");if(2!=s.getPluginVersion())throw new Error("Plugin version is incorrect. Expected version 2.");const n=s.getPhysicsPlugin();if(!n)throw new Error("No Physics Plugin available.");if(this._physicsPlugin=n,void 0!==t.pluginData&&null!==t.pluginData)this._pluginData=t.pluginData,this._type=this._physicsPlugin.getShapeType(this);else if(void 0!==t.type&&null!==t.type){this._type=t.type;const i=null!==(e=t.parameters)&&void 0!==e?e:{};this._physicsPlugin.initShape(this,t.type,i)}}getClassName(){return"PhysicsShape"}get type(){return this._type}set filterMembershipMask(t){this._physicsPlugin.setShapeFilterMembershipMask(this,t)}get filterMembershipMask(){return this._physicsPlugin.getShapeFilterMembershipMask(this)}set filterCollideMask(t){this._physicsPlugin.setShapeFilterCollideMask(this,t)}get filterCollideMask(){return this._physicsPlugin.getShapeFilterCollideMask(this)}set material(t){this._physicsPlugin.setMaterial(this,t),this._material=t}get material(){return this._material}set density(t){this._physicsPlugin.setDensity(this,t)}get density(){return this._physicsPlugin.getDensity(this)}addChildFromParent(t,i,e){const s=e.computeWorldMatrix(!0),o=t.computeWorldMatrix(!0),a=n.jp.Matrix[0];s.multiplyToRef(n.y3.Invert(o),a);const r=n.jp.Vector3[0],h=n.jp.Quaternion[0],_=n.jp.Vector3[1];a.decompose(_,h,r),this._physicsPlugin.addChild(this,i,r,h,_)}addChild(t,i,e,s){this._physicsPlugin.addChild(this,t,i,e,s)}removeChild(t){this._physicsPlugin.removeChild(this,t)}getNumChildren(){return this._physicsPlugin.getNumChildren(this)}getBoundingBox(){return this._physicsPlugin.getBoundingBox(this)}dispose(){this._physicsPlugin.disposeShape(this)}}class a extends o{constructor(t,i,e){super({type:s.Bq.SPHERE,parameters:{center:t,radius:i}},e)}static FromMesh(t){const i=t.getBoundingInfo(),e=i.boundingSphere.center,s=i.boundingBox.extendSize,n=Math.max(s.x,s.y,s.z);return new a(e,n,t.getScene())}}class r extends o{constructor(t,i,e,n){super({type:s.Bq.CAPSULE,parameters:{pointA:t,pointB:i,radius:e}},n)}static FromMesh(t){const i=t.getBoundingInfo(),e=i.boundingBox.extendSize.x,s=new n.P(0,i.boundingBox.extendSize.y-e,0),o=i.boundingBox.center.add(s),a=i.boundingBox.center.subtract(s);return new r(o,a,e,t.getScene())}}class h extends o{constructor(t,i,e,n){super({type:s.Bq.CYLINDER,parameters:{pointA:t,pointB:i,radius:e}},n)}static FromMesh(t){const i=t.getBoundingInfo(),e=i.boundingBox.extendSize.x,s=new n.P(0,i.boundingBox.extendSize.y,0),o=i.boundingBox.center.add(s),a=i.boundingBox.center.subtract(s);return new h(o,a,e,t.getScene())}}class _ extends o{constructor(t,i,e,n){super({type:s.Bq.BOX,parameters:{center:t,rotation:i,extents:e}},n)}static FromMesh(t){const i=t.getBoundingInfo(),e=i.boundingBox.center,s=i.boundingBox.extendSize.scale(2);return new _(e,n._f.Identity(),s,t.getScene())}}class p extends o{constructor(t,i){super({type:s.Bq.CONVEX_HULL,parameters:{mesh:t}},i)}}class l extends o{constructor(t,i){super({type:s.Bq.MESH,parameters:{mesh:t}},i)}}class c extends o{constructor(t){super({type:s.Bq.CONTAINER,parameters:{}},t)}}}}]);
//# sourceMappingURL=460.babylonBundle.js.map