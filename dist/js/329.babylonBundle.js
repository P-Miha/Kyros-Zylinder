"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[329,974,384],{4404:(t,e,s)=>{s.d(e,{a:()=>l});var n=s(4651),r=s(7959),i=s(3632),a=s(6409),o=s(5702);class l{constructor(){this.solidPattern=/solid (\S*)([\S\s]*?)endsolid[ ]*(\S*)/g,this.facetsPattern=/facet([\s\S]*?)endfacet/g,this.normalPattern=/normal[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.vertexPattern=/vertex[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.name="stl",this.extensions={".stl":{isBinary:!0}}}importMesh(t,e,s,r,a){let o;if("string"!=typeof s){if(this._isBinary(s)){const t=new i.Kj("stlmesh",e);return this._parseBinary(t,s),a&&a.push(t),!0}const t=new Uint8Array(s);let n="";for(let e=0;e<s.byteLength;e++)n+=String.fromCharCode(t[e]);s=n}for(;o=this.solidPattern.exec(s);){let s=o[1];const r=o[3];if(r&&s!=r)return n.w1.Error("Error in STL, solid name != endsolid name"),!1;if(t&&s)if(t instanceof Array){if(!t.indexOf(s))continue}else if(s!==t)continue;s=s||"stlmesh";const l=new i.Kj(s,e);this._parseASCII(l,o[2]),a&&a.push(l)}return!0}load(t,e,s){return this.importMesh(null,t,e,s,null)}loadAssetContainer(t,e,s){const n=new o.TJ(t);return t._blockEntityCollection=!0,this.importMesh(null,t,e,s,n.meshes),t._blockEntityCollection=!1,n}_isBinary(t){const e=new DataView(t);if(e.byteLength<=80)return!1;if(84+50*e.getUint32(80,!0)===e.byteLength)return!0;const s=[115,111,108,105,100];for(let t=0;t<5;t++)if(e.getUint8(t)!==s[t])return!0;return!1}_parseBinary(t,e){const s=new DataView(e),n=s.getUint32(80,!0);let i=0;const a=new Float32Array(3*n*3),o=new Float32Array(3*n*3),c=new Uint32Array(3*n);let u=0;for(let t=0;t<n;t++){const e=84+50*t,n=s.getFloat32(e,!0),r=s.getFloat32(e+4,!0),h=s.getFloat32(e+8,!0);for(let t=1;t<=3;t++){const c=e+12*t;a[i]=s.getFloat32(c,!0),o[i]=n,l.DO_NOT_ALTER_FILE_COORDINATES?(a[i+1]=s.getFloat32(c+4,!0),a[i+2]=s.getFloat32(c+8,!0),o[i+1]=r,o[i+2]=h):(a[i+2]=s.getFloat32(c+4,!0),a[i+1]=s.getFloat32(c+8,!0),o[i+2]=r,o[i+1]=h),i+=3}l.DO_NOT_ALTER_FILE_COORDINATES?(c[u]=u,c[u+1]=u+2,c[u+2]=u+1,u+=3):(c[u]=u++,c[u]=u++,c[u]=u++)}t.setVerticesData(r.o.PositionKind,a),t.setVerticesData(r.o.NormalKind,o),t.setIndices(c),t.computeWorldMatrix(!0)}_parseASCII(t,e){const s=[],n=[],i=[];let a,o=0;for(;a=this.facetsPattern.exec(e);){const t=a[1],e=this.normalPattern.exec(t);if(this.normalPattern.lastIndex=0,!e)continue;const r=[Number(e[1]),Number(e[5]),Number(e[3])];let c;for(;c=this.vertexPattern.exec(t);)l.DO_NOT_ALTER_FILE_COORDINATES?(s.push(Number(c[1]),Number(c[3]),Number(c[5])),n.push(r[0],r[2],r[1])):(s.push(Number(c[1]),Number(c[5]),Number(c[3])),n.push(r[0],r[1],r[2]));l.DO_NOT_ALTER_FILE_COORDINATES?(i.push(o,o+2,o+1),o+=3):i.push(o++,o++,o++),this.vertexPattern.lastIndex=0}this.facetsPattern.lastIndex=0,t.setVerticesData(r.o.PositionKind,s),t.setVerticesData(r.o.NormalKind,n),t.setIndices(i),t.computeWorldMatrix(!0)}}l.DO_NOT_ALTER_FILE_COORDINATES=!1,a.n&&a.n.RegisterPlugin(new l)}}]);
//# sourceMappingURL=329.babylonBundle.js.map