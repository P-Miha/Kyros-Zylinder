"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[522],{68522:(s,i,t)=>{var e=t(59288),o=t(64673),r=t(84686),h=t(8714),n=t(93463),p=t(98560);h.x.prototype.getPhysicsEngine=function(){return this._physicsEngine},h.x.prototype.enablePhysics=function(s=null,i){if(this._physicsEngine)return!0;let t=this._getComponent(r.l.NAME_PHYSICSENGINE);t||(t=new c(this),this._addComponent(t));try{if(i&&1!==(null==i?void 0:i.getPluginVersion())){if(2!==(null==i?void 0:i.getPluginVersion()))throw new Error("Unsupported Physics plugin version.");this._physicsEngine=new p.T(s,i)}else this._physicsEngine=new n.T(s,i);return this._physicsTimeAccumulator=0,!0}catch(s){return e.Y.Error(s.message),!1}},h.x.prototype.disablePhysicsEngine=function(){this._physicsEngine&&(this._physicsEngine.dispose(),this._physicsEngine=null)},h.x.prototype.isPhysicsEnabled=function(){return void 0!==this._physicsEngine},h.x.prototype.deleteCompoundImpostor=function(s){const i=s.parts[0].mesh;i.physicsImpostor&&(i.physicsImpostor.dispose(),i.physicsImpostor=null)},h.x.prototype._advancePhysicsEngineStep=function(s){if(this._physicsEngine){const i=this._physicsEngine.getSubTimeStep();if(i>0)for(this._physicsTimeAccumulator+=s;this._physicsTimeAccumulator>i;)this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(i/1e3),this.onAfterPhysicsObservable.notifyObservers(this),this._physicsTimeAccumulator-=i;else this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(s/1e3),this.onAfterPhysicsObservable.notifyObservers(this)}};class c{constructor(s){this.name=r.l.NAME_PHYSICSENGINE,this.scene=s,this.scene.onBeforePhysicsObservable=new o.y$,this.scene.onAfterPhysicsObservable=new o.y$,this.scene.getDeterministicFrameTime=()=>this.scene._physicsEngine?1e3*this.scene._physicsEngine.getTimeStep():1e3/60}register(){}rebuild(){}dispose(){this.scene.onBeforePhysicsObservable.clear(),this.scene.onAfterPhysicsObservable.clear(),this.scene._physicsEngine&&this.scene.disablePhysicsEngine()}}t(92289);var y=t(44482);Object.defineProperty(y.Y.prototype,"physicsBody",{get:function(){return this._physicsBody},set:function(s){this._physicsBody!==s&&(this._disposePhysicsObserver&&this.onDisposeObservable.remove(this._disposePhysicsObserver),this._physicsBody=s,s&&(this._disposePhysicsObserver=this.onDisposeObservable.add((()=>{this.physicsBody&&(this.physicsBody.dispose(),this.physicsBody=null)}))))},enumerable:!0,configurable:!0}),y.Y.prototype.getPhysicsBody=function(){return this.physicsBody},y.Y.prototype.applyImpulse=function(s,i){if(!this.physicsBody)throw new Error("No Physics Body for TransformNode");return this.physicsBody.applyImpulse(s,i),this}},85388:(s,i,t)=>{t.d(i,{d:()=>o});var e=t(90972);class o{constructor(){this._hasHit=!1,this._hitDistance=0,this._hitNormalWorld=e.P.Zero(),this._hitPointWorld=e.P.Zero(),this._rayFromWorld=e.P.Zero(),this._rayToWorld=e.P.Zero(),this._triangleIndex=-1}get hasHit(){return this._hasHit}get hitDistance(){return this._hitDistance}get hitNormalWorld(){return this._hitNormalWorld}get hitPointWorld(){return this._hitPointWorld}get rayFromWorld(){return this._rayFromWorld}get rayToWorld(){return this._rayToWorld}get triangleIndex(){return this._triangleIndex}setHitData(s,i,t){this._hasHit=!0,this._hitNormalWorld.set(s.x,s.y,s.z),this._hitPointWorld.set(i.x,i.y,i.z),this._triangleIndex=null!=t?t:-1}setHitDistance(s){this._hitDistance=s}calculateHitDistance(){this._hitDistance=e.P.Distance(this._rayFromWorld,this._hitPointWorld)}reset(s=e.P.Zero(),i=e.P.Zero()){this._rayFromWorld.copyFrom(s),this._rayToWorld.copyFrom(i),this._hasHit=!1,this._hitDistance=0,this._hitNormalWorld.setAll(0),this._hitPointWorld.setAll(0),this._triangleIndex=-1,this.body=void 0,this.bodyIndex=void 0}}},93463:(s,i,t)=>{t.d(i,{T:()=>r});var e=t(90972),o=t(49938);class r{getPluginVersion(){return this._physicsPlugin.getPluginVersion()}static DefaultPluginFactory(){throw(0,o.S)("CannonJSPlugin")}constructor(s,i=r.DefaultPluginFactory()){if(this._physicsPlugin=i,this._impostors=[],this._joints=[],this._subTimeStep=0,this._uniqueIdCounter=0,!this._physicsPlugin.isSupported())throw new Error("Physics Engine "+this._physicsPlugin.name+" cannot be found. Please make sure it is included.");s=s||new e.P(0,-9.807,0),this.setGravity(s),this.setTimeStep()}setGravity(s){this.gravity=s,this._physicsPlugin.setGravity(this.gravity)}setTimeStep(s=1/60){this._physicsPlugin.setTimeStep(s)}getTimeStep(){return this._physicsPlugin.getTimeStep()}setSubTimeStep(s=0){this._subTimeStep=s}getSubTimeStep(){return this._subTimeStep}dispose(){this._impostors.forEach((function(s){s.dispose()})),this._physicsPlugin.dispose()}getPhysicsPluginName(){return this._physicsPlugin.name}addImpostor(s){this._impostors.push(s),s.uniqueId=this._uniqueIdCounter++,s.parent||this._physicsPlugin.generatePhysicsBody(s)}removeImpostor(s){const i=this._impostors.indexOf(s);i>-1&&this._impostors.splice(i,1).length&&this.getPhysicsPlugin().removePhysicsBody(s)}addJoint(s,i,t){const e={mainImpostor:s,connectedImpostor:i,joint:t};t.physicsPlugin=this._physicsPlugin,this._joints.push(e),this._physicsPlugin.generateJoint(e)}removeJoint(s,i,t){const e=this._joints.filter((function(e){return e.connectedImpostor===i&&e.joint===t&&e.mainImpostor===s}));e.length&&this._physicsPlugin.removeJoint(e[0])}_step(s){this._impostors.forEach((s=>{s.isBodyInitRequired()&&this._physicsPlugin.generatePhysicsBody(s)})),s>.1?s=.1:s<=0&&(s=1/60),this._physicsPlugin.executeStep(s,this._impostors)}getPhysicsPlugin(){return this._physicsPlugin}getImpostors(){return this._impostors}getImpostorForPhysicsObject(s){for(let i=0;i<this._impostors.length;++i)if(this._impostors[i].object===s)return this._impostors[i];return null}getImpostorWithPhysicsBody(s){for(let i=0;i<this._impostors.length;++i)if(this._impostors[i].physicsBody===s)return this._impostors[i];return null}raycast(s,i){return this._physicsPlugin.raycast(s,i)}raycastToRef(s,i,t){return this._physicsPlugin.raycastToRef(s,i,t)}}},92289:(s,i,t)=>{var e=t(87257),o=t(17582);Object.defineProperty(e.x.prototype,"physicsImpostor",{get:function(){return this._physicsImpostor},set:function(s){this._physicsImpostor!==s&&(this._disposePhysicsObserver&&this.onDisposeObservable.remove(this._disposePhysicsObserver),this._physicsImpostor=s,s&&(this._disposePhysicsObserver=this.onDisposeObservable.add((()=>{this.physicsImpostor&&(this.physicsImpostor.dispose(),this.physicsImpostor=null)}))))},enumerable:!0,configurable:!0}),e.x.prototype.getPhysicsImpostor=function(){return this.physicsImpostor},e.x.prototype.applyImpulse=function(s,i){return this.physicsImpostor?(this.physicsImpostor.applyImpulse(s,i),this):this},e.x.prototype.setPhysicsLinkWith=function(s,i,t,e){return this.physicsImpostor&&s.physicsImpostor?(this.physicsImpostor.createJoint(s.physicsImpostor,o.q7.HingeJoint,{mainPivot:i,connectedPivot:t,nativeParams:e}),this):this}},98560:(s,i,t)=>{t.d(i,{T:()=>h});var e=t(90972),o=t(85388),r=t(49938);class h{getPluginVersion(){return this._physicsPlugin.getPluginVersion()}static DefaultPluginFactory(){throw(0,r.S)("")}constructor(s,i=h.DefaultPluginFactory()){this._physicsPlugin=i,this._physicsBodies=[],this._subTimeStep=0,s=s||new e.P(0,-9.807,0),this.setGravity(s),this.setTimeStep()}setGravity(s){this.gravity=s,this._physicsPlugin.setGravity(this.gravity)}setTimeStep(s=1/60){this._physicsPlugin.setTimeStep(s)}getTimeStep(){return this._physicsPlugin.getTimeStep()}setSubTimeStep(s=0){this._subTimeStep=s}getSubTimeStep(){return this._subTimeStep}dispose(){this._physicsPlugin.dispose()}getPhysicsPluginName(){return this._physicsPlugin.name}_step(s){s>.1?s=.1:s<=0&&(s=1/60),this._physicsPlugin.executeStep(s,this._physicsBodies)}addBody(s){this._physicsBodies.push(s)}removeBody(s){const i=this._physicsBodies.indexOf(s);i>-1&&this._physicsBodies.splice(i,1)}getBodies(){return this._physicsBodies}getPhysicsPlugin(){return this._physicsPlugin}raycastToRef(s,i,t,e){this._physicsPlugin.raycast(s,i,t,e)}raycast(s,i,t){const e=new o.d;return this._physicsPlugin.raycast(s,i,e,t),e}}}}]);
//# sourceMappingURL=522.babylonBundle.js.map