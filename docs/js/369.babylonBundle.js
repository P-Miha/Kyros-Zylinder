"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[369],{6521:(e,t,s)=>{s.d(t,{z:()=>l});var i=s(2085),n=s(972),o=s(3743),r=s(6825),a=s(4147),c=s(5593),h=s(78);class l{constructor(e,t,s=Number.MAX_VALUE){this.origin=e,this.direction=t,this.length=s}clone(){return new l(this.origin.clone(),this.direction.clone(),this.length)}intersectsBoxMinMax(e,t,s=0){const i=l._TmpVector3[0].copyFromFloats(e.x-s,e.y-s,e.z-s),n=l._TmpVector3[1].copyFromFloats(t.x+s,t.y+s,t.z+s);let o,r,a,c,h=0,u=Number.MAX_VALUE;if(Math.abs(this.direction.x)<1e-7){if(this.origin.x<i.x||this.origin.x>n.x)return!1}else if(o=1/this.direction.x,r=(i.x-this.origin.x)*o,a=(n.x-this.origin.x)*o,a===-1/0&&(a=1/0),r>a&&(c=r,r=a,a=c),h=Math.max(r,h),u=Math.min(a,u),h>u)return!1;if(Math.abs(this.direction.y)<1e-7){if(this.origin.y<i.y||this.origin.y>n.y)return!1}else if(o=1/this.direction.y,r=(i.y-this.origin.y)*o,a=(n.y-this.origin.y)*o,a===-1/0&&(a=1/0),r>a&&(c=r,r=a,a=c),h=Math.max(r,h),u=Math.min(a,u),h>u)return!1;if(Math.abs(this.direction.z)<1e-7){if(this.origin.z<i.z||this.origin.z>n.z)return!1}else if(o=1/this.direction.z,r=(i.z-this.origin.z)*o,a=(n.z-this.origin.z)*o,a===-1/0&&(a=1/0),r>a&&(c=r,r=a,a=c),h=Math.max(r,h),u=Math.min(a,u),h>u)return!1;return!0}intersectsBox(e,t=0){return this.intersectsBoxMinMax(e.minimum,e.maximum,t)}intersectsSphere(e,t=0){const s=e.center.x-this.origin.x,i=e.center.y-this.origin.y,n=e.center.z-this.origin.z,o=s*s+i*i+n*n,r=e.radius+t,a=r*r;if(o<=a)return!0;const c=s*this.direction.x+i*this.direction.y+n*this.direction.z;return!(c<0)&&o-c*c<=a}intersectsTriangle(e,t,s){const i=l._TmpVector3[0],o=l._TmpVector3[1],a=l._TmpVector3[2],c=l._TmpVector3[3],h=l._TmpVector3[4];t.subtractToRef(e,i),s.subtractToRef(e,o),n.P.CrossToRef(this.direction,o,a);const u=n.P.Dot(i,a);if(0===u)return null;const d=1/u;this.origin.subtractToRef(e,c);const p=n.P.Dot(c,a)*d;if(p<0||p>1)return null;n.P.CrossToRef(c,i,h);const g=n.P.Dot(this.direction,h)*d;if(g<0||p+g>1)return null;const x=n.P.Dot(o,h)*d;return x>this.length?null:new r.c(1-p-g,p,x)}intersectsPlane(e){let t;const s=n.P.Dot(e.normal,this.direction);if(Math.abs(s)<9.99999997475243e-7)return null;{const i=n.P.Dot(e.normal,this.origin);return t=(-e.d-i)/s,t<0?t<-9.99999997475243e-7?null:0:t}}intersectsAxis(e,t=0){switch(e){case"y":{const e=(this.origin.y-t)/this.direction.y;return e>0?null:new n.P(this.origin.x+this.direction.x*-e,t,this.origin.z+this.direction.z*-e)}case"x":{const e=(this.origin.x-t)/this.direction.x;return e>0?null:new n.P(t,this.origin.y+this.direction.y*-e,this.origin.z+this.direction.z*-e)}case"z":{const e=(this.origin.z-t)/this.direction.z;return e>0?null:new n.P(this.origin.x+this.direction.x*-e,this.origin.y+this.direction.y*-e,t)}default:return null}}intersectsMesh(e,t){const s=n.jp.Matrix[0];return e.getWorldMatrix().invertToRef(s),this._tmpRay?l.TransformToRef(this,s,this._tmpRay):this._tmpRay=l.Transform(this,s),e.intersects(this._tmpRay,t)}intersectsMeshes(e,t,s){s?s.length=0:s=[];for(let i=0;i<e.length;i++){const n=this.intersectsMesh(e[i],t);n.hit&&s.push(n)}return s.sort(this._comparePickingInfo),s}_comparePickingInfo(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0}intersectionSegment(e,t,s){const i=this.origin,o=n.jp.Vector3[0],r=n.jp.Vector3[1],a=n.jp.Vector3[2],c=n.jp.Vector3[3];t.subtractToRef(e,o),this.direction.scaleToRef(l._Rayl,a),i.addToRef(a,r),e.subtractToRef(i,c);const h=n.P.Dot(o,o),u=n.P.Dot(o,a),d=n.P.Dot(a,a),p=n.P.Dot(o,c),g=n.P.Dot(a,c),x=h*d-u*u;let m,f,y=x,T=x;x<l._Smallnum?(m=0,y=1,f=g,T=d):(m=u*g-d*p,f=h*g-u*p,m<0?(m=0,f=g,T=d):m>y&&(m=y,f=g+u,T=d)),f<0?(f=0,-p<0?m=0:-p>h?m=y:(m=-p,y=h)):f>T&&(f=T,-p+u<0?m=0:-p+u>h?m=y:(m=-p+u,y=h));const _=Math.abs(m)<l._Smallnum?0:m/y,v=Math.abs(f)<l._Smallnum?0:f/T,P=n.jp.Vector3[4];a.scaleToRef(v,P);const O=n.jp.Vector3[5];o.scaleToRef(_,O),O.addInPlace(c);const A=n.jp.Vector3[6];return O.subtractToRef(P,A),v>0&&v<=this.length&&A.lengthSquared()<s*s?O.length():-1}update(e,t,s,i,o,r,a,c=!1){if(c){l._RayDistant||(l._RayDistant=l.Zero()),l._RayDistant.unprojectRayToRef(e,t,s,i,n.y3.IdentityReadOnly,r,a);const c=n.jp.Matrix[0];o.invertToRef(c),l.TransformToRef(l._RayDistant,c,this)}else this.unprojectRayToRef(e,t,s,i,o,r,a);return this}static Zero(){return new l(n.P.Zero(),n.P.Zero())}static CreateNew(e,t,s,i,n,o,r){return l.Zero().update(e,t,s,i,n,o,r)}static CreateNewFromTo(e,t,s=n.y3.IdentityReadOnly){const i=t.subtract(e),o=Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z);return i.normalize(),l.Transform(new l(e,i,o),s)}static Transform(e,t){const s=new l(new n.P(0,0,0),new n.P(0,0,0));return l.TransformToRef(e,t,s),s}static TransformToRef(e,t,s){n.P.TransformCoordinatesToRef(e.origin,t,s.origin),n.P.TransformNormalToRef(e.direction,t,s.direction),s.length=e.length;const i=s.direction,o=i.length();if(0!==o&&1!==o){const e=1/o;i.x*=e,i.y*=e,i.z*=e,s.length*=o}}unprojectRayToRef(e,t,s,i,o,r,a){var c;const l=n.jp.Matrix[0];o.multiplyToRef(r,l),l.multiplyToRef(a,l),l.invert();const u=n.jp.Vector3[0];u.x=e/s*2-1,u.y=-(t/i*2-1),u.z=(null===(c=h.l.LastCreatedEngine)||void 0===c?void 0:c.isNDCHalfZRange)?0:-1;const d=n.jp.Vector3[1].copyFromFloats(u.x,u.y,1-1e-8),p=n.jp.Vector3[2],g=n.jp.Vector3[3];n.P._UnprojectFromInvertedMatrixToRef(u,l,p),n.P._UnprojectFromInvertedMatrixToRef(d,l,g),this.origin.copyFrom(p),g.subtractToRef(p,this.direction),this.direction.normalize()}}l._TmpVector3=i.B.BuildArray(6,n.P.Zero),l._RayDistant=l.Zero(),l._Smallnum=1e-8,l._Rayl=1e9,a.x.prototype.createPickingRay=function(e,t,s,i,n=!1){const o=l.Zero();return this.createPickingRayToRef(e,t,s,o,i,n),o},a.x.prototype.createPickingRayToRef=function(e,t,s,i,o,r=!1,a=!1){const c=this.getEngine();if(!o){if(!this.activeCamera)return this;o=this.activeCamera}const h=o.viewport.toGlobal(c.getRenderWidth(),c.getRenderHeight());return e=e/c.getHardwareScalingLevel()-h.x,t=t/c.getHardwareScalingLevel()-(c.getRenderHeight()-h.y-h.height),i.update(e,t,h.width,h.height,s||n.y3.IdentityReadOnly,r?n.y3.IdentityReadOnly:o.getViewMatrix(),o.getProjectionMatrix(),a),this},a.x.prototype.createPickingRayInCameraSpace=function(e,t,s){const i=l.Zero();return this.createPickingRayInCameraSpaceToRef(e,t,i,s),i},a.x.prototype.createPickingRayInCameraSpaceToRef=function(e,t,s,i){if(!o.p)return this;const r=this.getEngine();if(!i){if(!this.activeCamera)throw new Error("Active camera not set");i=this.activeCamera}const a=i.viewport.toGlobal(r.getRenderWidth(),r.getRenderHeight()),c=n.y3.Identity();return e=e/r.getHardwareScalingLevel()-a.x,t=t/r.getHardwareScalingLevel()-(r.getRenderHeight()-a.y-a.height),s.update(e,t,a.width,a.height,c,c,i.getProjectionMatrix()),this},a.x.prototype._internalPickForMesh=function(e,t,s,i,n,o,r,a){const c=t(i,s.enableDistantPicking),h=s.intersects(c,n,r,o,i,a);return h&&h.hit?!n&&null!=e&&h.distance>=e.distance?null:h:null},a.x.prototype._internalPick=function(e,t,s,i,r){let a=null;const c=!!(this.activeCameras&&this.activeCameras.length>1&&this.cameraToUseForPointers!==this.activeCamera),h=this.cameraToUseForPointers||this.activeCamera;for(let o=0;o<this.meshes.length;o++){const l=this.meshes[o];if(t){if(!t(l))continue}else if(!l.isEnabled()||!l.isVisible||!l.isPickable)continue;const u=c&&l.isWorldMatrixCameraDependent(),d=l.computeWorldMatrix(u,h);if(l.hasThinInstances&&l.thinInstanceEnablePicking){const t=this._internalPickForMesh(a,e,l,d,!0,!0,r);if(t){if(i)return t;const o=n.jp.Matrix[1],c=l.thinInstanceGetWorldMatrices();for(let t=0;t<c.length;t++){c[t].multiplyToRef(d,o);const n=this._internalPickForMesh(a,e,l,o,s,i,r,!0);if(n&&(a=n,a.thinInstanceIndex=t,s))return a}}}else{const t=this._internalPickForMesh(a,e,l,d,s,i,r);if(t&&(a=t,s))return a}}return a||new o.p},a.x.prototype._internalMultiPick=function(e,t,s){if(!o.p)return null;const i=new Array,r=!!(this.activeCameras&&this.activeCameras.length>1&&this.cameraToUseForPointers!==this.activeCamera),a=this.cameraToUseForPointers||this.activeCamera;for(let o=0;o<this.meshes.length;o++){const c=this.meshes[o];if(t){if(!t(c))continue}else if(!c.isEnabled()||!c.isVisible||!c.isPickable)continue;const h=r&&c.isWorldMatrixCameraDependent(),l=c.computeWorldMatrix(h,a);if(c.hasThinInstances&&c.thinInstanceEnablePicking){if(this._internalPickForMesh(null,e,c,l,!0,!0,s)){const t=n.jp.Matrix[1],o=c.thinInstanceGetWorldMatrices();for(let n=0;n<o.length;n++){o[n].multiplyToRef(l,t);const r=this._internalPickForMesh(null,e,c,t,!1,!1,s,!0);r&&(r.thinInstanceIndex=n,i.push(r))}}}else{const t=this._internalPickForMesh(null,e,c,l,!1,!1,s);t&&i.push(t)}}return i},a.x.prototype.pickWithBoundingInfo=function(e,t,s,i,r){if(!o.p)return null;const a=this._internalPick((s=>(this._tempPickingRay||(this._tempPickingRay=l.Zero()),this.createPickingRayToRef(e,t,s,this._tempPickingRay,r||null),this._tempPickingRay)),s,i,!0);return a&&(a.ray=this.createPickingRay(e,t,n.y3.Identity(),r||null)),a},Object.defineProperty(a.x.prototype,"_pickingAvailable",{get:()=>!0,enumerable:!1,configurable:!1}),a.x.prototype.pick=function(e,t,s,i,o,r,a=!1){const c=this._internalPick(((s,i)=>(this._tempPickingRay||(this._tempPickingRay=l.Zero()),this.createPickingRayToRef(e,t,s,this._tempPickingRay,o||null,!1,i),this._tempPickingRay)),s,i,!1,r);return c&&(c.ray=this.createPickingRay(e,t,n.y3.Identity(),o||null)),c},a.x.prototype.pickWithRay=function(e,t,s,i){const o=this._internalPick((t=>(this._pickWithRayInverseMatrix||(this._pickWithRayInverseMatrix=n.y3.Identity()),t.invertToRef(this._pickWithRayInverseMatrix),this._cachedRayForTransform||(this._cachedRayForTransform=l.Zero()),l.TransformToRef(e,this._pickWithRayInverseMatrix,this._cachedRayForTransform),this._cachedRayForTransform)),t,s,!1,i);return o&&(o.ray=e),o},a.x.prototype.multiPick=function(e,t,s,i,n){return this._internalMultiPick((s=>this.createPickingRay(e,t,s,i||null)),s,n)},a.x.prototype.multiPickWithRay=function(e,t,s){return this._internalMultiPick((t=>(this._pickWithRayInverseMatrix||(this._pickWithRayInverseMatrix=n.y3.Identity()),t.invertToRef(this._pickWithRayInverseMatrix),this._cachedRayForTransform||(this._cachedRayForTransform=l.Zero()),l.TransformToRef(e,this._pickWithRayInverseMatrix,this._cachedRayForTransform),this._cachedRayForTransform)),t,s)},c.V.prototype.getForwardRay=function(e=100,t,s){return this.getForwardRayToRef(new l(n.P.Zero(),n.P.Zero(),e),e,t,s)},c.V.prototype.getForwardRayToRef=function(e,t=100,s,i){return s||(s=this.getWorldMatrix()),e.length=t,i?e.origin.copyFrom(i):e.origin.copyFrom(this.position),n.jp.Vector3[2].set(0,0,this._scene.useRightHandedSystem?-1:1),n.P.TransformNormalToRef(n.jp.Vector3[2],s,n.jp.Vector3[3]),n.P.NormalizeToRef(n.jp.Vector3[3],e.direction),e}},7966:(e,t,s)=>{s.d(t,{KY:()=>h,VF:()=>a,iz:()=>c});var i=s(4517),n=s(972),o=s(3632),r=s(3027);function a(e={subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6}){const t=Math.max(e.subdivisions?e.subdivisions:2,1),s=Math.max(e.tessellation?e.tessellation:16,3),o=Math.max(e.height?e.height:1,0),a=Math.max(e.radius?e.radius:.25,0),c=Math.max(e.capSubdivisions?e.capSubdivisions:6,1),h=s,l=t,u=Math.max(e.radiusTop?e.radiusTop:a,0),d=Math.max(e.radiusBottom?e.radiusBottom:a,0),p=o-(u+d),g=2*Math.PI,x=Math.max(e.topCapSubdivisions?e.topCapSubdivisions:c,1),m=Math.max(e.bottomCapSubdivisions?e.bottomCapSubdivisions:c,1),f=Math.acos((d-u)/o);let y=[];const T=[],_=[],v=[];let P=0;const O=[],A=.5*p,b=.5*Math.PI;let w,R;const I=n.P.Zero(),M=n.P.Zero(),C=Math.cos(f),F=Math.sin(f),D=new n.FM(u*F,A+u*C).subtract(new n.FM(d*F,d*C-A)).length(),z=u*f+D+d*(b-f);let E=0;for(R=0;R<=x;R++){const e=[],t=b-f*(R/x);E+=u*f/x;const s=Math.cos(t),i=Math.sin(t),n=s*u;for(w=0;w<=h;w++){const t=w/h,o=t*g+0,a=Math.sin(o),c=Math.cos(o);M.x=n*a,M.y=A+i*u,M.z=n*c,T.push(M.x,M.y,M.z),I.set(s*a,i,s*c),_.push(I.x,I.y,I.z),v.push(t,r.e.UseOpenGLOrientationForUV?E/z:1-E/z),e.push(P),P++}O.push(e)}const V=o-u-d+C*u-C*d,j=F*(d-u)/V;for(R=1;R<=l;R++){const e=[];E+=D/l;const t=F*(R*(d-u)/l+u);for(w=0;w<=h;w++){const s=w/h,i=s*g+0,n=Math.sin(i),o=Math.cos(i);M.x=t*n,M.y=A+C*u-R*V/l,M.z=t*o,T.push(M.x,M.y,M.z),I.set(n,j,o).normalize(),_.push(I.x,I.y,I.z),v.push(s,r.e.UseOpenGLOrientationForUV?E/z:1-E/z),e.push(P),P++}O.push(e)}for(R=1;R<=m;R++){const e=[],t=b-f-(Math.PI-f)*(R/m);E+=d*f/m;const s=Math.cos(t),i=Math.sin(t),n=s*d;for(w=0;w<=h;w++){const t=w/h,o=t*g+0,a=Math.sin(o),c=Math.cos(o);M.x=n*a,M.y=i*d-A,M.z=n*c,T.push(M.x,M.y,M.z),I.set(s*a,i,s*c),_.push(I.x,I.y,I.z),v.push(t,r.e.UseOpenGLOrientationForUV?E/z:1-E/z),e.push(P),P++}O.push(e)}for(w=0;w<h;w++)for(R=0;R<x+l+m;R++){const e=O[R][w],t=O[R+1][w],s=O[R+1][w+1],i=O[R][w+1];y.push(e),y.push(t),y.push(i),y.push(t),y.push(s),y.push(i)}if(y=y.reverse(),e.orientation&&!e.orientation.equals(n.P.Up())){const t=new n.y3;e.orientation.clone().scale(.5*Math.PI).cross(n.P.Up()).toQuaternion().toRotationMatrix(t);const s=n.P.Zero();for(let e=0;e<T.length;e+=3)s.set(T[e],T[e+1],T[e+2]),n.P.TransformCoordinatesToRef(s.clone(),t,s),T[e]=s.x,T[e+1]=s.y,T[e+2]=s.z}const S=new i.x;return S.positions=T,S.normals=_,S.uvs=v,S.indices=y,S}function c(e,t={orientation:n.P.Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6,updatable:!1},s=null){const i=new o.Kj(e,s);return a(t).applyToMesh(i,t.updatable),i}const h={CreateCapsule:c};o.Kj.CreateCapsule=(e,t,s)=>c(e,t,s),i.x.CreateCapsule=a},6565:(e,t,s)=>{s.d(t,{H6:()=>d,wf:()=>u,zD:()=>l});var i=s(972),n=s(9859),o=s(3632),r=s(4517),a=s(4147),c=s(730),h=s(3027);function l(e){const t=e.height||2;let s=0===e.diameterTop?0:e.diameterTop||e.diameter||1,a=0===e.diameterBottom?0:e.diameterBottom||e.diameter||1;s=s||1e-5,a=a||1e-5;const l=e.tessellation||24,u=e.subdivisions||1,d=!!e.hasRings,p=!!e.enclose,g=0===e.cap?0:e.cap||o.Kj.CAP_ALL,x=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,m=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE,f=e.faceUV||new Array(3),y=e.faceColors,T=2+(1+(1!==x&&p?2:0))*(d?u:1);let _;for(_=0;_<T;_++)y&&void 0===y[_]&&(y[_]=new n.HE(1,1,1,1));for(_=0;_<T;_++)f&&void 0===f[_]&&(f[_]=new i.Lt(0,0,1,1));const v=new Array,P=new Array,O=new Array,A=new Array,b=new Array,w=2*Math.PI*x/l;let R,I,M;const C=(a-s)/2/t,F=i.P.Zero(),D=i.P.Zero(),z=i.P.Zero(),E=i.P.Zero(),V=i.P.Zero(),j=c.RD.Y;let S,L,K,B=1,U=1,W=0,k=0;for(S=0;S<=u;S++)for(I=S/u,M=(I*(s-a)+a)/2,B=d&&0!==S&&S!==u?2:1,K=0;K<B;K++){for(d&&(U+=K),p&&(U+=2*K),L=0;L<=l;L++)R=L*w,F.x=Math.cos(-R)*M,F.y=-t/2+I*t,F.z=Math.sin(-R)*M,0===s&&S===u?(D.x=O[O.length-3*(l+1)],D.y=O[O.length-3*(l+1)+1],D.z=O[O.length-3*(l+1)+2]):(D.x=F.x,D.z=F.z,D.y=Math.sqrt(D.x*D.x+D.z*D.z)*C,D.normalize()),0===L&&(z.copyFrom(F),E.copyFrom(D)),P.push(F.x,F.y,F.z),O.push(D.x,D.y,D.z),k=d?W!==U?f[U].y:f[U].w:f[U].y+(f[U].w-f[U].y)*I,A.push(f[U].x+(f[U].z-f[U].x)*L/l,h.e.UseOpenGLOrientationForUV?1-k:k),y&&b.push(y[U].r,y[U].g,y[U].b,y[U].a);1!==x&&p&&(P.push(F.x,F.y,F.z),P.push(0,F.y,0),P.push(0,F.y,0),P.push(z.x,z.y,z.z),i.P.CrossToRef(j,D,V),V.normalize(),O.push(V.x,V.y,V.z,V.x,V.y,V.z),i.P.CrossToRef(E,j,V),V.normalize(),O.push(V.x,V.y,V.z,V.x,V.y,V.z),k=d?W!==U?f[U+1].y:f[U+1].w:f[U+1].y+(f[U+1].w-f[U+1].y)*I,A.push(f[U+1].x,h.e.UseOpenGLOrientationForUV?1-k:k),A.push(f[U+1].z,h.e.UseOpenGLOrientationForUV?1-k:k),k=d?W!==U?f[U+2].y:f[U+2].w:f[U+2].y+(f[U+2].w-f[U+2].y)*I,A.push(f[U+2].x,h.e.UseOpenGLOrientationForUV?1-k:k),A.push(f[U+2].z,h.e.UseOpenGLOrientationForUV?1-k:k),y&&(b.push(y[U+1].r,y[U+1].g,y[U+1].b,y[U+1].a),b.push(y[U+1].r,y[U+1].g,y[U+1].b,y[U+1].a),b.push(y[U+2].r,y[U+2].g,y[U+2].b,y[U+2].a),b.push(y[U+2].r,y[U+2].g,y[U+2].b,y[U+2].a))),W!==U&&(W=U)}const N=1!==x&&p?l+4:l;for(S=0,U=0;U<u;U++){let e=0,t=0,s=0,i=0;for(L=0;L<l;L++)e=S*(N+1)+L,t=(S+1)*(N+1)+L,s=S*(N+1)+(L+1),i=(S+1)*(N+1)+(L+1),v.push(e,t,s),v.push(i,s,t);1!==x&&p&&(v.push(e+2,t+2,s+2),v.push(i+2,s+2,t+2),v.push(e+4,t+4,s+4),v.push(i+4,s+4,t+4)),S=d?S+2:S+1}const G=e=>{const n=e?s/2:a/2;if(0===n)return;let o,r,c;const u=e?f[T-1]:f[0];let d=null;y&&(d=e?y[T-1]:y[0]);const p=P.length/3,g=e?t/2:-t/2,m=new i.P(0,g,0);P.push(m.x,m.y,m.z),O.push(0,e?1:-1,0);const _=u.y+.5*(u.w-u.y);A.push(u.x+.5*(u.z-u.x),h.e.UseOpenGLOrientationForUV?1-_:_),d&&b.push(d.r,d.g,d.b,d.a);const w=new i.FM(.5,.5);for(c=0;c<=l;c++){o=2*Math.PI*c*x/l;const t=Math.cos(-o),s=Math.sin(-o);r=new i.P(t*n,g,s*n);const a=new i.FM(t*w.x+.5,s*w.y+.5);P.push(r.x,r.y,r.z),O.push(0,e?1:-1,0);const p=u.y+(u.w-u.y)*a.y;A.push(u.x+(u.z-u.x)*a.x,h.e.UseOpenGLOrientationForUV?1-p:p),d&&b.push(d.r,d.g,d.b,d.a)}for(c=0;c<l;c++)e?(v.push(p),v.push(p+(c+2)),v.push(p+(c+1))):(v.push(p),v.push(p+(c+1)),v.push(p+(c+2)))};g!==o.Kj.CAP_START&&g!==o.Kj.CAP_ALL||G(!1),g!==o.Kj.CAP_END&&g!==o.Kj.CAP_ALL||G(!0),r.x._ComputeSides(m,P,v,O,A,e.frontUVs,e.backUVs);const Z=new r.x;return Z.indices=v,Z.positions=P,Z.normals=O,Z.uvs=A,y&&(Z.colors=b),Z}function u(e,t={},s){const i=new o.Kj(e,s);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,l(t).applyToMesh(i,t.updatable),i}const d={CreateCylinder:u};r.x.CreateCylinder=l,o.Kj.CreateCylinder=(e,t,s,i,n,r,c,h,l)=>(void 0!==c&&c instanceof a.x||(void 0!==c&&(l=h||o.Kj.DEFAULTSIDE,h=c),c=r,r=1),u(e,{height:t,diameterTop:s,diameterBottom:i,tessellation:n,subdivisions:r,sideOrientation:l,updatable:h},c))},1724:(e,t,s)=>{s.d(t,{l:()=>f,t:()=>m});var i=s(972),n=s(1865),o=s(3632),r=s(7959),a=s(4517),c=s(3027);const h=new i.P(1,0,0),l=new i.P(-1,0,0),u=new i.P(0,1,0),d=new i.P(0,-1,0),p=new i.P(0,0,1),g=new i.P(0,0,-1);class x{constructor(e=i.P.Zero(),t=i.P.Up(),s=i.FM.Zero(),n=0,o=0,r=null,a=null,c=null,h=null){this.position=e,this.normal=t,this.uv=s,this.vertexIdx=n,this.vertexIdxForBones=o,this.localPositionOverride=r,this.localNormalOverride=a,this.matrixIndicesOverride=c,this.matrixWeightsOverride=h}clone(){var e,t,s,i;return new x(this.position.clone(),this.normal.clone(),this.uv.clone(),this.vertexIdx,this.vertexIdxForBones,null===(e=this.localPositionOverride)||void 0===e?void 0:e.slice(),null===(t=this.localNormalOverride)||void 0===t?void 0:t.slice(),null===(s=this.matrixIndicesOverride)||void 0===s?void 0:s.slice(),null===(i=this.matrixWeightsOverride)||void 0===i?void 0:i.slice())}}function m(e,t,s){var m,f,y,T;const _=!!t.skeleton,v=s.localMode||_,P=null!==t.overrideMaterialSideOrientation&&void 0!==t.overrideMaterialSideOrientation,O=t.getIndices(),A=_?t.getPositionData(!0,!0):t.getVerticesData(r.o.PositionKind),b=_?t.getNormalsData(!0,!0):t.getVerticesData(r.o.NormalKind),w=v?_?t.getVerticesData(r.o.PositionKind):A:null,R=v?_?t.getVerticesData(r.o.NormalKind):b:null,I=t.getVerticesData(r.o.UVKind),M=_?t.getVerticesData(r.o.MatricesIndicesKind):null,C=_?t.getVerticesData(r.o.MatricesWeightsKind):null,F=_?t.getVerticesData(r.o.MatricesIndicesExtraKind):null,D=_?t.getVerticesData(r.o.MatricesWeightsExtraKind):null,z=s.position||i.P.Zero();let E=s.normal||i.P.Up();const V=s.size||i.P.One(),j=s.angle||0;if(!E){const e=new i.P(0,0,1),s=t.getScene().activeCamera,n=i.P.TransformCoordinates(e,s.getWorldMatrix());E=s.globalPosition.subtract(n)}const S=-Math.atan2(E.z,E.x)-Math.PI/2,L=Math.sqrt(E.x*E.x+E.z*E.z),K=Math.atan2(E.y,L),B=new a.x;B.indices=[],B.positions=[],B.normals=[],B.uvs=[],B.matricesIndices=_?[]:null,B.matricesWeights=_?[]:null,B.matricesIndicesExtra=F?[]:null,B.matricesWeightsExtra=D?[]:null;let U=0;const W=(e,t)=>{const n=new x;if(!O||!A||!b)return n;const o=O[e];if(n.vertexIdx=3*o,n.vertexIdxForBones=4*o,n.position=new i.P(A[3*o],A[3*o+1],A[3*o+2]),i.P.TransformCoordinatesToRef(n.position,t,n.position),n.normal=new i.P(b[3*o],b[3*o+1],b[3*o+2]),i.P.TransformNormalToRef(n.normal,t,n.normal),s.captureUVS&&I){const e=I[2*o+1];n.uv=new i.FM(I[2*o],c.e.UseOpenGLOrientationForUV?1-e:e)}return n},k=[0,0,0,0],N=(e,t)=>{if(0===e.length)return e;const s=.5*Math.abs(i.P.Dot(V,t)),o=(e,t,s,i)=>{for(let n=0;n<i;++n)if(e[s+n]===t)return s+n;return-1},r=(e,r)=>{var a,c,h,l,u,d,p,g,m,f,y,T,_,v,P,O;const A=i.P.GetClipFactor(e.position,r.position,t,s);let b=k,I=k;if(M&&C){const t=e.matrixIndicesOverride?0:e.vertexIdxForBones,s=null!==(a=e.matrixIndicesOverride)&&void 0!==a?a:M,i=null!==(c=e.matrixWeightsOverride)&&void 0!==c?c:C,u=r.matrixIndicesOverride?0:r.vertexIdxForBones,d=null!==(h=r.matrixIndicesOverride)&&void 0!==h?h:M,p=null!==(l=r.matrixWeightsOverride)&&void 0!==l?l:C;b=[0,0,0,0],I=[0,0,0,0];let g=0;for(let e=0;e<4;++e)if(i[t+e]>0){const r=o(d,s[t+e],u,4);b[g]=s[t+e],I[g]=n.R.Lerp(i[t+e],r>=0?p[r]:0,A),g++}for(let e=0;e<4&&g<4;++e){const i=d[u+e];-1===o(s,i,t,4)&&(b[g]=i,I[g]=n.R.Lerp(0,p[u+e],A),g++)}const x=I[0]+I[1]+I[2]+I[3];I[0]/=x,I[1]/=x,I[2]/=x,I[3]/=x}const F=e.localPositionOverride?e.localPositionOverride[0]:null!==(u=null==w?void 0:w[e.vertexIdx])&&void 0!==u?u:0,D=e.localPositionOverride?e.localPositionOverride[1]:null!==(d=null==w?void 0:w[e.vertexIdx+1])&&void 0!==d?d:0,z=e.localPositionOverride?e.localPositionOverride[2]:null!==(p=null==w?void 0:w[e.vertexIdx+2])&&void 0!==p?p:0,E=r.localPositionOverride?r.localPositionOverride[0]:null!==(g=null==w?void 0:w[r.vertexIdx])&&void 0!==g?g:0,V=r.localPositionOverride?r.localPositionOverride[1]:null!==(m=null==w?void 0:w[r.vertexIdx+1])&&void 0!==m?m:0,j=r.localPositionOverride?r.localPositionOverride[2]:null!==(f=null==w?void 0:w[r.vertexIdx+2])&&void 0!==f?f:0,S=e.localNormalOverride?e.localNormalOverride[0]:null!==(y=null==R?void 0:R[e.vertexIdx])&&void 0!==y?y:0,L=e.localNormalOverride?e.localNormalOverride[1]:null!==(T=null==R?void 0:R[e.vertexIdx+1])&&void 0!==T?T:0,K=e.localNormalOverride?e.localNormalOverride[2]:null!==(_=null==R?void 0:R[e.vertexIdx+2])&&void 0!==_?_:0,B=S+((r.localNormalOverride?r.localNormalOverride[0]:null!==(v=null==R?void 0:R[r.vertexIdx])&&void 0!==v?v:0)-S)*A,U=L+((r.localNormalOverride?r.localNormalOverride[1]:null!==(P=null==R?void 0:R[r.vertexIdx+1])&&void 0!==P?P:0)-L)*A,W=K+((r.localNormalOverride?r.localNormalOverride[2]:null!==(O=null==R?void 0:R[r.vertexIdx+2])&&void 0!==O?O:0)-K)*A,N=Math.sqrt(B*B+U*U+W*W);return new x(i.P.Lerp(e.position,r.position,A),i.P.Lerp(e.normal,r.normal,A).normalize(),i.FM.Lerp(e.uv,r.uv,A),-1,-1,w?[F+(E-F)*A,D+(V-D)*A,z+(j-z)*A]:null,R?[B/N,U/N,W/N]:null,b,I)};let a=null;e.length>3&&(a=new Array);for(let n=0;n<e.length;n+=3){let o=0,c=null,h=null,l=null,u=null;const d=i.P.Dot(e[n].position,t)-s>0,p=i.P.Dot(e[n+1].position,t)-s>0,g=i.P.Dot(e[n+2].position,t)-s>0;switch(o=(d?1:0)+(p?1:0)+(g?1:0),o){case 0:e.length>3?(a.push(e[n]),a.push(e[n+1]),a.push(e[n+2])):a=e;break;case 1:if(a=null!=a?a:new Array,d&&(c=e[n+1],h=e[n+2],l=r(e[n],c),u=r(e[n],h)),p){c=e[n],h=e[n+2],l=r(e[n+1],c),u=r(e[n+1],h),a.push(l),a.push(h.clone()),a.push(c.clone()),a.push(h.clone()),a.push(l.clone()),a.push(u);break}g&&(c=e[n],h=e[n+1],l=r(e[n+2],c),u=r(e[n+2],h)),c&&h&&l&&u&&(a.push(c.clone()),a.push(h.clone()),a.push(l),a.push(u),a.push(l.clone()),a.push(h.clone()));break;case 2:a=null!=a?a:new Array,d||(c=e[n].clone(),h=r(c,e[n+1]),l=r(c,e[n+2]),a.push(c),a.push(h),a.push(l)),p||(c=e[n+1].clone(),h=r(c,e[n+2]),l=r(c,e[n]),a.push(c),a.push(h),a.push(l)),g||(c=e[n+2].clone(),h=r(c,e[n]),l=r(c,e[n+1]),a.push(c),a.push(h),a.push(l))}}return a},G=t,Z=G._thinInstanceDataStorage.matrixData,Y=G.thinInstanceCount||1,Q=i.jp.Matrix[0];Q.copyFrom(i.y3.IdentityReadOnly);for(let e=0;e<Y;++e){if(G.hasThinInstances&&Z){const t=16*e;Q.setRowFromFloats(0,Z[t+0],Z[t+1],Z[t+2],Z[t+3]),Q.setRowFromFloats(1,Z[t+4],Z[t+5],Z[t+6],Z[t+7]),Q.setRowFromFloats(2,Z[t+8],Z[t+9],Z[t+10],Z[t+11]),Q.setRowFromFloats(3,Z[t+12],Z[t+13],Z[t+14],Z[t+15])}const n=i.y3.RotationYawPitchRoll(S,K,j).multiply(i.y3.Translation(z.x,z.y,z.z)),o=i.y3.Invert(n),r=t.getWorldMatrix(),a=Q.multiply(r).multiply(o),x=new Array(3);for(let e=0;e<O.length;e+=3){let t=x;if(t[0]=W(e,a),P&&v?(t[1]=W(e+2,a),t[2]=W(e+1,a)):(t[1]=W(e+1,a),t[2]=W(e+2,a)),!(s.cullBackFaces&&-t[0].normal.z<=0&&-t[1].normal.z<=0&&-t[2].normal.z<=0)&&(t=N(t,h),t&&(t=N(t,l),t&&(t=N(t,u),t&&(t=N(t,d),t&&(t=N(t,p),t&&(t=N(t,g),t)))))))for(let e=0;e<t.length;e++){const i=t[e];if(B.indices.push(U),v?(i.localPositionOverride?(B.positions[3*U]=i.localPositionOverride[0],B.positions[3*U+1]=i.localPositionOverride[1],B.positions[3*U+2]=i.localPositionOverride[2]):w&&(B.positions[3*U]=w[i.vertexIdx],B.positions[3*U+1]=w[i.vertexIdx+1],B.positions[3*U+2]=w[i.vertexIdx+2]),i.localNormalOverride?(B.normals[3*U]=i.localNormalOverride[0],B.normals[3*U+1]=i.localNormalOverride[1],B.normals[3*U+2]=i.localNormalOverride[2]):R&&(B.normals[3*U]=R[i.vertexIdx],B.normals[3*U+1]=R[i.vertexIdx+1],B.normals[3*U+2]=R[i.vertexIdx+2])):(i.position.toArray(B.positions,3*U),i.normal.toArray(B.normals,3*U)),B.matricesIndices&&B.matricesWeights&&(i.matrixIndicesOverride?(B.matricesIndices[4*U]=i.matrixIndicesOverride[0],B.matricesIndices[4*U+1]=i.matrixIndicesOverride[1],B.matricesIndices[4*U+2]=i.matrixIndicesOverride[2],B.matricesIndices[4*U+3]=i.matrixIndicesOverride[3]):(M&&(B.matricesIndices[4*U]=M[i.vertexIdxForBones],B.matricesIndices[4*U+1]=M[i.vertexIdxForBones+1],B.matricesIndices[4*U+2]=M[i.vertexIdxForBones+2],B.matricesIndices[4*U+3]=M[i.vertexIdxForBones+3]),F&&B.matricesIndicesExtra&&(B.matricesIndicesExtra[4*U]=F[i.vertexIdxForBones],B.matricesIndicesExtra[4*U+1]=F[i.vertexIdxForBones+1],B.matricesIndicesExtra[4*U+2]=F[i.vertexIdxForBones+2],B.matricesIndicesExtra[4*U+3]=F[i.vertexIdxForBones+3])),i.matrixWeightsOverride?(B.matricesWeights[4*U]=i.matrixWeightsOverride[0],B.matricesWeights[4*U+1]=i.matrixWeightsOverride[1],B.matricesWeights[4*U+2]=i.matrixWeightsOverride[2],B.matricesWeights[4*U+3]=i.matrixWeightsOverride[3]):(C&&(B.matricesWeights[4*U]=C[i.vertexIdxForBones],B.matricesWeights[4*U+1]=C[i.vertexIdxForBones+1],B.matricesWeights[4*U+2]=C[i.vertexIdxForBones+2],B.matricesWeights[4*U+3]=C[i.vertexIdxForBones+3]),D&&B.matricesWeightsExtra&&(B.matricesWeightsExtra[4*U]=D[i.vertexIdxForBones],B.matricesWeightsExtra[4*U+1]=D[i.vertexIdxForBones+1],B.matricesWeightsExtra[4*U+2]=D[i.vertexIdxForBones+2],B.matricesWeightsExtra[4*U+3]=D[i.vertexIdxForBones+3]))),s.captureUVS)i.uv.toArray(B.uvs,2*U);else{B.uvs.push(.5+i.position.x/V.x);const e=.5+i.position.y/V.y;B.uvs.push(c.e.UseOpenGLOrientationForUV?1-e:e)}U++}}}0===B.indices.length&&(B.indices=null),0===B.positions.length&&(B.positions=null),0===B.normals.length&&(B.normals=null),0===B.uvs.length&&(B.uvs=null),0===(null===(m=B.matricesIndices)||void 0===m?void 0:m.length)&&(B.matricesIndices=null),0===(null===(f=B.matricesWeights)||void 0===f?void 0:f.length)&&(B.matricesWeights=null),0===(null===(y=B.matricesIndicesExtra)||void 0===y?void 0:y.length)&&(B.matricesIndicesExtra=null),0===(null===(T=B.matricesWeightsExtra)||void 0===T?void 0:T.length)&&(B.matricesWeightsExtra=null);const H=new o.Kj(e,t.getScene());return B.applyToMesh(H),v?(H.skeleton=t.skeleton,H.parent=t):(H.position=z.clone(),H.rotation=new i.P(K,S,j)),H.computeWorldMatrix(!0),H.refreshBoundingInfo(!0,!0),H}const f={CreateDecal:m};o.Kj.CreateDecal=(e,t,s,i,n,o)=>m(e,t,{position:s,normal:i,size:n,angle:o})},8128:(e,t,s)=>{s.d(t,{tX:()=>c,uH:()=>a,vM:()=>r});var i=s(3632),n=s(4517),o=s(3027);function r(e){const t=new Array,s=new Array,i=new Array,r=new Array,a=e.radius||.5,c=e.tessellation||64,h=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,l=0===e.sideOrientation?0:e.sideOrientation||n.x.DEFAULTSIDE;t.push(0,0,0),r.push(.5,.5);const u=2*Math.PI*h,d=1===h?u/c:u/(c-1);let p=0;for(let e=0;e<c;e++){const e=Math.cos(p),s=Math.sin(p),i=(e+1)/2,n=(1-s)/2;t.push(a*e,a*s,0),r.push(i,o.e.UseOpenGLOrientationForUV?1-n:n),p+=d}1===h&&(t.push(t[3],t[4],t[5]),r.push(r[2],o.e.UseOpenGLOrientationForUV?1-r[3]:r[3]));const g=t.length/3;for(let e=1;e<g-1;e++)s.push(e+1,0,e);n.x.ComputeNormals(t,s,i),n.x._ComputeSides(l,t,s,i,r,e.frontUVs,e.backUVs);const x=new n.x;return x.indices=s,x.positions=t,x.normals=i,x.uvs=r,x}function a(e,t={},s=null){const n=new i.Kj(e,s);return t.sideOrientation=i.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,r(t).applyToMesh(n,t.updatable),n}const c={CreateDisc:a};n.x.CreateDisc=r,i.Kj.CreateDisc=(e,t,s,i=null,n,o)=>a(e,{radius:t,tessellation:s,sideOrientation:o,updatable:n},i)},9609:(e,t,s)=>{s.d(t,{M:()=>r});var i=s(3501),n=s(9288),o=s(1755);function r(e,t,s=null){let r=t.m||1;r!==Math.floor(r)&&(Math.floor(r),n.Y.Warn("m not an integer only floor(m) used"));let a=t.n||0;if(a!==Math.floor(a)&&(Math.floor(a),n.Y.Warn("n not an integer only floor(n) used")),a>r){const e=a;a=r,r=e,n.Y.Warn("n > m therefore m and n swapped")}const c=new o.Bn;c.build(r,a);const h={custom:o.zz.BuildGeodesicData(c),size:t.size,sizeX:t.sizeX,sizeY:t.sizeY,sizeZ:t.sizeZ,faceUV:t.faceUV,faceColors:t.faceColors,flat:t.flat,updatable:t.updatable,sideOrientation:t.sideOrientation,frontUVs:t.frontUVs,backUVs:t.backUVs};return(0,i.sh)(e,h,s)}},3546:(e,t,s)=>{s.d(t,{_:()=>d,w:()=>u});var i=s(972),n=s(9859),o=s(3632),r=s(4517),a=s(9288),c=s(1755),h=s(9044),l=s(3027);function u(e,t){const s=e.size,n=e.sizeX||s||1,o=e.sizeY||s||1,a=e.sizeZ||s||1,c=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE,h=new Array,u=new Array,d=new Array,p=new Array;let g=1/0,x=-1/0,m=1/0,f=-1/0;for(let e=0;e<t.vertex.length;e++)g=Math.min(g,t.vertex[e][0]*n),x=Math.max(x,t.vertex[e][0]*n),m=Math.min(m,t.vertex[e][1]*o),f=Math.max(f,t.vertex[e][1]*o);let y=0;for(let e=0;e<t.face.length;e++){const s=t.face[e],r=i.P.FromArray(t.vertex[s[0]]),c=i.P.FromArray(t.vertex[s[2]]),T=i.P.FromArray(t.vertex[s[1]]),_=c.subtract(r),v=T.subtract(r),P=i.P.Cross(v,_).normalize();for(let e=0;e<s.length;e++){d.push(P.x,P.y,P.z);const i=t.vertex[s[e]];h.push(i[0]*n,i[1]*o,i[2]*a);const r=(i[1]*o-m)/(f-m);p.push((i[0]*n-g)/(x-g),l.e.UseOpenGLOrientationForUV?1-r:r)}for(let e=0;e<s.length-2;e++)u.push(y,y+e+2,y+e+1);y+=s.length}r.x._ComputeSides(c,h,u,d,p);const T=new r.x;return T.positions=h,T.indices=u,T.normals=d,T.uvs=p,T}function d(e,t,s=null){const r=t.size,l=t.sizeX||r||1,d=t.sizeY||r||1,p=t.sizeZ||r||1;let g=t.m||1;g!==Math.floor(g)&&(Math.floor(g),a.Y.Warn("m not an integer only floor(m) used"));let x=t.n||0;if(x!==Math.floor(x)&&(Math.floor(x),a.Y.Warn("n not an integer only floor(n) used")),x>g){const e=x;x=g,g=e,a.Y.Warn("n > m therefore m and n swapped")}const m=new c.Bn;m.build(g,x);const f=c.zz.BuildGeodesicData(m),y=f.toGoldbergPolyhedronData(),T=new h.R(e,s);t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),T._originalBuilderSideOrientation=t.sideOrientation,u(t,y).applyToMesh(T,t.updatable),T.goldbergData.nbSharedFaces=f.sharedNodes,T.goldbergData.nbUnsharedFaces=f.poleNodes,T.goldbergData.adjacentFaces=f.adjacentFaces,T.goldbergData.nbFaces=T.goldbergData.nbSharedFaces+T.goldbergData.nbUnsharedFaces,T.goldbergData.nbFacesAtPole=(T.goldbergData.nbUnsharedFaces-12)/12;for(let e=0;e<f.vertex.length;e++)T.goldbergData.faceCenters.push(i.P.FromArray(f.vertex[e])),T.goldbergData.faceCenters[e].x*=l,T.goldbergData.faceCenters[e].y*=d,T.goldbergData.faceCenters[e].z*=p,T.goldbergData.faceColors.push(new n.HE(1,1,1,1));for(let e=0;e<y.face.length;e++){const t=y.face[e],s=i.P.FromArray(y.vertex[t[0]]),n=i.P.FromArray(y.vertex[t[2]]),o=i.P.FromArray(y.vertex[t[1]]),r=n.subtract(s),a=o.subtract(s),c=i.P.Cross(a,r).normalize(),h=i.P.Cross(a,c).normalize();T.goldbergData.faceXaxis.push(a.normalize()),T.goldbergData.faceYaxis.push(c),T.goldbergData.faceZaxis.push(h)}return T}o.Kj.CreateGoldberg=d},6377:(e,t,s)=>{s.d(t,{Au:()=>c,GM:()=>h,GQ:()=>a});var i=s(972),n=s(3632),o=s(4517),r=s(3027);function a(e){const t=e.sideOrientation||o.x.DEFAULTSIDE,s=e.radius||1,n=void 0===e.flat||e.flat,a=e.subdivisions||4,c=e.radiusX||s,h=e.radiusY||s,l=e.radiusZ||s,u=(1+Math.sqrt(5))/2,d=[-1,u,-0,1,u,0,-1,-u,0,1,-u,0,0,-1,-u,0,1,-u,0,-1,u,0,1,u,u,0,1,u,0,-1,-u,0,1,-u,0,-1],p=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],g=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],x=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],m=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],f=new Array,y=new Array,T=new Array,_=new Array;let v=0;const P=new Array(3),O=new Array(3);let A;for(A=0;A<3;A++)P[A]=i.P.Zero(),O[A]=i.FM.Zero();for(let e=0;e<20;e++){for(A=0;A<3;A++){const t=p[3*e+A];P[A].copyFromFloats(d[3*g[t]],d[3*g[t]+1],d[3*g[t]+2]),P[A].normalize(),O[A].copyFromFloats(.134765625*x[2*t]+.05859375+-.0390625*m[e],.2333984375*x[2*t+1]+.025390625+.01953125*m[e])}const t=(e,t,s,o)=>{const u=i.P.Lerp(P[0],P[2],t/a),d=i.P.Lerp(P[1],P[2],t/a),p=a===t?P[2]:i.P.Lerp(u,d,e/(a-t));let g;if(p.normalize(),n){const e=i.P.Lerp(P[0],P[2],o/a),t=i.P.Lerp(P[1],P[2],o/a);g=i.P.Lerp(e,t,s/(a-o))}else g=new i.P(p.x,p.y,p.z);g.x/=c,g.y/=h,g.z/=l,g.normalize();const x=i.FM.Lerp(O[0],O[2],t/a),m=i.FM.Lerp(O[1],O[2],t/a),A=a===t?O[2]:i.FM.Lerp(x,m,e/(a-t));y.push(p.x*c,p.y*h,p.z*l),T.push(g.x,g.y,g.z),_.push(A.x,r.e.UseOpenGLOrientationForUV?1-A.y:A.y),f.push(v),v++};for(let e=0;e<a;e++)for(let s=0;s+e<a;s++)t(s,e,s+1/3,e+1/3),t(s+1,e,s+1/3,e+1/3),t(s,e+1,s+1/3,e+1/3),s+e+1<a&&(t(s+1,e,s+2/3,e+2/3),t(s+1,e+1,s+2/3,e+2/3),t(s,e+1,s+2/3,e+2/3))}o.x._ComputeSides(t,y,f,T,_,e.frontUVs,e.backUVs);const b=new o.x;return b.indices=f,b.positions=y,b.normals=T,b.uvs=_,b}function c(e,t={},s=null){const i=new n.Kj(e,s);return t.sideOrientation=n.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(i,t.updatable),i}const h={CreateIcoSphere:c};o.x.CreateIcoSphere=a,n.Kj.CreateIcoSphere=(e,t,s)=>c(e,t,s)},6755:(e,t,s)=>{s.d(t,{O:()=>r,a:()=>a});var i=s(972),n=s(3632),o=s(7079);function r(e,t,s=null){const r=t.arc?t.arc<=0||t.arc>1?1:t.arc:1,a=void 0===t.closed||t.closed,c=t.shape,h=t.radius||1,l=t.tessellation||64,u=t.clip||0,d=t.updatable,p=n.Kj._GetDefaultSideOrientation(t.sideOrientation),g=t.cap||n.Kj.NO_CAP,x=2*Math.PI,m=new Array,f=t.invertUV||!1;let y=0,T=0;const _=x/l*r;let v,P;for(y=0;y<=l-u;y++){for(P=[],g!=n.Kj.CAP_START&&g!=n.Kj.CAP_ALL||(P.push(new i.P(0,c[0].y,0)),P.push(new i.P(Math.cos(y*_)*c[0].x*h,c[0].y,Math.sin(y*_)*c[0].x*h))),T=0;T<c.length;T++)v=new i.P(Math.cos(y*_)*c[T].x*h,c[T].y,Math.sin(y*_)*c[T].x*h),P.push(v);g!=n.Kj.CAP_END&&g!=n.Kj.CAP_ALL||(P.push(new i.P(Math.cos(y*_)*c[c.length-1].x*h,c[c.length-1].y,Math.sin(y*_)*c[c.length-1].x*h)),P.push(new i.P(0,c[c.length-1].y,0))),m.push(P)}return(0,o.LY)(e,{pathArray:m,closeArray:a,sideOrientation:p,updatable:d,invertUV:f,frontUVs:t.frontUVs,backUVs:t.backUVs},s)}const a={CreateLathe:r};n.Kj.CreateLathe=(e,t,s,i,n,o,a)=>r(e,{shape:t,radius:s,tessellation:i,sideOrientation:a,updatable:o},n)},7700:(e,t,s)=>{s.d(t,{Pk:()=>g,Yo:()=>p,a4:()=>d,gl:()=>u});var i=s(972),n=s(9859),o=s(3632),r=s(4517),a=s(540),c=s(7959),h=s(78),l=s(3027);function u(e,t,s,o,a,h,u){const d=s||new Array(3),p=o,g=[],x=u||!1;for(let e=0;e<3;e++)void 0===d[e]&&(d[e]=new i.Lt(0,0,1,1)),p&&void 0===p[e]&&(p[e]=new n.HE(1,1,1,1));const m=e.getVerticesData(c.o.PositionKind),f=e.getVerticesData(c.o.NormalKind),y=e.getVerticesData(c.o.UVKind),T=e.getIndices(),_=m.length/9;let v=0,P=0,O=0,A=0,b=0;const w=[0];if(x)for(let e=_;e<m.length/3;e+=4)P=m[3*(e+2)]-m[3*e],O=m[3*(e+2)+2]-m[3*e+2],A=Math.sqrt(P*P+O*O),b+=A,w.push(b);let R=0,I=0;for(let e=0;e<f.length;e+=3)Math.abs(f[e+1])<.001&&(I=1),Math.abs(f[e+1]-1)<.001&&(I=0),Math.abs(f[e+1]+1)<.001&&(I=2),R=e/3,1===I?(v=R-_,y[2*R]=v%4<1.5?x?d[I].x+(d[I].z-d[I].x)*w[Math.floor(v/4)]/b:d[I].x:x?d[I].x+(d[I].z-d[I].x)*w[Math.floor(v/4)+1]/b:d[I].z,y[2*R+1]=v%2==0?l.e.UseOpenGLOrientationForUV?1-d[I].w:d[I].w:l.e.UseOpenGLOrientationForUV?1-d[I].y:d[I].y):(y[2*R]=(1-y[2*R])*d[I].x+y[2*R]*d[I].z,y[2*R+1]=(1-y[2*R+1])*d[I].y+y[2*R+1]*d[I].w,l.e.UseOpenGLOrientationForUV&&(y[2*R+1]=1-y[2*R+1])),p&&g.push(p[I].r,p[I].g,p[I].b,p[I].a);r.x._ComputeSides(t,m,T,f,y,a,h);const M=new r.x;if(M.indices=T,M.positions=m,M.normals=f,M.uvs=y,p){const e=t===r.x.DOUBLESIDE?g.concat(g):g;M.colors=e}return M}function d(e,t,s=null,n=earcut){t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation);const r=t.shape,c=t.holes||[],l=t.depth||0,d=t.smoothingThreshold||2,p=[];let g=[];for(let e=0;e<r.length;e++)p[e]=new i.FM(r[e].x,r[e].z);p[0].equalsWithEpsilon(p[p.length-1],1e-8)&&p.pop();const x=new a.z(e,p,s||h.l.LastCreatedScene,n);for(let e=0;e<c.length;e++){g=[];for(let t=0;t<c[e].length;t++)g.push(new i.FM(c[e][t].x,c[e][t].z));x.addHole(g)}const m=x.build(!1,l,d);return m._originalBuilderSideOrientation=t.sideOrientation,u(m,t.sideOrientation,t.faceUV,t.faceColors,t.frontUVs,t.backUVs,t.wrap).applyToMesh(m,t.updatable),m}function p(e,t,s=null,i=earcut){return d(e,t,s,i)}const g={ExtrudePolygon:p,CreatePolygon:d};r.x.CreatePolygon=u,o.Kj.CreatePolygon=(e,t,s,i,n,o,r=earcut)=>d(e,{shape:t,holes:i,updatable:n,sideOrientation:o},s,r),o.Kj.ExtrudePolygon=(e,t,s,i,n,o,r,a=earcut)=>p(e,{shape:t,holes:n,depth:s,updatable:o,sideOrientation:r},i,a)},3501:(e,t,s)=>{s.d(t,{Qy:()=>c,ox:()=>l,sh:()=>h});var i=s(972),n=s(9859),o=s(3632),r=s(4517),a=s(3027);function c(e){const t=[];t[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},t[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},t[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},t[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},t[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},t[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},t[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},t[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},t[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},t[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},t[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},t[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},t[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},t[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},t[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};const s=e.type&&(e.type<0||e.type>=t.length)?0:e.type||0,o=e.size,c=e.sizeX||o||1,h=e.sizeY||o||1,l=e.sizeZ||o||1,u=e.custom||t[s],d=u.face.length,p=e.faceUV||new Array(d),g=e.faceColors,x=void 0===e.flat||e.flat,m=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE,f=new Array,y=new Array,T=new Array,_=new Array,v=new Array;let P=0,O=0;const A=new Array;let b,w,R,I,M,C,F=0,D=0;if(x)for(D=0;D<d;D++)g&&void 0===g[D]&&(g[D]=new n.HE(1,1,1,1)),p&&void 0===p[D]&&(p[D]=new i.Lt(0,0,1,1));if(x)for(D=0;D<d;D++){const e=u.face[D].length;for(R=2*Math.PI/e,I=.5*Math.tan(R/2),M=.5,F=0;F<e;F++)f.push(u.vertex[u.face[D][F]][0]*c,u.vertex[u.face[D][F]][1]*h,u.vertex[u.face[D][F]][2]*l),A.push(P),P++,b=p[D].x+(p[D].z-p[D].x)*(.5+I),w=p[D].y+(p[D].w-p[D].y)*(M-.5),_.push(b,a.e.UseOpenGLOrientationForUV?1-w:w),C=I*Math.cos(R)-M*Math.sin(R),M=I*Math.sin(R)+M*Math.cos(R),I=C,g&&v.push(g[D].r,g[D].g,g[D].b,g[D].a);for(F=0;F<e-2;F++)y.push(A[0+O],A[F+2+O],A[F+1+O]);O+=e}else{for(F=0;F<u.vertex.length;F++)f.push(u.vertex[F][0]*c,u.vertex[F][1]*h,u.vertex[F][2]*l),_.push(0,a.e.UseOpenGLOrientationForUV?1:0);for(D=0;D<d;D++)for(F=0;F<u.face[D].length-2;F++)y.push(u.face[D][0],u.face[D][F+2],u.face[D][F+1])}r.x.ComputeNormals(f,y,T),r.x._ComputeSides(m,f,y,T,_,e.frontUVs,e.backUVs);const z=new r.x;return z.positions=f,z.indices=y,z.normals=T,z.uvs=_,g&&x&&(z.colors=v),z}function h(e,t={},s=null){const i=new o.Kj(e,s);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,c(t).applyToMesh(i,t.updatable),i}const l={CreatePolyhedron:h};r.x.CreatePolyhedron=c,o.Kj.CreatePolyhedron=(e,t,s)=>h(e,t,s)},133:(e,t,s)=>{s.d(t,{p:()=>h});var i=s(1021),n=s(972),o=s(3632),r=s(7700);class a{constructor(e){this._paths=[],this._tempPaths=[],this._holes=[],this._resolution=e}moveTo(e,t){this._currentPath=new i.ZZ(e,t),this._tempPaths.push(this._currentPath)}lineTo(e,t){this._currentPath.addLineTo(e,t)}quadraticCurveTo(e,t,s,i){this._currentPath.addQuadraticCurveTo(e,t,s,i,this._resolution)}bezierCurveTo(e,t,s,i,n,o){this._currentPath.addBezierCurveTo(e,t,s,i,n,o,this._resolution)}extractHoles(){for(const e of this._tempPaths)e.area()>0?this._holes.push(e):this._paths.push(e);if(!this._paths.length&&this._holes.length){const e=this._holes;this._holes=this._paths,this._paths=e}this._tempPaths.length=0}get paths(){return this._paths}get holes(){return this._holes}}function c(e,t,s,i,n,o){const r=o.glyphs[e]||o.glyphs["?"];if(!r)return null;const c=new a(n);if(r.o){const e=r.o.split(" ");for(let n=0,o=e.length;n<o;)switch(e[n++]){case"m":{const o=parseInt(e[n++])*t+s,r=parseInt(e[n++])*t+i;c.moveTo(o,r);break}case"l":{const o=parseInt(e[n++])*t+s,r=parseInt(e[n++])*t+i;c.lineTo(o,r);break}case"q":{const o=parseInt(e[n++])*t+s,r=parseInt(e[n++])*t+i,a=parseInt(e[n++])*t+s,h=parseInt(e[n++])*t+i;c.quadraticCurveTo(a,h,o,r);break}case"b":{const o=parseInt(e[n++])*t+s,r=parseInt(e[n++])*t+i,a=parseInt(e[n++])*t+s,h=parseInt(e[n++])*t+i,l=parseInt(e[n++])*t+s,u=parseInt(e[n++])*t+i;c.bezierCurveTo(a,h,l,u,o,r);break}}}return c.extractHoles(),{offsetX:r.ha*t,shapePath:c}}function h(e,t,s,i={size:50,resolution:8,depth:1},a=null){const h=function(e,t,s,i){const n=Array.from(e),o=t/i.resolution,r=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,a=[];let h=0,l=0;for(let e=0;e<n.length;e++){const t=n[e];if("\n"===t)h=0,l-=r;else{const e=c(t,o,h,l,s,i);e&&(h+=e.offsetX,a.push(e.shapePath))}}return a}(t,i.size||50,i.resolution||8,s),l=[];for(const t of h){if(!t.paths.length)continue;const s=t.holes.slice();for(const c of t.paths){const t=[],h=[],u=c.getPoints();for(const e of u)h.push(new n.P(e.x,0,e.y));const d=s.slice();for(const e of d){const i=e.getPoints();let o=!1;for(const e of i)if(c.isPointInside(e)){o=!0;break}if(!o)continue;const r=[];for(const e of i)r.push(new n.P(e.x,0,e.y));t.push(r),s.splice(s.indexOf(e),1)}const p=(0,r.Yo)(e,{shape:h,holes:t.length?t:void 0,depth:i.depth||1,sideOrientation:o.Kj._GetDefaultSideOrientation(i.sideOrientation||o.Kj.DOUBLESIDE)},a);l.push(p)}}const u=o.Kj.MergeMeshes(l,!0,!0);if(u){const t=null==u?void 0:u.getBoundingInfo();u.position.x=-(null==t?void 0:t.boundingBox.extendSizeWorld._x),u.position.y=-(null==t?void 0:t.boundingBox.extendSizeWorld._y),u.position.z=-(null==t?void 0:t.boundingBox.extendSizeWorld._z),u.name=e,u.rotation.x=-Math.PI/2,u.bakeCurrentTransformIntoVertices()}return u}},6435:(e,t,s)=>{s.d(t,{Sc:()=>u,cQ:()=>l,qS:()=>h});var i=s(972),n=s(9859),o=s(3632),r=s(4517),a=s(1694),c=s(3027);function h(e){const t=e.faceUV||new Array(6),s=e.faceColors,h=e.pattern||o.Kj.NO_FLIP,l=e.width||e.size||1,u=e.height||e.size||1,d=e.depth||e.size||1,p=e.tileWidth||e.tileSize||1,g=e.tileHeight||e.tileSize||1,x=e.alignHorizontal||0,m=e.alignVertical||0,f=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE;for(let e=0;e<6;e++)void 0===t[e]&&(t[e]=new i.Lt(0,0,1,1)),s&&void 0===s[e]&&(s[e]=new n.HE(1,1,1,1));const y=l/2,T=u/2,_=d/2,v=[];for(let e=0;e<2;e++)v[e]=(0,a.mm)({pattern:h,tileWidth:p,tileHeight:g,width:l,height:u,alignVertical:m,alignHorizontal:x,sideOrientation:f});for(let e=2;e<4;e++)v[e]=(0,a.mm)({pattern:h,tileWidth:p,tileHeight:g,width:d,height:u,alignVertical:m,alignHorizontal:x,sideOrientation:f});let P=m;m===o.Kj.BOTTOM?P=o.Kj.TOP:m===o.Kj.TOP&&(P=o.Kj.BOTTOM);for(let e=4;e<6;e++)v[e]=(0,a.mm)({pattern:h,tileWidth:p,tileHeight:g,width:l,height:d,alignVertical:P,alignHorizontal:x,sideOrientation:f});let O=[],A=[],b=[],w=[];const R=[],I=[],M=[],C=[];let F=0,D=0;for(let e=0;e<6;e++){const n=v[e].positions.length;I[e]=[],M[e]=[];for(let t=0;t<n/3;t++)I[e].push(new i.P(v[e].positions[3*t],v[e].positions[3*t+1],v[e].positions[3*t+2])),M[e].push(new i.P(v[e].normals[3*t],v[e].normals[3*t+1],v[e].normals[3*t+2]));F=v[e].uvs.length,C[e]=[];for(let s=0;s<F;s+=2)C[e][s]=t[e].x+(t[e].z-t[e].x)*v[e].uvs[s],C[e][s+1]=t[e].y+(t[e].w-t[e].y)*v[e].uvs[s+1],c.e.UseOpenGLOrientationForUV&&(C[e][s+1]=1-C[e][s+1]);if(b=b.concat(C[e]),w=w.concat(v[e].indices.map((e=>e+D))),D+=I[e].length,s)for(let t=0;t<4;t++)R.push(s[e].r,s[e].g,s[e].b,s[e].a)}const z=new i.P(0,0,_),E=i.y3.RotationY(Math.PI);O=I[0].map((e=>i.P.TransformNormal(e,E).add(z))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]),A=M[0].map((e=>i.P.TransformNormal(e,E))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]),O=O.concat(I[1].map((e=>e.subtract(z))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),A=A.concat(M[1].map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const V=new i.P(y,0,0),j=i.y3.RotationY(-Math.PI/2);O=O.concat(I[2].map((e=>i.P.TransformNormal(e,j).add(V))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),A=A.concat(M[2].map((e=>i.P.TransformNormal(e,j))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const S=i.y3.RotationY(Math.PI/2);O=O.concat(I[3].map((e=>i.P.TransformNormal(e,S).subtract(V))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),A=A.concat(M[3].map((e=>i.P.TransformNormal(e,S))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const L=new i.P(0,T,0),K=i.y3.RotationX(Math.PI/2);O=O.concat(I[4].map((e=>i.P.TransformNormal(e,K).add(L))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),A=A.concat(M[4].map((e=>i.P.TransformNormal(e,K))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const B=i.y3.RotationX(-Math.PI/2);O=O.concat(I[5].map((e=>i.P.TransformNormal(e,B).subtract(L))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),A=A.concat(M[5].map((e=>i.P.TransformNormal(e,B))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),r.x._ComputeSides(f,O,w,A,b);const U=new r.x;if(U.indices=w,U.positions=O,U.normals=A,U.uvs=b,s){const e=f===r.x.DOUBLESIDE?R.concat(R):R;U.colors=e}return U}function l(e,t,s=null){const i=new o.Kj(e,s);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,h(t).applyToMesh(i,t.updatable),i}const u={CreateTiledBox:l};r.x.CreateTiledBox=h},1694:(e,t,s)=>{s.d(t,{KA:()=>r,P8:()=>a,mm:()=>o});var i=s(3632),n=s(4517);function o(e){const t=e.pattern||i.Kj.NO_FLIP,s=e.tileWidth||e.tileSize||1,o=e.tileHeight||e.tileSize||1,r=e.alignHorizontal||0,a=e.alignVertical||0,c=e.width||e.size||1,h=Math.floor(c/s);let l=c-h*s;const u=e.height||e.size||1,d=Math.floor(u/o);let p=u-d*o;const g=s*h/2,x=o*d/2;let m=0,f=0,y=0,T=0,_=0,v=0;if(l>0||p>0){switch(y=-g,T=-x,_=g,v=x,r){case i.Kj.CENTER:l/=2,y-=l,_+=l;break;case i.Kj.LEFT:_+=l,m=-l/2;break;case i.Kj.RIGHT:y-=l,m=l/2}switch(a){case i.Kj.CENTER:p/=2,T-=p,v+=p;break;case i.Kj.BOTTOM:v+=p,f=-p/2;break;case i.Kj.TOP:T-=p,f=p/2}}const P=[],O=[],A=[];A[0]=[0,0,1,0,1,1,0,1],A[1]=[0,0,1,0,1,1,0,1],t!==i.Kj.ROTATE_TILE&&t!==i.Kj.ROTATE_ROW||(A[1]=[1,1,0,1,0,0,1,0]),t!==i.Kj.FLIP_TILE&&t!==i.Kj.FLIP_ROW||(A[1]=[1,0,0,0,0,1,1,1]),t!==i.Kj.FLIP_N_ROTATE_TILE&&t!==i.Kj.FLIP_N_ROTATE_ROW||(A[1]=[0,1,1,1,1,0,0,0]);let b=[];const w=[],R=[];let I=0;for(let e=0;e<d;e++)for(let n=0;n<h;n++)P.push(n*s-g+m,e*o-x+f,0),P.push((n+1)*s-g+m,e*o-x+f,0),P.push((n+1)*s-g+m,(e+1)*o-x+f,0),P.push(n*s-g+m,(e+1)*o-x+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),b=t===i.Kj.FLIP_TILE||t===i.Kj.ROTATE_TILE||t===i.Kj.FLIP_N_ROTATE_TILE?b.concat(A[(n%2+e%2)%2]):t===i.Kj.FLIP_ROW||t===i.Kj.ROTATE_ROW||t===i.Kj.FLIP_N_ROTATE_ROW?b.concat(A[e%2]):b.concat(A[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1),I+=4;if(l>0||p>0){const e=p>0&&(a===i.Kj.CENTER||a===i.Kj.TOP),n=p>0&&(a===i.Kj.CENTER||a===i.Kj.BOTTOM),c=l>0&&(r===i.Kj.CENTER||r===i.Kj.RIGHT),u=l>0&&(r===i.Kj.CENTER||r===i.Kj.LEFT);let A,M,C,F,D=[];if(e&&c&&(P.push(y+m,T+f,0),P.push(-g+m,T+f,0),P.push(-g+m,T+p+f,0),P.push(y+m,T+p+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,A=1-l/s,M=1-p/o,C=1,F=1,D=[A,M,C,M,C,F,A,F],t===i.Kj.ROTATE_ROW&&(D=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),t===i.Kj.FLIP_ROW&&(D=[1-A,M,1-C,M,1-C,F,1-A,F]),t===i.Kj.FLIP_N_ROTATE_ROW&&(D=[A,1-M,C,1-M,C,1-F,A,1-F]),b=b.concat(D),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),e&&u&&(P.push(g+m,T+f,0),P.push(_+m,T+f,0),P.push(_+m,T+p+f,0),P.push(g+m,T+p+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,A=0,M=1-p/o,C=l/s,F=1,D=[A,M,C,M,C,F,A,F],(t===i.Kj.ROTATE_ROW||t===i.Kj.ROTATE_TILE&&h%2==0)&&(D=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),(t===i.Kj.FLIP_ROW||t===i.Kj.FLIP_TILE&&h%2==0)&&(D=[1-A,M,1-C,M,1-C,F,1-A,F]),(t===i.Kj.FLIP_N_ROTATE_ROW||t===i.Kj.FLIP_N_ROTATE_TILE&&h%2==0)&&(D=[A,1-M,C,1-M,C,1-F,A,1-F]),b=b.concat(D),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),n&&c&&(P.push(y+m,x+f,0),P.push(-g+m,x+f,0),P.push(-g+m,v+f,0),P.push(y+m,v+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,A=1-l/s,M=0,C=1,F=p/o,D=[A,M,C,M,C,F,A,F],(t===i.Kj.ROTATE_ROW&&d%2==1||t===i.Kj.ROTATE_TILE&&d%1==0)&&(D=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),(t===i.Kj.FLIP_ROW&&d%2==1||t===i.Kj.FLIP_TILE&&d%2==0)&&(D=[1-A,M,1-C,M,1-C,F,1-A,F]),(t===i.Kj.FLIP_N_ROTATE_ROW&&d%2==1||t===i.Kj.FLIP_N_ROTATE_TILE&&d%2==0)&&(D=[A,1-M,C,1-M,C,1-F,A,1-F]),b=b.concat(D),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),n&&u&&(P.push(g+m,x+f,0),P.push(_+m,x+f,0),P.push(_+m,v+f,0),P.push(g+m,v+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,A=0,M=0,C=l/s,F=p/o,D=[A,M,C,M,C,F,A,F],(t===i.Kj.ROTATE_ROW&&d%2==1||t===i.Kj.ROTATE_TILE&&(d+h)%2==1)&&(D=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),(t===i.Kj.FLIP_ROW&&d%2==1||t===i.Kj.FLIP_TILE&&(d+h)%2==1)&&(D=[1-A,M,1-C,M,1-C,F,1-A,F]),(t===i.Kj.FLIP_N_ROTATE_ROW&&d%2==1||t===i.Kj.FLIP_N_ROTATE_TILE&&(d+h)%2==1)&&(D=[A,1-M,C,1-M,C,1-F,A,1-F]),b=b.concat(D),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),e){const e=[];A=0,M=1-p/o,C=1,F=1,e[0]=[A,M,C,M,C,F,A,F],e[1]=[A,M,C,M,C,F,A,F],t!==i.Kj.ROTATE_TILE&&t!==i.Kj.ROTATE_ROW||(e[1]=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),t!==i.Kj.FLIP_TILE&&t!==i.Kj.FLIP_ROW||(e[1]=[1-A,M,1-C,M,1-C,F,1-A,F]),t!==i.Kj.FLIP_N_ROTATE_TILE&&t!==i.Kj.FLIP_N_ROTATE_ROW||(e[1]=[A,1-M,C,1-M,C,1-F,A,1-F]);for(let n=0;n<h;n++)P.push(n*s-g+m,T+f,0),P.push((n+1)*s-g+m,T+f,0),P.push((n+1)*s-g+m,T+p+f,0),P.push(n*s-g+m,T+p+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,b=t===i.Kj.FLIP_TILE||t===i.Kj.ROTATE_TILE||t===i.Kj.FLIP_N_ROTATE_TILE?b.concat(e[(n+1)%2]):t===i.Kj.FLIP_ROW||t===i.Kj.ROTATE_ROW||t===i.Kj.FLIP_N_ROTATE_ROW?b.concat(e[1]):b.concat(e[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(n){const e=[];A=0,M=0,C=1,F=p/o,e[0]=[A,M,C,M,C,F,A,F],e[1]=[A,M,C,M,C,F,A,F],t!==i.Kj.ROTATE_TILE&&t!==i.Kj.ROTATE_ROW||(e[1]=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),t!==i.Kj.FLIP_TILE&&t!==i.Kj.FLIP_ROW||(e[1]=[1-A,M,1-C,M,1-C,F,1-A,F]),t!==i.Kj.FLIP_N_ROTATE_TILE&&t!==i.Kj.FLIP_N_ROTATE_ROW||(e[1]=[A,1-M,C,1-M,C,1-F,A,1-F]);for(let n=0;n<h;n++)P.push(n*s-g+m,v-p+f,0),P.push((n+1)*s-g+m,v-p+f,0),P.push((n+1)*s-g+m,v+f,0),P.push(n*s-g+m,v+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,b=t===i.Kj.FLIP_TILE||t===i.Kj.ROTATE_TILE||t===i.Kj.FLIP_N_ROTATE_TILE?b.concat(e[(n+d)%2]):t===i.Kj.FLIP_ROW||t===i.Kj.ROTATE_ROW||t===i.Kj.FLIP_N_ROTATE_ROW?b.concat(e[d%2]):b.concat(e[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(c){const e=[];A=1-l/s,M=0,C=1,F=1,e[0]=[A,M,C,M,C,F,A,F],e[1]=[A,M,C,M,C,F,A,F],t!==i.Kj.ROTATE_TILE&&t!==i.Kj.ROTATE_ROW||(e[1]=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),t!==i.Kj.FLIP_TILE&&t!==i.Kj.FLIP_ROW||(e[1]=[1-A,M,1-C,M,1-C,F,1-A,F]),t!==i.Kj.FLIP_N_ROTATE_TILE&&t!==i.Kj.FLIP_N_ROTATE_ROW||(e[1]=[A,1-M,C,1-M,C,1-F,A,1-F]);for(let s=0;s<d;s++)P.push(y+m,s*o-x+f,0),P.push(y+l+m,s*o-x+f,0),P.push(y+l+m,(s+1)*o-x+f,0),P.push(y+m,(s+1)*o-x+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,b=t===i.Kj.FLIP_TILE||t===i.Kj.ROTATE_TILE||t===i.Kj.FLIP_N_ROTATE_TILE?b.concat(e[(s+1)%2]):t===i.Kj.FLIP_ROW||t===i.Kj.ROTATE_ROW||t===i.Kj.FLIP_N_ROTATE_ROW?b.concat(e[s%2]):b.concat(e[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(u){const e=[];A=0,M=0,C=l/o,F=1,e[0]=[A,M,C,M,C,F,A,F],e[1]=[A,M,C,M,C,F,A,F],t!==i.Kj.ROTATE_TILE&&t!==i.Kj.ROTATE_ROW||(e[1]=[1-A,1-M,1-C,1-M,1-C,1-F,1-A,1-F]),t!==i.Kj.FLIP_TILE&&t!==i.Kj.FLIP_ROW||(e[1]=[1-A,M,1-C,M,1-C,F,1-A,F]),t!==i.Kj.FLIP_N_ROTATE_TILE&&t!==i.Kj.FLIP_N_ROTATE_ROW||(e[1]=[A,1-M,C,1-M,C,1-F,A,1-F]);for(let s=0;s<d;s++)P.push(_-l+m,s*o-x+f,0),P.push(_+m,s*o-x+f,0),P.push(_+m,(s+1)*o-x+f,0),P.push(_-l+m,(s+1)*o-x+f,0),R.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,b=t===i.Kj.FLIP_TILE||t===i.Kj.ROTATE_TILE||t===i.Kj.FLIP_N_ROTATE_TILE?b.concat(e[(s+h)%2]):t===i.Kj.FLIP_ROW||t===i.Kj.ROTATE_ROW||t===i.Kj.FLIP_N_ROTATE_ROW?b.concat(e[s%2]):b.concat(e[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),O.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}}const M=0===e.sideOrientation?0:e.sideOrientation||n.x.DEFAULTSIDE;n.x._ComputeSides(M,P,R,O,b,e.frontUVs,e.backUVs);const C=new n.x;C.indices=R,C.positions=P,C.normals=O,C.uvs=b;const F=M===n.x.DOUBLESIDE?w.concat(w):w;return C.colors=F,C}function r(e,t,s=null){const n=new i.Kj(e,s);return t.sideOrientation=i.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,o(t).applyToMesh(n,t.updatable),n}const a={CreateTiledPlane:r};n.x.CreateTiledPlane=o},2005:(e,t,s)=>{s.d(t,{eu:()=>c,h5:()=>a,t3:()=>h});var i=s(972),n=s(3632),o=s(4517),r=s(3027);function a(e){const t=[],s=[],n=[],a=[],c=e.diameter||1,h=e.thickness||.5,l=e.tessellation||16,u=0===e.sideOrientation?0:e.sideOrientation||o.x.DEFAULTSIDE,d=l+1;for(let e=0;e<=l;e++){const o=e/l,u=e*Math.PI*2/l-Math.PI/2,p=i.y3.Translation(c/2,0,0).multiply(i.y3.RotationY(u));for(let c=0;c<=l;c++){const u=1-c/l,g=c*Math.PI*2/l+Math.PI,x=Math.cos(g),m=Math.sin(g);let f=new i.P(x,m,0),y=f.scale(h/2);const T=new i.FM(o,u);y=i.P.TransformCoordinates(y,p),f=i.P.TransformNormal(f,p),s.push(y.x,y.y,y.z),n.push(f.x,f.y,f.z),a.push(T.x,r.e.UseOpenGLOrientationForUV?1-T.y:T.y);const _=(e+1)%d,v=(c+1)%d;t.push(e*d+c),t.push(e*d+v),t.push(_*d+c),t.push(e*d+v),t.push(_*d+v),t.push(_*d+c)}}o.x._ComputeSides(u,s,t,n,a,e.frontUVs,e.backUVs);const p=new o.x;return p.indices=t,p.positions=s,p.normals=n,p.uvs=a,p}function c(e,t={},s){const i=new n.Kj(e,s);return t.sideOrientation=n.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(i,t.updatable),i}const h={CreateTorus:c};o.x.CreateTorus=a,n.Kj.CreateTorus=(e,t,s,i,n,o,r)=>c(e,{diameter:t,thickness:s,tessellation:i,sideOrientation:r,updatable:o},n)},9945:(e,t,s)=>{s.d(t,{SN:()=>h,eB:()=>c,i9:()=>a});var i=s(972),n=s(3632),o=s(4517),r=s(3027);function a(e){const t=new Array,s=new Array,n=new Array,a=new Array,c=e.radius||2,h=e.tube||.5,l=e.radialSegments||32,u=e.tubularSegments||32,d=e.p||2,p=e.q||3,g=0===e.sideOrientation?0:e.sideOrientation||o.x.DEFAULTSIDE,x=e=>{const t=Math.cos(e),s=Math.sin(e),n=p/d*e,o=Math.cos(n),r=c*(2+o)*.5*t,a=c*(2+o)*s*.5,h=c*Math.sin(n)*.5;return new i.P(r,a,h)};let m,f;for(m=0;m<=l;m++){const e=m%l/l*2*d*Math.PI,t=x(e),n=x(e+.01),o=n.subtract(t);let c=n.add(t);const p=i.P.Cross(o,c);for(c=i.P.Cross(p,o),p.normalize(),c.normalize(),f=0;f<u;f++){const e=f%u/u*2*Math.PI,i=-h*Math.cos(e),n=h*Math.sin(e);s.push(t.x+i*c.x+n*p.x),s.push(t.y+i*c.y+n*p.y),s.push(t.z+i*c.z+n*p.z),a.push(m/l),a.push(r.e.UseOpenGLOrientationForUV?1-f/u:f/u)}}for(m=0;m<l;m++)for(f=0;f<u;f++){const e=(f+1)%u,s=m*u+f,i=(m+1)*u+f,n=(m+1)*u+e,o=m*u+e;t.push(o),t.push(i),t.push(s),t.push(o),t.push(n),t.push(i)}o.x.ComputeNormals(s,t,n),o.x._ComputeSides(g,s,t,n,a,e.frontUVs,e.backUVs);const y=new o.x;return y.indices=t,y.positions=s,y.normals=n,y.uvs=a,y}function c(e,t={},s){const i=new n.Kj(e,s);return t.sideOrientation=n.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(i,t.updatable),i}const h={CreateTorusKnot:c};o.x.CreateTorusKnot=a,n.Kj.CreateTorusKnot=(e,t,s,i,n,o,r,a,h,l)=>c(e,{radius:t,tube:s,radialSegments:i,tubularSegments:n,p:o,q:r,sideOrientation:l,updatable:h},a)},6540:(e,t,s)=>{s.d(t,{F:()=>c,_:()=>a});var i=s(972),n=s(3632),o=s(7079),r=s(1021);function a(e,t,s=null){const a=t.path;let c=t.instance,h=1;void 0!==t.radius?h=t.radius:c&&(h=c._creationDataStorage.radius);const l=t.tessellation||64,u=t.radiusFunction||null;let d=t.cap||n.Kj.NO_CAP;const p=t.invertUV||!1,g=t.updatable,x=n.Kj._GetDefaultSideOrientation(t.sideOrientation);t.arc=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1;const m=(e,t,s,o,r,a,c,h)=>{const l=t.getTangents(),u=t.getNormals(),d=t.getDistances(),p=2*Math.PI/r*h,g=a||(()=>o);let x,m,f,y;const T=i.jp.Matrix[0];let _=c===n.Kj.NO_CAP||c===n.Kj.CAP_END?0:2;for(let t=0;t<e.length;t++){m=g(t,d[t]),x=Array(),f=u[t];for(let s=0;s<r;s++)i.y3.RotationAxisToRef(l[t],p*s,T),y=x[s]?x[s]:i.P.Zero(),i.P.TransformCoordinatesToRef(f,T,y),y.scaleInPlace(m).addInPlace(e[t]),x[s]=y;s[_]=x,_++}const v=(t,s)=>{const i=Array();for(let n=0;n<t;n++)i.push(e[s]);return i};switch(c){case n.Kj.NO_CAP:break;case n.Kj.CAP_START:s[0]=v(r,0),s[1]=s[2].slice(0);break;case n.Kj.CAP_END:s[_]=s[_-1].slice(0),s[_+1]=v(r,e.length-1);break;case n.Kj.CAP_ALL:s[0]=v(r,0),s[1]=s[2].slice(0),s[_]=s[_-1].slice(0),s[_+1]=v(r,e.length-1)}return s};let f,y;if(c){const e=c._creationDataStorage,s=t.arc||e.arc;return f=e.path3D.update(a),y=m(a,f,e.pathArray,h,e.tessellation,u,e.cap,s),c=(0,o.LY)("",{pathArray:y,instance:c}),e.path3D=f,e.pathArray=y,e.arc=s,e.radius=h,c}f=new r.$B(a),d=d<0||d>3?0:d,y=m(a,f,new Array,h,l,u,d,t.arc);const T=(0,o.LY)(e,{pathArray:y,closePath:!0,closeArray:!1,updatable:g,sideOrientation:x,invertUV:p,frontUVs:t.frontUVs,backUVs:t.backUVs},s);return T._creationDataStorage.pathArray=y,T._creationDataStorage.path3D=f,T._creationDataStorage.tessellation=l,T._creationDataStorage.cap=d,T._creationDataStorage.arc=t.arc,T._creationDataStorage.radius=h,T}const c={CreateTube:a};n.Kj.CreateTube=(e,t,s,i,n,o,r,c,h,l)=>a(e,{path:t,radius:s,tessellation:i,radiusFunction:n,arc:1,cap:o,updatable:c,sideOrientation:h,instance:l},r)},1755:(e,t,s)=>{s.d(t,{zz:()=>l,lD:()=>h,Bn:()=>c});var i=s(972),n=s(1865),o=s(7786),r=s(9288);class a{constructor(e=0,t=0){this.x=e,this.y=t,e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("x is not an integer, floor(x) used")),t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("y is not an integer, floor(y) used"))}clone(){return new a(this.x,this.y)}rotate60About(e){const t=this.x;return this.x=e.x+e.y-this.y,this.y=t+this.y-e.x,this}rotateNeg60About(e){const t=this.x;return this.x=t+this.y-e.y,this.y=e.x+e.y-t,this}rotate120(e,t){e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("m not an integer only floor(m) used")),t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("n not an integer only floor(n) used"));const s=this.x;return this.x=e-s-this.y,this.y=t+s,this}rotateNeg120(e,t){e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("m is not an integer, floor(m) used")),t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("n is not an integer,   floor(n) used"));const s=this.x;return this.x=this.y-t,this.y=e+t-s-this.y,this}toCartesianOrigin(e,t){const s=i.P.Zero();return s.x=e.x+2*this.x*t+this.y*t,s.y=e.y+Math.sqrt(3)*this.y*t,s}static Zero(){return new a(0,0)}}class c{constructor(){this.cartesian=[],this.vertices=[],this.max=[],this.min=[],this.closestTo=[],this.innerFacets=[],this.isoVecsABOB=[],this.isoVecsOBOA=[],this.isoVecsBAOA=[],this.vertexTypes=[],this.IDATA=new h("icosahedron","Regular",[[0,o.Q_,-1],[-o.Q_,1,0],[-1,0,-o.Q_],[1,0,-o.Q_],[o.Q_,1,0],[0,o.Q_,1],[-1,0,o.Q_],[-o.Q_,-1,0],[0,-o.Q_,-1],[o.Q_,-1,0],[1,0,o.Q_],[0,-o.Q_,1]],[[0,2,1],[0,3,2],[0,4,3],[0,5,4],[0,1,5],[7,6,1],[8,7,2],[9,8,3],[10,9,4],[6,10,5],[2,7,1],[3,8,2],[4,9,3],[5,10,4],[1,6,5],[11,6,7],[11,7,8],[11,8,9],[11,9,10],[11,10,6]])}setIndices(){let e=12;const t={},s=this.m,i=this.n;let o,r,c,h,l,u=s,d=1,p=0;0!==i&&(u=n.R.HCF(s,i)),d=s/u,p=i/u;const g=a.Zero(),x=new a(s,i),m=new a(-i,s+i),f=a.Zero(),y=a.Zero(),T=a.Zero();let _,v,P,O,A=[];const b=[],w=this.vertByDist,R=(s,i,n,o)=>{_=s+"|"+n,v=i+"|"+o,_ in t||v in t?_ in t&&!(v in t)?t[v]=t[_]:v in t&&!(_ in t)&&(t[_]=t[v]):(t[_]=e,t[v]=e,e++),w[n][0]>2?b[t[_]]=[-w[n][0],w[n][1],t[_]]:b[t[_]]=[A[w[n][0]],w[n][1],t[_]]};this.IDATA.edgematch=[[1,"B"],[2,"B"],[3,"B"],[4,"B"],[0,"B"],[10,"O",14,"A"],[11,"O",10,"A"],[12,"O",11,"A"],[13,"O",12,"A"],[14,"O",13,"A"],[0,"O"],[1,"O"],[2,"O"],[3,"O"],[4,"O"],[19,"B",5,"A"],[15,"B",6,"A"],[16,"B",7,"A"],[17,"B",8,"A"],[18,"B",9,"A"]];for(let n=0;n<20;n++){if(A=this.IDATA.face[n],c=A[2],h=A[1],l=A[0],P=g.x+"|"+g.y,_=n+"|"+P,_ in t||(t[_]=c,b[c]=[A[w[P][0]],w[P][1]]),P=x.x+"|"+x.y,_=n+"|"+P,_ in t||(t[_]=h,b[h]=[A[w[P][0]],w[P][1]]),P=m.x+"|"+m.y,_=n+"|"+P,_ in t||(t[_]=l,b[l]=[A[w[P][0]],w[P][1]]),o=this.IDATA.edgematch[n][0],r=this.IDATA.edgematch[n][1],"B"===r)for(let e=1;e<u;e++)y.x=s-e*(d+p),y.y=i+e*d,T.x=-e*p,T.y=e*(d+p),P=y.x+"|"+y.y,O=T.x+"|"+T.y,R(n,o,P,O);if("O"===r)for(let e=1;e<u;e++)T.x=-e*p,T.y=e*(d+p),f.x=e*d,f.y=e*p,P=T.x+"|"+T.y,O=f.x+"|"+f.y,R(n,o,P,O);if(o=this.IDATA.edgematch[n][2],r=this.IDATA.edgematch[n][3],r&&"A"===r)for(let e=1;e<u;e++)f.x=e*d,f.y=e*p,y.x=s-(u-e)*(d+p),y.y=i+(u-e)*d,P=f.x+"|"+f.y,O=y.x+"|"+y.y,R(n,o,P,O);for(let s=0;s<this.vertices.length;s++)P=this.vertices[s].x+"|"+this.vertices[s].y,_=n+"|"+P,_ in t||(t[_]=e++,w[P][0]>2?b[t[_]]=[-w[P][0],w[P][1],t[_]]:b[t[_]]=[A[w[P][0]],w[P][1],t[_]])}this.closestTo=b,this.vecToidx=t}calcCoeffs(){const e=this.m,t=this.n,s=Math.sqrt(3)/3,i=e*e+t*t+e*t;this.coau=(e+t)/i,this.cobu=-t/i,this.coav=-s*(e-t)/i,this.cobv=s*(2*e+t)/i}createInnerFacets(){const e=this.m,t=this.n;for(let s=0;s<t+e+1;s++)for(let e=this.min[s];e<this.max[s]+1;e++)e<this.max[s]&&e<this.max[s+1]+1&&this.innerFacets.push(["|"+e+"|"+s,"|"+e+"|"+(s+1),"|"+(e+1)+"|"+s]),s>0&&e<this.max[s-1]&&e+1<this.max[s]+1&&this.innerFacets.push(["|"+e+"|"+s,"|"+(e+1)+"|"+s,"|"+(e+1)+"|"+(s-1)])}edgeVecsABOB(){const e=this.m,t=this.n,s=new a(-t,e+t);for(let i=1;i<e+t;i++){const e=new a(this.min[i],i),t=new a(this.min[i-1],i-1),n=new a(this.min[i+1],i+1),o=e.clone(),r=t.clone(),c=n.clone();o.rotate60About(s),r.rotate60About(s),c.rotate60About(s);const h=new a(this.max[o.y],o.y),l=new a(this.max[o.y-1],o.y-1),u=new a(this.max[o.y-1]-1,o.y-1);o.x===h.x&&o.y===h.y||(o.x!==l.x?(this.vertexTypes.push([1,0,0]),this.isoVecsABOB.push([e,l,u]),this.vertexTypes.push([1,0,0]),this.isoVecsABOB.push([e,u,h])):o.y===c.y?(this.vertexTypes.push([1,1,0]),this.isoVecsABOB.push([e,t,l]),this.vertexTypes.push([1,0,1]),this.isoVecsABOB.push([e,l,n])):(this.vertexTypes.push([1,1,0]),this.isoVecsABOB.push([e,t,l]),this.vertexTypes.push([1,0,0]),this.isoVecsABOB.push([e,l,h])))}}mapABOBtoOBOA(){const e=new a(0,0);for(let t=0;t<this.isoVecsABOB.length;t++){const s=[];for(let i=0;i<3;i++)e.x=this.isoVecsABOB[t][i].x,e.y=this.isoVecsABOB[t][i].y,0===this.vertexTypes[t][i]&&e.rotateNeg120(this.m,this.n),s.push(e.clone());this.isoVecsOBOA.push(s)}}mapABOBtoBAOA(){const e=new a(0,0);for(let t=0;t<this.isoVecsABOB.length;t++){const s=[];for(let i=0;i<3;i++)e.x=this.isoVecsABOB[t][i].x,e.y=this.isoVecsABOB[t][i].y,1===this.vertexTypes[t][i]&&e.rotate120(this.m,this.n),s.push(e.clone());this.isoVecsBAOA.push(s)}}MapToFace(e,t){const s=this.IDATA.face[e],n=s[2],o=s[1],r=s[0],a=i.P.FromArray(this.IDATA.vertex[n]),c=i.P.FromArray(this.IDATA.vertex[o]),h=i.P.FromArray(this.IDATA.vertex[r]),l=c.subtract(a),u=h.subtract(a),d=l.scale(this.coau).add(u.scale(this.cobu)),p=l.scale(this.coav).add(u.scale(this.cobv)),g=[];let x,m=i.jp.Vector3[0];for(let s=0;s<this.cartesian.length;s++)m=d.scale(this.cartesian[s].x).add(p.scale(this.cartesian[s].y)).add(a),g[s]=[m.x,m.y,m.z],x=e+"|"+this.vertices[s].x+"|"+this.vertices[s].y,t.vertex[this.vecToidx[x]]=[m.x,m.y,m.z]}build(e,t){const s=new Array,i=a.Zero(),o=new a(e,t),r=new a(-t,e+t);s.push(i,o,r);for(let i=t;i<e+1;i++)for(let t=0;t<e+1-i;t++)s.push(new a(t,i));if(t>0){const i=n.R.HCF(e,t),o=e/i,r=t/i;for(let n=1;n<i;n++)s.push(new a(n*o,n*r)),s.push(new a(-n*r,n*(o+r))),s.push(new a(e-n*(o+r),t+n*o));const c=e/t;for(let i=1;i<t;i++)for(let n=0;n<i*c;n++)s.push(new a(n,i)),s.push(new a(n,i).rotate120(e,t)),s.push(new a(n,i).rotateNeg120(e,t))}s.sort(((e,t)=>e.x-t.x)),s.sort(((e,t)=>e.y-t.y));const c=new Array(e+t+1),h=new Array(e+t+1);for(let e=0;e<c.length;e++)c[e]=1/0,h[e]=-1/0;let l=0,u=0;const d=s.length;for(let e=0;e<d;e++)u=s[e].x,l=s[e].y,c[l]=Math.min(u,c[l]),h[l]=Math.max(u,h[l]);const p=(s,i)=>{const n=s.clone();return"A"===i&&n.rotateNeg120(e,t),"B"===i&&n.rotate120(e,t),n.x<0?n.y:n.x+n.y},g=[],x=[],m=[],f=[],y={},T=[];let _=-1,v=-1;for(let e=0;e<d;e++)g[e]=s[e].toCartesianOrigin(new a(0,0),.5),x[e]=p(s[e],"O"),m[e]=p(s[e],"A"),f[e]=p(s[e],"B"),x[e]===m[e]&&m[e]===f[e]?(_=3,v=x[e]):x[e]===m[e]?(_=4,v=x[e]):m[e]===f[e]?(_=5,v=m[e]):f[e]===x[e]&&(_=6,v=x[e]),x[e]<m[e]&&x[e]<f[e]&&(_=2,v=x[e]),m[e]<x[e]&&m[e]<f[e]&&(_=1,v=m[e]),f[e]<m[e]&&f[e]<x[e]&&(_=0,v=f[e]),T.push([_,v,s[e].x,s[e].y]);T.sort(((e,t)=>e[2]-t[2])),T.sort(((e,t)=>e[3]-t[3])),T.sort(((e,t)=>e[1]-t[1])),T.sort(((e,t)=>e[0]-t[0]));for(let e=0;e<T.length;e++)y[T[e][2]+"|"+T[e][3]]=[T[e][0],T[e][1],e];return this.m=e,this.n=t,this.vertices=s,this.vertByDist=y,this.cartesian=g,this.min=c,this.max=h,this}}class h{constructor(e,t,s,i){this.name=e,this.category=t,this.vertex=s,this.face=i}}class l extends h{innerToData(e,t){for(let s=0;s<t.innerFacets.length;s++)this.face.push(t.innerFacets[s].map((s=>t.vecToidx[e+s])))}mapABOBtoDATA(e,t){const s=t.IDATA.edgematch[e][0];for(let i=0;i<t.isoVecsABOB.length;i++){const n=[];for(let o=0;o<3;o++)0===t.vertexTypes[i][o]?n.push(e+"|"+t.isoVecsABOB[i][o].x+"|"+t.isoVecsABOB[i][o].y):n.push(s+"|"+t.isoVecsABOB[i][o].x+"|"+t.isoVecsABOB[i][o].y);this.face.push([t.vecToidx[n[0]],t.vecToidx[n[1]],t.vecToidx[n[2]]])}}mapOBOAtoDATA(e,t){const s=t.IDATA.edgematch[e][0];for(let i=0;i<t.isoVecsOBOA.length;i++){const n=[];for(let o=0;o<3;o++)1===t.vertexTypes[i][o]?n.push(e+"|"+t.isoVecsOBOA[i][o].x+"|"+t.isoVecsOBOA[i][o].y):n.push(s+"|"+t.isoVecsOBOA[i][o].x+"|"+t.isoVecsOBOA[i][o].y);this.face.push([t.vecToidx[n[0]],t.vecToidx[n[1]],t.vecToidx[n[2]]])}}mapBAOAtoDATA(e,t){const s=t.IDATA.edgematch[e][2];for(let i=0;i<t.isoVecsBAOA.length;i++){const n=[];for(let o=0;o<3;o++)1===t.vertexTypes[i][o]?n.push(e+"|"+t.isoVecsBAOA[i][o].x+"|"+t.isoVecsBAOA[i][o].y):n.push(s+"|"+t.isoVecsBAOA[i][o].x+"|"+t.isoVecsBAOA[i][o].y);this.face.push([t.vecToidx[n[0]],t.vecToidx[n[1]],t.vecToidx[n[2]]])}}orderData(e){const t=[];for(let e=0;e<13;e++)t[e]=[];const s=e.closestTo;for(let e=0;e<s.length;e++)s[e][0]>-1?s[e][1]>0&&t[s[e][0]].push([e,s[e][1]]):t[12].push([e,s[e][0]]);const i=[];for(let e=0;e<12;e++)i[e]=e;let n=12;for(let e=0;e<12;e++){t[e].sort(((e,t)=>e[1]-t[1]));for(let s=0;s<t[e].length;s++)i[t[e][s][0]]=n++}for(let e=0;e<t[12].length;e++)i[t[12][e][0]]=n++;for(let e=0;e<this.vertex.length;e++)this.vertex[e].push(i[e]);this.vertex.sort(((e,t)=>e[3]-t[3]));for(let e=0;e<this.vertex.length;e++)this.vertex[e].pop();for(let e=0;e<this.face.length;e++)for(let t=0;t<this.face[e].length;t++)this.face[e][t]=i[this.face[e][t]];this.sharedNodes=t[12].length,this.poleNodes=this.vertex.length-this.sharedNodes}setOrder(e,t){const s=[],i=[];let n=t.pop();i.push(n);let o=this.face[n].indexOf(e);o=(o+2)%3;let r=this.face[n][o];s.push(r);let a=0;for(;t.length>0;)n=t[a],this.face[n].indexOf(r)>-1?(o=(this.face[n].indexOf(r)+1)%3,r=this.face[n][o],s.push(r),i.push(n),t.splice(a,1),a=0):a++;return this.adjacentFaces.push(s),i}toGoldbergPolyhedronData(){const e=new h("GeoDual","Goldberg",[],[]);e.name="GD dual";const t=this.vertex.length,s=new Array(t);for(let e=0;e<t;e++)s[e]=[];for(let e=0;e<this.face.length;e++)for(let t=0;t<3;t++)s[this.face[e][t]].push(e);let i=0,n=0,o=0,r=[],a=[];this.adjacentFaces=[];for(let t=0;t<s.length;t++)e.face[t]=this.setOrder(t,s[t].concat([])),s[t].forEach((t=>{i=0,n=0,o=0,r=this.face[t];for(let e=0;e<3;e++)a=this.vertex[r[e]],i+=a[0],n+=a[1],o+=a[2];e.vertex[t]=[i/3,n/3,o/3]}));return e}static BuildGeodesicData(e){const t=new l("Geodesic-m-n","Geodesic",[[0,o.Q_,-1],[-o.Q_,1,0],[-1,0,-o.Q_],[1,0,-o.Q_],[o.Q_,1,0],[0,o.Q_,1],[-1,0,o.Q_],[-o.Q_,-1,0],[0,-o.Q_,-1],[o.Q_,-1,0],[1,0,o.Q_],[0,-o.Q_,1]],[]);e.setIndices(),e.calcCoeffs(),e.createInnerFacets(),e.edgeVecsABOB(),e.mapABOBtoOBOA(),e.mapABOBtoBAOA();for(let s=0;s<e.IDATA.face.length;s++)e.MapToFace(s,t),t.innerToData(s,e),"B"===e.IDATA.edgematch[s][1]&&t.mapABOBtoDATA(s,e),"O"===e.IDATA.edgematch[s][1]&&t.mapOBOAtoDATA(s,e),"A"===e.IDATA.edgematch[s][3]&&t.mapBAOAtoDATA(s,e);return t.orderData(e),t.vertex=t.vertex.map((function(e){const t=e[0],s=e[1],i=e[2],n=Math.sqrt(t*t+s*s+i*i);return e[0]*=1/n,e[1]*=1/n,e[2]*=1/n,e})),t}}},9044:(e,t,s)=>{s.d(t,{R:()=>c});var i=s(972),n=s(7959),o=s(3632),r=s(9859),a=s(9288);o.Kj._GoldbergMeshParser=(e,t)=>c.Parse(e,t);class c extends o.Kj{constructor(){super(...arguments),this.goldbergData={faceColors:[],faceCenters:[],faceZaxis:[],faceXaxis:[],faceYaxis:[],nbSharedFaces:0,nbUnsharedFaces:0,nbFaces:0,nbFacesAtPole:0,adjacentFaces:[]}}relatedGoldbergFace(e,t){return void 0===t?(e>this.goldbergData.nbUnsharedFaces-1&&(a.Y.Warn("Maximum number of unshared faces used"),e=this.goldbergData.nbUnsharedFaces-1),this.goldbergData.nbUnsharedFaces+e):(e>11&&(a.Y.Warn("Last pole used"),e=11),t>this.goldbergData.nbFacesAtPole-1&&(a.Y.Warn("Maximum number of faces at a pole used"),t=this.goldbergData.nbFacesAtPole-1),12+e*this.goldbergData.nbFacesAtPole+t)}_changeGoldbergFaceColors(e){for(let t=0;t<e.length;t++){const s=e[t][0],i=e[t][1],n=e[t][2];for(let e=s;e<i+1;e++)this.goldbergData.faceColors[e]=n}const t=[];for(let e=0;e<12;e++)for(let s=0;s<5;s++)t.push(this.goldbergData.faceColors[e].r,this.goldbergData.faceColors[e].g,this.goldbergData.faceColors[e].b,this.goldbergData.faceColors[e].a);for(let e=12;e<this.goldbergData.faceColors.length;e++)for(let s=0;s<6;s++)t.push(this.goldbergData.faceColors[e].r,this.goldbergData.faceColors[e].g,this.goldbergData.faceColors[e].b,this.goldbergData.faceColors[e].a);return t}setGoldbergFaceColors(e){const t=this._changeGoldbergFaceColors(e);this.setVerticesData(n.o.ColorKind,t)}updateGoldbergFaceColors(e){const t=this._changeGoldbergFaceColors(e);this.updateVerticesData(n.o.ColorKind,t)}_changeGoldbergFaceUVs(e){const t=this.getVerticesData(n.o.UVKind);for(let s=0;s<e.length;s++){const i=e[s][0],n=e[s][1],o=e[s][2],r=e[s][3],a=e[s][4],c=[],h=[];let l,u;for(let e=0;e<5;e++)l=o.x+r*Math.cos(a+e*Math.PI/2.5),u=o.y+r*Math.sin(a+e*Math.PI/2.5),l<0&&(l=0),l>1&&(l=1),c.push(l,u);for(let e=0;e<6;e++)l=o.x+r*Math.cos(a+e*Math.PI/3),u=o.y+r*Math.sin(a+e*Math.PI/3),l<0&&(l=0),l>1&&(l=1),h.push(l,u);for(let e=i;e<Math.min(12,n+1);e++)for(let s=0;s<5;s++)t[10*e+2*s]=c[2*s],t[10*e+2*s+1]=c[2*s+1];for(let e=Math.max(12,i);e<n+1;e++)for(let s=0;s<6;s++)t[12*e-24+2*s]=h[2*s],t[12*e-23+2*s]=h[2*s+1]}return t}setGoldbergFaceUVs(e){const t=this._changeGoldbergFaceUVs(e);this.setVerticesData(n.o.UVKind,t)}updateGoldbergFaceUVs(e){const t=this._changeGoldbergFaceUVs(e);this.updateVerticesData(n.o.UVKind,t)}placeOnGoldbergFaceAt(e,t,s){const n=i.P.RotationFromAxis(this.goldbergData.faceXaxis[t],this.goldbergData.faceYaxis[t],this.goldbergData.faceZaxis[t]);e.rotation=n,e.position=this.goldbergData.faceCenters[t].add(this.goldbergData.faceXaxis[t].scale(s.x)).add(this.goldbergData.faceYaxis[t].scale(s.y)).add(this.goldbergData.faceZaxis[t].scale(s.z))}serialize(e){super.serialize(e),e.type="GoldbergMesh";const t={};if(t.adjacentFaces=this.goldbergData.adjacentFaces,t.nbSharedFaces=this.goldbergData.nbSharedFaces,t.nbUnsharedFaces=this.goldbergData.nbUnsharedFaces,t.nbFaces=this.goldbergData.nbFaces,t.nbFacesAtPole=this.goldbergData.nbFacesAtPole,this.goldbergData.faceColors){t.faceColors=[];for(const e of this.goldbergData.faceColors)t.faceColors.push(e.asArray())}if(this.goldbergData.faceCenters){t.faceCenters=[];for(const e of this.goldbergData.faceCenters)t.faceCenters.push(e.asArray())}if(this.goldbergData.faceZaxis){t.faceZaxis=[];for(const e of this.goldbergData.faceZaxis)t.faceZaxis.push(e.asArray())}if(this.goldbergData.faceYaxis){t.faceYaxis=[];for(const e of this.goldbergData.faceYaxis)t.faceYaxis.push(e.asArray())}if(this.goldbergData.faceXaxis){t.faceXaxis=[];for(const e of this.goldbergData.faceXaxis)t.faceXaxis.push(e.asArray())}e.goldbergData=t}static Parse(e,t){const s=e.goldbergData;s.faceColors=s.faceColors.map((e=>r.HE.FromArray(e))),s.faceCenters=s.faceCenters.map((e=>i.P.FromArray(e))),s.faceZaxis=s.faceZaxis.map((e=>i.P.FromArray(e))),s.faceXaxis=s.faceXaxis.map((e=>i.P.FromArray(e))),s.faceYaxis=s.faceYaxis.map((e=>i.P.FromArray(e)));const n=new c(e.name,t);return n.goldbergData=s,n}}},9823:(e,t,s)=>{s.d(t,{V:()=>w});var i=s(7079),n=s(8128),o=s(8110),r=s(6435),a=s(6765),c=s(6565),h=s(2005),l=s(9945),u=s(1528),d=s(7700),p=s(9590),g=s(6755),x=s(6654),m=s(1694),f=s(307),y=s(6540),T=s(3501),_=s(6377),v=s(1724),P=s(7966),O=s(9609),A=s(3546),b=s(133);const w={CreateBox:o.NR,CreateTiledBox:r.cQ,CreateSphere:a.Qk,CreateDisc:n.uH,CreateIcoSphere:_.Au,CreateRibbon:i.LY,CreateCylinder:c.wf,CreateTorus:h.eu,CreateTorusKnot:l.eB,CreateLineSystem:u.xW,CreateLines:u.nL,CreateDashedLines:u.Gz,ExtrudeShape:p.Gc,ExtrudeShapeCustom:p.bC,CreateLathe:g.O,CreateTiledPlane:m.KA,CreatePlane:x.pT,CreateGround:f.$6,CreateTiledGround:f.DG,CreateGroundFromHeightMap:f.W,CreatePolygon:d.a4,ExtrudePolygon:d.Yo,CreateTube:y._,CreatePolyhedron:T.sh,CreateGeodesic:O.M,CreateGoldberg:A._,CreateDecal:v.t,CreateCapsule:P.iz,CreateText:b.p}},540:(e,t,s)=>{s.d(t,{m:()=>p,z:()=>g});var i=s(9288),n=s(972),o=s(7959),r=s(3632),a=s(4517),c=s(1021),h=s(7786),l=s(78);class u extends n.FM{constructor(e,t){super(e.x,e.y),this.index=t}}class d{constructor(){this.elements=new Array}add(e){const t=new Array;return e.forEach((e=>{const s=new u(e,this.elements.length);t.push(s),this.elements.push(s)})),t}computeBounds(){const e=new n.FM(this.elements[0].x,this.elements[0].y),t=new n.FM(this.elements[0].x,this.elements[0].y);return this.elements.forEach((s=>{s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y)})),{min:e,max:t,width:t.x-e.x,height:t.y-e.y}}}class p{static Rectangle(e,t,s,i){return[new n.FM(e,t),new n.FM(s,t),new n.FM(s,i),new n.FM(e,i)]}static Circle(e,t=0,s=0,i=32){const o=new Array;let r=0;const a=2*Math.PI/i;for(let c=0;c<i;c++)o.push(new n.FM(t+Math.cos(r)*e,s+Math.sin(r)*e)),r-=a;return o}static Parse(e){const t=e.split(/[^-+eE.\d]+/).map(parseFloat).filter((e=>!isNaN(e)));let s;const i=[];for(s=0;s<(2147483646&t.length);s+=2)i.push(new n.FM(t[s],t[s+1]));return i}static StartingAt(e,t){return c.ZZ.StartingAt(e,t)}}class g{_addToepoint(e){for(const t of e)this._epoints.push(t.x,t.y)}constructor(e,t,s,n=earcut){let o;this._points=new d,this._outlinepoints=new d,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this.bjsEarcut=n,this._name=e,this._scene=s||l.l.LastCreatedScene,o=t instanceof c.ZZ?t.getPoints():t,this._addToepoint(o),this._points.add(o),this._outlinepoints.add(o),void 0===this.bjsEarcut&&i.Y.Warn("Earcut was not found, the polygon will not be built.")}addHole(e){this._points.add(e);const t=new d;return t.add(e),this._holes.push(t),this._eholes.push(this._epoints.length/2),this._addToepoint(e),this}build(e=!1,t=0,s=2){const i=new r.Kj(this._name,this._scene),n=this.buildVertexData(t,s);return i.setVerticesData(o.o.PositionKind,n.positions,e),i.setVerticesData(o.o.NormalKind,n.normals,e),i.setVerticesData(o.o.UVKind,n.uvs,e),i.setIndices(n.indices),i}buildVertexData(e=0,t=2){const s=new a.x,i=new Array,n=new Array,o=new Array,r=this._points.computeBounds();this._points.elements.forEach((e=>{i.push(0,1,0),n.push(e.x,0,e.y),o.push((e.x-r.min.x)/r.width,(e.y-r.min.y)/r.height)}));const c=new Array,h=this.bjsEarcut(this._epoints,this._eholes,2);for(let e=0;e<h.length;e++)c.push(h[e]);if(e>0){const s=n.length/3;this._points.elements.forEach((t=>{i.push(0,-1,0),n.push(t.x,-e,t.y),o.push(1-(t.x-r.min.x)/r.width,1-(t.y-r.min.y)/r.height)}));const a=c.length;for(let e=0;e<a;e+=3){const t=c[e+0],i=c[e+1],n=c[e+2];c.push(n+s),c.push(i+s),c.push(t+s)}this._addSide(n,i,o,c,r,this._outlinepoints,e,!1,t),this._holes.forEach((s=>{this._addSide(n,i,o,c,r,s,e,!0,t)}))}return s.indices=c,s.positions=n,s.normals=i,s.uvs=o,s}_addSide(e,t,s,i,o,r,a,c,l){let u=e.length/3,d=0;for(let p=0;p<r.elements.length;p++){const g=r.elements[p],x=r.elements[(p+1)%r.elements.length];e.push(g.x,0,g.y),e.push(g.x,-a,g.y),e.push(x.x,0,x.y),e.push(x.x,-a,x.y);const m=r.elements[(p+r.elements.length-1)%r.elements.length],f=r.elements[(p+2)%r.elements.length];let y=new n.P(-(x.y-g.y),0,x.x-g.x),T=new n.P(-(g.y-m.y),0,g.x-m.x),_=new n.P(-(f.y-x.y),0,f.x-x.x);c||(y=y.scale(-1),T=T.scale(-1),_=_.scale(-1));const v=y.normalizeToNew();let P=T.normalizeToNew(),O=_.normalizeToNew();const A=n.P.Dot(P,v);P=A>l?A<h.kn-1?new n.P(g.x,0,g.y).subtract(new n.P(x.x,0,x.y)).normalize():T.add(y).normalize():v;const b=n.P.Dot(_,y);O=b>l?b<h.kn-1?new n.P(x.x,0,x.y).subtract(new n.P(g.x,0,g.y)).normalize():_.add(y).normalize():v,s.push(d/o.width,0),s.push(d/o.width,1),d+=y.length(),s.push(d/o.width,0),s.push(d/o.width,1),t.push(P.x,P.y,P.z),t.push(P.x,P.y,P.z),t.push(O.x,O.y,O.z),t.push(O.x,O.y,O.z),c?(i.push(u),i.push(u+2),i.push(u+1),i.push(u+1),i.push(u+2),i.push(u+3)):(i.push(u),i.push(u+1),i.push(u+2),i.push(u+1),i.push(u+3),i.push(u+2)),u+=4}}}},3852:(e,t,s)=>{s.d(t,{P:()=>h,n:()=>l});var i=s(9288),n=s(4517),o=s(3632),r=s(7417),a=s(4673),c=s(7959);class h{constructor(e=Recast){this.bjsRECAST={},this.name="RecastJSPlugin",this._maximumSubStepCount=10,this._timeStep=1/60,this._timeFactor=1,this._worker=null,"function"==typeof e?i.Y.Error("RecastJS is not ready. Please make sure you await Recast() before using the plugin."):this.bjsRECAST=e,this.isSupported()?(this.setTimeStep(),this._tempVec1=new this.bjsRECAST.Vec3,this._tempVec2=new this.bjsRECAST.Vec3):i.Y.Error("RecastJS is not available. Please make sure you included the js file.")}setWorkerURL(e){return!(!window||!window.Worker||(this._worker=new Worker(e),0))}setTimeStep(e=1/60){this._timeStep=e}getTimeStep(){return this._timeStep}setMaximumSubStepCount(e=10){this._maximumSubStepCount=e}getMaximumSubStepCount(){return this._maximumSubStepCount}set timeFactor(e){this._timeFactor=Math.max(e,0)}get timeFactor(){return this._timeFactor}createNavMesh(e,t,s){let i,n,o;this._worker&&!s?console.warn("A worker is avaible but no completion callback. Defaulting to blocking navmesh creation"):!this._worker&&s&&console.warn("A completion callback is avaible but no worker. Defaulting to blocking navmesh creation"),this.navMesh=new this.bjsRECAST.NavMesh;const a=[],h=[];let l=0;for(i=0;i<e.length;i++)if(e[i]){const t=e[i],s=t.getIndices();if(!s)continue;const u=t.getVerticesData(c.o.PositionKind,!1,!1);if(!u)continue;const d=[],p=t.computeWorldMatrix(!0);if(t.hasThinInstances){const e=t.thinInstanceGetWorldMatrices();for(let t=0;t<e.length;t++){const s=new r.y3;e[t].multiplyToRef(p,s),d.push(s)}}else d.push(p);for(let e=0;e<d.length;e++){const t=d[e];for(n=0;n<s.length;n++)a.push(s[n]+l);const i=r.P.Zero(),c=r.P.Zero();for(o=0;o<u.length;o+=3)r.P.FromArrayToRef(u,o,c),r.P.TransformCoordinatesToRef(c,t,i),h.push(i.x,i.y,i.z);l+=u.length/3}}if(this._worker&&s)this._worker.postMessage([h,l,a,a.length,t]),this._worker.onmessage=function(e){s(e.data)};else{const e=new this.bjsRECAST.rcConfig;e.cs=t.cs,e.ch=t.ch,e.borderSize=t.borderSize?t.borderSize:0,e.tileSize=t.tileSize?t.tileSize:0,e.walkableSlopeAngle=t.walkableSlopeAngle,e.walkableHeight=t.walkableHeight,e.walkableClimb=t.walkableClimb,e.walkableRadius=t.walkableRadius,e.maxEdgeLen=t.maxEdgeLen,e.maxSimplificationError=t.maxSimplificationError,e.minRegionArea=t.minRegionArea,e.mergeRegionArea=t.mergeRegionArea,e.maxVertsPerPoly=t.maxVertsPerPoly,e.detailSampleDist=t.detailSampleDist,e.detailSampleMaxError=t.detailSampleMaxError,this.navMesh.build(h,l,a,a.length,e)}}createDebugNavMesh(e){let t,s;const i=this.navMesh.getDebugNavMesh(),r=i.getTriangleCount(),a=[],c=[];for(t=0;t<3*r;t++)a.push(t);for(t=0;t<r;t++)for(s=0;s<3;s++){const e=i.getTriangle(t).getPoint(s);c.push(e.x,e.y,e.z)}const h=new o.Kj("NavMeshDebug",e),l=new n.x;return l.indices=a,l.positions=c,l.applyToMesh(h,!1),h}getClosestPoint(e){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const t=this.navMesh.getClosestPoint(this._tempVec1);return new r.P(t.x,t.y,t.z)}getClosestPointToRef(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const s=this.navMesh.getClosestPoint(this._tempVec1);t.set(s.x,s.y,s.z)}getRandomPointAround(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const s=this.navMesh.getRandomPointAround(this._tempVec1,t);return new r.P(s.x,s.y,s.z)}getRandomPointAroundToRef(e,t,s){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const i=this.navMesh.getRandomPointAround(this._tempVec1,t);s.set(i.x,i.y,i.z)}moveAlong(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;const s=this.navMesh.moveAlong(this._tempVec1,this._tempVec2);return new r.P(s.x,s.y,s.z)}moveAlongToRef(e,t,s){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;const i=this.navMesh.moveAlong(this._tempVec1,this._tempVec2);s.set(i.x,i.y,i.z)}computePath(e,t){let s;this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;const i=this.navMesh.computePath(this._tempVec1,this._tempVec2),n=i.getPointCount(),o=[];for(s=0;s<n;s++){const e=i.getPoint(s);o.push(new r.P(e.x,e.y,e.z))}return o}createCrowd(e,t,s){return new l(this,e,t,s)}setDefaultQueryExtent(e){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.setDefaultQueryExtent(this._tempVec1)}getDefaultQueryExtent(){const e=this.navMesh.getDefaultQueryExtent();return new r.P(e.x,e.y,e.z)}buildFromNavmeshData(e){const t=e.length*e.BYTES_PER_ELEMENT,s=this.bjsRECAST._malloc(t),i=new Uint8Array(this.bjsRECAST.HEAPU8.buffer,s,t);i.set(e);const n=new this.bjsRECAST.NavmeshData;n.dataPointer=i.byteOffset,n.size=e.length,this.navMesh=new this.bjsRECAST.NavMesh,this.navMesh.buildFromNavmeshData(n),this.bjsRECAST._free(i.byteOffset)}getNavmeshData(){const e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.bjsRECAST.HEAPU8.buffer,e.dataPointer,e.size),s=new Uint8Array(e.size);return s.set(t),this.navMesh.freeNavmeshData(e),s}getDefaultQueryExtentToRef(e){const t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){}addCylinderObstacle(e,t,s){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.addCylinderObstacle(this._tempVec1,t,s)}addBoxObstacle(e,t,s){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z,this.navMesh.addBoxObstacle(this._tempVec1,this._tempVec2,s)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return void 0!==this.bjsRECAST}}class l{constructor(e,t,s,i){this.recastCrowd={},this.transforms=new Array,this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this._onBeforeAnimationsObserver=null,this.onReachTargetObservable=new a.y$,this.bjsRECASTPlugin=e,this.recastCrowd=new this.bjsRECASTPlugin.bjsRECAST.Crowd(t,s,this.bjsRECASTPlugin.navMesh.getNavMesh()),this._scene=i,this._onBeforeAnimationsObserver=i.onBeforeAnimationsObservable.add((()=>{this.update(.001*i.getEngine().getDeltaTime()*e.timeFactor)}))}addAgent(e,t,s){const i=new this.bjsRECASTPlugin.bjsRECAST.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;const n=this.recastCrowd.addAgent(new this.bjsRECASTPlugin.bjsRECAST.Vec3(e.x,e.y,e.z),i);return this.transforms.push(s),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new r.P(0,0,0)),n}getAgentPosition(e){const t=this.recastCrowd.getAgentPosition(e);return new r.P(t.x,t.y,t.z)}getAgentPositionToRef(e,t){const s=this.recastCrowd.getAgentPosition(e);t.set(s.x,s.y,s.z)}getAgentVelocity(e){const t=this.recastCrowd.getAgentVelocity(e);return new r.P(t.x,t.y,t.z)}getAgentVelocityToRef(e,t){const s=this.recastCrowd.getAgentVelocity(e);t.set(s.x,s.y,s.z)}getAgentNextTargetPath(e){const t=this.recastCrowd.getAgentNextTargetPath(e);return new r.P(t.x,t.y,t.z)}getAgentNextTargetPathToRef(e,t){const s=this.recastCrowd.getAgentNextTargetPath(e);t.set(s.x,s.y,s.z)}getAgentState(e){return this.recastCrowd.getAgentState(e)}overOffmeshConnection(e){return this.recastCrowd.overOffmeshConnection(e)}agentGoto(e,t){this.recastCrowd.agentGoto(e,new this.bjsRECASTPlugin.bjsRECAST.Vec3(t.x,t.y,t.z));const s=this.agents.indexOf(e);s>-1&&(this._agentDestinationArmed[s]=!0,this._agentDestination[s].set(t.x,t.y,t.z))}agentTeleport(e,t){this.recastCrowd.agentTeleport(e,new this.bjsRECASTPlugin.bjsRECAST.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){const s=this.recastCrowd.getAgentParameters(e);void 0!==t.radius&&(s.radius=t.radius),void 0!==t.height&&(s.height=t.height),void 0!==t.maxAcceleration&&(s.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(s.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(s.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(s.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(s.separationWeight=t.separationWeight),this.recastCrowd.setAgentParameters(e,s)}removeAgent(e){this.recastCrowd.removeAgent(e);const t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.bjsRECASTPlugin.navMesh.update(),e<=r.kn)return;const t=this.bjsRECASTPlugin.getTimeStep(),s=this.bjsRECASTPlugin.getMaximumSubStepCount();if(t<=r.kn)this.recastCrowd.update(e);else{let i=Math.floor(e/t);s&&i>s&&(i=s),i<1&&(i=1);const n=e/i;for(let e=0;e<i;e++)this.recastCrowd.update(n)}for(let e=0;e<this.agents.length;e++){const t=this.agents[e],s=this.getAgentPosition(t);if(this.transforms[e].position=s,this._agentDestinationArmed[e]){const i=s.x-this._agentDestination[e].x,n=s.z-this._agentDestination[e].z,o=this.reachRadii[e],r=this._agentDestination[e].y-this.reachRadii[e],a=this._agentDestination[e].y+this.reachRadii[e],c=i*i+n*n;s.y>r&&s.y<a&&c<o*o&&(this.onReachTargetObservable.notifyObservers({agentIndex:t,destination:this._agentDestination[e]}),this._agentDestinationArmed[e]=!1)}}}setDefaultQueryExtent(e){const t=new this.bjsRECASTPlugin.bjsRECAST.Vec3(e.x,e.y,e.z);this.recastCrowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){const e=this.recastCrowd.getDefaultQueryExtent();return new r.P(e.x,e.y,e.z)}getDefaultQueryExtentToRef(e){const t=this.recastCrowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t;const s=this.recastCrowd.getCorners(e),i=s.getPointCount(),n=[];for(t=0;t<i;t++){const e=s.getPoint(t);n.push(new r.P(e.x,e.y,e.z))}return n}dispose(){this.recastCrowd.destroy(),this._scene.onBeforeAnimationsObservable.remove(this._onBeforeAnimationsObserver),this._onBeforeAnimationsObserver=null,this.onReachTargetObservable.clear()}}}}]);
//# sourceMappingURL=369.babylonBundle.js.map