"use strict";(self.webpackChunkbabylonjs_typescript_webpack_template=self.webpackChunkbabylonjs_typescript_webpack_template||[]).push([[981],{77966:(e,t,s)=>{s.d(t,{KY:()=>c,VF:()=>a,iz:()=>h});var n=s(74517),i=s(90972),o=s(33632),r=s(53027);function a(e={subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6}){const t=0|Math.max(e.subdivisions?e.subdivisions:2,1),s=0|Math.max(e.tessellation?e.tessellation:16,3),o=Math.max(e.height?e.height:1,0),a=Math.max(e.radius?e.radius:.25,0),h=0|Math.max(e.capSubdivisions?e.capSubdivisions:6,1),c=s,l=t,u=Math.max(e.radiusTop?e.radiusTop:a,0),d=Math.max(e.radiusBottom?e.radiusBottom:a,0),p=o-(u+d),x=2*Math.PI,m=Math.max(e.topCapSubdivisions?e.topCapSubdivisions:h,1),g=Math.max(e.bottomCapSubdivisions?e.bottomCapSubdivisions:h,1),y=Math.acos((d-u)/o);let f=[];const O=[],A=[],v=[];let T=0;const _=[],P=.5*p,w=.5*Math.PI;let I,b;const E=i.P.Zero(),C=i.P.Zero(),R=Math.cos(y),M=Math.sin(y),z=new i.FM(u*M,P+u*R).subtract(new i.FM(d*M,d*R-P)).length(),F=u*y+z+d*(w-y);let j=0;for(b=0;b<=m;b++){const e=[],t=w-y*(b/m);j+=u*y/m;const s=Math.cos(t),n=Math.sin(t),i=s*u;for(I=0;I<=c;I++){const t=I/c,o=t*x+0,a=Math.sin(o),h=Math.cos(o);C.x=i*a,C.y=P+n*u,C.z=i*h,O.push(C.x,C.y,C.z),E.set(s*a,n,s*h),A.push(E.x,E.y,E.z),v.push(t,r.e.UseOpenGLOrientationForUV?j/F:1-j/F),e.push(T),T++}_.push(e)}const V=o-u-d+R*u-R*d,D=M*(d-u)/V;for(b=1;b<=l;b++){const e=[];j+=z/l;const t=M*(b*(d-u)/l+u);for(I=0;I<=c;I++){const s=I/c,n=s*x+0,i=Math.sin(n),o=Math.cos(n);C.x=t*i,C.y=P+R*u-b*V/l,C.z=t*o,O.push(C.x,C.y,C.z),E.set(i,D,o).normalize(),A.push(E.x,E.y,E.z),v.push(s,r.e.UseOpenGLOrientationForUV?j/F:1-j/F),e.push(T),T++}_.push(e)}for(b=1;b<=g;b++){const e=[],t=w-y-(Math.PI-y)*(b/g);j+=d*y/g;const s=Math.cos(t),n=Math.sin(t),i=s*d;for(I=0;I<=c;I++){const t=I/c,o=t*x+0,a=Math.sin(o),h=Math.cos(o);C.x=i*a,C.y=n*d-P,C.z=i*h,O.push(C.x,C.y,C.z),E.set(s*a,n,s*h),A.push(E.x,E.y,E.z),v.push(t,r.e.UseOpenGLOrientationForUV?j/F:1-j/F),e.push(T),T++}_.push(e)}for(I=0;I<c;I++)for(b=0;b<m+l+g;b++){const e=_[b][I],t=_[b+1][I],s=_[b+1][I+1],n=_[b][I+1];f.push(e),f.push(t),f.push(n),f.push(t),f.push(s),f.push(n)}if(f=f.reverse(),e.orientation&&!e.orientation.equals(i.P.Up())){const t=new i.y3;e.orientation.clone().scale(.5*Math.PI).cross(i.P.Up()).toQuaternion().toRotationMatrix(t);const s=i.P.Zero();for(let e=0;e<O.length;e+=3)s.set(O[e],O[e+1],O[e+2]),i.P.TransformCoordinatesToRef(s.clone(),t,s),O[e]=s.x,O[e+1]=s.y,O[e+2]=s.z}const L=new n.x;return L.positions=O,L.normals=A,L.uvs=v,L.indices=f,L}function h(e,t={orientation:i.P.Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6,updatable:!1},s=null){const n=new o.Kj(e,s);return a(t).applyToMesh(n,t.updatable),n}const c={CreateCapsule:h};o.Kj.CreateCapsule=(e,t,s)=>h(e,t,s),n.x.CreateCapsule=a},76565:(e,t,s)=>{s.d(t,{H6:()=>d,wf:()=>u,zD:()=>l});var n=s(90972),i=s(89859),o=s(33632),r=s(74517),a=s(8714),h=s(730),c=s(53027);function l(e){const t=e.height||2;let s=0===e.diameterTop?0:e.diameterTop||e.diameter||1,a=0===e.diameterBottom?0:e.diameterBottom||e.diameter||1;s=s||1e-5,a=a||1e-5;const l=0|(e.tessellation||24),u=0|(e.subdivisions||1),d=!!e.hasRings,p=!!e.enclose,x=0===e.cap?0:e.cap||o.Kj.CAP_ALL,m=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,g=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE,y=e.faceUV||new Array(3),f=e.faceColors,O=2+(1+(1!==m&&p?2:0))*(d?u:1);let A;for(A=0;A<O;A++)f&&void 0===f[A]&&(f[A]=new i.HE(1,1,1,1));for(A=0;A<O;A++)y&&void 0===y[A]&&(y[A]=new n.Lt(0,0,1,1));const v=new Array,T=new Array,_=new Array,P=new Array,w=new Array,I=2*Math.PI*m/l;let b,E,C;const R=(a-s)/2/t,M=n.P.Zero(),z=n.P.Zero(),F=n.P.Zero(),j=n.P.Zero(),V=n.P.Zero(),D=h.RD.Y;let L,K,S,B=1,N=1,U=0,W=0;for(L=0;L<=u;L++)for(E=L/u,C=(E*(s-a)+a)/2,B=d&&0!==L&&L!==u?2:1,S=0;S<B;S++){for(d&&(N+=S),p&&(N+=2*S),K=0;K<=l;K++)b=K*I,M.x=Math.cos(-b)*C,M.y=-t/2+E*t,M.z=Math.sin(-b)*C,0===s&&L===u?(z.x=_[_.length-3*(l+1)],z.y=_[_.length-3*(l+1)+1],z.z=_[_.length-3*(l+1)+2]):(z.x=M.x,z.z=M.z,z.y=Math.sqrt(z.x*z.x+z.z*z.z)*R,z.normalize()),0===K&&(F.copyFrom(M),j.copyFrom(z)),T.push(M.x,M.y,M.z),_.push(z.x,z.y,z.z),W=d?U!==N?y[N].y:y[N].w:y[N].y+(y[N].w-y[N].y)*E,P.push(y[N].x+(y[N].z-y[N].x)*K/l,c.e.UseOpenGLOrientationForUV?1-W:W),f&&w.push(f[N].r,f[N].g,f[N].b,f[N].a);1!==m&&p&&(T.push(M.x,M.y,M.z),T.push(0,M.y,0),T.push(0,M.y,0),T.push(F.x,F.y,F.z),n.P.CrossToRef(D,z,V),V.normalize(),_.push(V.x,V.y,V.z,V.x,V.y,V.z),n.P.CrossToRef(j,D,V),V.normalize(),_.push(V.x,V.y,V.z,V.x,V.y,V.z),W=d?U!==N?y[N+1].y:y[N+1].w:y[N+1].y+(y[N+1].w-y[N+1].y)*E,P.push(y[N+1].x,c.e.UseOpenGLOrientationForUV?1-W:W),P.push(y[N+1].z,c.e.UseOpenGLOrientationForUV?1-W:W),W=d?U!==N?y[N+2].y:y[N+2].w:y[N+2].y+(y[N+2].w-y[N+2].y)*E,P.push(y[N+2].x,c.e.UseOpenGLOrientationForUV?1-W:W),P.push(y[N+2].z,c.e.UseOpenGLOrientationForUV?1-W:W),f&&(w.push(f[N+1].r,f[N+1].g,f[N+1].b,f[N+1].a),w.push(f[N+1].r,f[N+1].g,f[N+1].b,f[N+1].a),w.push(f[N+2].r,f[N+2].g,f[N+2].b,f[N+2].a),w.push(f[N+2].r,f[N+2].g,f[N+2].b,f[N+2].a))),U!==N&&(U=N)}const k=1!==m&&p?l+4:l;for(L=0,N=0;N<u;N++){let e=0,t=0,s=0,n=0;for(K=0;K<l;K++)e=L*(k+1)+K,t=(L+1)*(k+1)+K,s=L*(k+1)+(K+1),n=(L+1)*(k+1)+(K+1),v.push(e,t,s),v.push(n,s,t);1!==m&&p&&(v.push(e+2,t+2,s+2),v.push(n+2,s+2,t+2),v.push(e+4,t+4,s+4),v.push(n+4,s+4,t+4)),L=d?L+2:L+1}const G=e=>{const i=e?s/2:a/2;if(0===i)return;let o,r,h;const u=e?y[O-1]:y[0];let d=null;f&&(d=e?f[O-1]:f[0]);const p=T.length/3,x=e?t/2:-t/2,g=new n.P(0,x,0);T.push(g.x,g.y,g.z),_.push(0,e?1:-1,0);const A=u.y+.5*(u.w-u.y);P.push(u.x+.5*(u.z-u.x),c.e.UseOpenGLOrientationForUV?1-A:A),d&&w.push(d.r,d.g,d.b,d.a);const I=new n.FM(.5,.5);for(h=0;h<=l;h++){o=2*Math.PI*h*m/l;const t=Math.cos(-o),s=Math.sin(-o);r=new n.P(t*i,x,s*i);const a=new n.FM(t*I.x+.5,s*I.y+.5);T.push(r.x,r.y,r.z),_.push(0,e?1:-1,0);const p=u.y+(u.w-u.y)*a.y;P.push(u.x+(u.z-u.x)*a.x,c.e.UseOpenGLOrientationForUV?1-p:p),d&&w.push(d.r,d.g,d.b,d.a)}for(h=0;h<l;h++)e?(v.push(p),v.push(p+(h+2)),v.push(p+(h+1))):(v.push(p),v.push(p+(h+1)),v.push(p+(h+2)))};x!==o.Kj.CAP_START&&x!==o.Kj.CAP_ALL||G(!1),x!==o.Kj.CAP_END&&x!==o.Kj.CAP_ALL||G(!0),r.x._ComputeSides(g,T,v,_,P,e.frontUVs,e.backUVs);const Q=new r.x;return Q.indices=v,Q.positions=T,Q.normals=_,Q.uvs=P,f&&(Q.colors=w),Q}function u(e,t={},s){const n=new o.Kj(e,s);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,l(t).applyToMesh(n,t.updatable),n}const d={CreateCylinder:u};r.x.CreateCylinder=l,o.Kj.CreateCylinder=(e,t,s,n,i,r,h,c,l)=>(void 0!==h&&h instanceof a.x||(void 0!==h&&(l=c||o.Kj.DEFAULTSIDE,c=h),h=r,r=1),u(e,{height:t,diameterTop:s,diameterBottom:n,tessellation:i,subdivisions:r,sideOrientation:l,updatable:c},h))},21724:(e,t,s)=>{s.d(t,{l:()=>y,t:()=>g});var n=s(90972),i=s(31865),o=s(33632),r=s(37959),a=s(74517),h=s(53027);const c=new n.P(1,0,0),l=new n.P(-1,0,0),u=new n.P(0,1,0),d=new n.P(0,-1,0),p=new n.P(0,0,1),x=new n.P(0,0,-1);class m{constructor(e=n.P.Zero(),t=n.P.Up(),s=n.FM.Zero(),i=0,o=0,r=null,a=null,h=null,c=null){this.position=e,this.normal=t,this.uv=s,this.vertexIdx=i,this.vertexIdxForBones=o,this.localPositionOverride=r,this.localNormalOverride=a,this.matrixIndicesOverride=h,this.matrixWeightsOverride=c}clone(){var e,t,s,n;return new m(this.position.clone(),this.normal.clone(),this.uv.clone(),this.vertexIdx,this.vertexIdxForBones,null===(e=this.localPositionOverride)||void 0===e?void 0:e.slice(),null===(t=this.localNormalOverride)||void 0===t?void 0:t.slice(),null===(s=this.matrixIndicesOverride)||void 0===s?void 0:s.slice(),null===(n=this.matrixWeightsOverride)||void 0===n?void 0:n.slice())}}function g(e,t,s){var g,y,f,O;const A=!!t.skeleton,v=s.localMode||A,T=null!==t.overrideMaterialSideOrientation&&void 0!==t.overrideMaterialSideOrientation,_=t.getIndices(),P=A?t.getPositionData(!0,!0):t.getVerticesData(r.o.PositionKind),w=A?t.getNormalsData(!0,!0):t.getVerticesData(r.o.NormalKind),I=v?A?t.getVerticesData(r.o.PositionKind):P:null,b=v?A?t.getVerticesData(r.o.NormalKind):w:null,E=t.getVerticesData(r.o.UVKind),C=A?t.getVerticesData(r.o.MatricesIndicesKind):null,R=A?t.getVerticesData(r.o.MatricesWeightsKind):null,M=A?t.getVerticesData(r.o.MatricesIndicesExtraKind):null,z=A?t.getVerticesData(r.o.MatricesWeightsExtraKind):null,F=s.position||n.P.Zero();let j=s.normal||n.P.Up();const V=s.size||n.P.One(),D=s.angle||0;if(!j){const e=new n.P(0,0,1),s=t.getScene().activeCamera,i=n.P.TransformCoordinates(e,s.getWorldMatrix());j=s.globalPosition.subtract(i)}const L=-Math.atan2(j.z,j.x)-Math.PI/2,K=Math.sqrt(j.x*j.x+j.z*j.z),S=Math.atan2(j.y,K),B=new a.x;B.indices=[],B.positions=[],B.normals=[],B.uvs=[],B.matricesIndices=A?[]:null,B.matricesWeights=A?[]:null,B.matricesIndicesExtra=M?[]:null,B.matricesWeightsExtra=z?[]:null;let N=0;const U=(e,t)=>{const i=new m;if(!_||!P||!w)return i;const o=_[e];if(i.vertexIdx=3*o,i.vertexIdxForBones=4*o,i.position=new n.P(P[3*o],P[3*o+1],P[3*o+2]),n.P.TransformCoordinatesToRef(i.position,t,i.position),i.normal=new n.P(w[3*o],w[3*o+1],w[3*o+2]),n.P.TransformNormalToRef(i.normal,t,i.normal),s.captureUVS&&E){const e=E[2*o+1];i.uv=new n.FM(E[2*o],h.e.UseOpenGLOrientationForUV?1-e:e)}return i},W=[0,0,0,0],k=(e,t)=>{if(0===e.length)return e;const s=.5*Math.abs(n.P.Dot(V,t)),o=(e,t,s,n)=>{for(let i=0;i<n;++i)if(e[s+i]===t)return s+i;return-1},r=(e,r)=>{var a,h,c,l,u,d,p,x,g,y,f,O,A,v,T,_;const P=n.P.GetClipFactor(e.position,r.position,t,s);let w=W,E=W;if(C&&R){const t=e.matrixIndicesOverride?0:e.vertexIdxForBones,s=null!==(a=e.matrixIndicesOverride)&&void 0!==a?a:C,n=null!==(h=e.matrixWeightsOverride)&&void 0!==h?h:R,u=r.matrixIndicesOverride?0:r.vertexIdxForBones,d=null!==(c=r.matrixIndicesOverride)&&void 0!==c?c:C,p=null!==(l=r.matrixWeightsOverride)&&void 0!==l?l:R;w=[0,0,0,0],E=[0,0,0,0];let x=0;for(let e=0;e<4;++e)if(n[t+e]>0){const r=o(d,s[t+e],u,4);w[x]=s[t+e],E[x]=i.R.Lerp(n[t+e],r>=0?p[r]:0,P),x++}for(let e=0;e<4&&x<4;++e){const n=d[u+e];-1===o(s,n,t,4)&&(w[x]=n,E[x]=i.R.Lerp(0,p[u+e],P),x++)}const m=E[0]+E[1]+E[2]+E[3];E[0]/=m,E[1]/=m,E[2]/=m,E[3]/=m}const M=e.localPositionOverride?e.localPositionOverride[0]:null!==(u=null==I?void 0:I[e.vertexIdx])&&void 0!==u?u:0,z=e.localPositionOverride?e.localPositionOverride[1]:null!==(d=null==I?void 0:I[e.vertexIdx+1])&&void 0!==d?d:0,F=e.localPositionOverride?e.localPositionOverride[2]:null!==(p=null==I?void 0:I[e.vertexIdx+2])&&void 0!==p?p:0,j=r.localPositionOverride?r.localPositionOverride[0]:null!==(x=null==I?void 0:I[r.vertexIdx])&&void 0!==x?x:0,V=r.localPositionOverride?r.localPositionOverride[1]:null!==(g=null==I?void 0:I[r.vertexIdx+1])&&void 0!==g?g:0,D=r.localPositionOverride?r.localPositionOverride[2]:null!==(y=null==I?void 0:I[r.vertexIdx+2])&&void 0!==y?y:0,L=e.localNormalOverride?e.localNormalOverride[0]:null!==(f=null==b?void 0:b[e.vertexIdx])&&void 0!==f?f:0,K=e.localNormalOverride?e.localNormalOverride[1]:null!==(O=null==b?void 0:b[e.vertexIdx+1])&&void 0!==O?O:0,S=e.localNormalOverride?e.localNormalOverride[2]:null!==(A=null==b?void 0:b[e.vertexIdx+2])&&void 0!==A?A:0,B=L+((r.localNormalOverride?r.localNormalOverride[0]:null!==(v=null==b?void 0:b[r.vertexIdx])&&void 0!==v?v:0)-L)*P,N=K+((r.localNormalOverride?r.localNormalOverride[1]:null!==(T=null==b?void 0:b[r.vertexIdx+1])&&void 0!==T?T:0)-K)*P,U=S+((r.localNormalOverride?r.localNormalOverride[2]:null!==(_=null==b?void 0:b[r.vertexIdx+2])&&void 0!==_?_:0)-S)*P,k=Math.sqrt(B*B+N*N+U*U);return new m(n.P.Lerp(e.position,r.position,P),n.P.Lerp(e.normal,r.normal,P).normalize(),n.FM.Lerp(e.uv,r.uv,P),-1,-1,I?[M+(j-M)*P,z+(V-z)*P,F+(D-F)*P]:null,b?[B/k,N/k,U/k]:null,w,E)};let a=null;e.length>3&&(a=new Array);for(let i=0;i<e.length;i+=3){let o=0,h=null,c=null,l=null,u=null;const d=n.P.Dot(e[i].position,t)-s>0,p=n.P.Dot(e[i+1].position,t)-s>0,x=n.P.Dot(e[i+2].position,t)-s>0;switch(o=(d?1:0)+(p?1:0)+(x?1:0),o){case 0:e.length>3?(a.push(e[i]),a.push(e[i+1]),a.push(e[i+2])):a=e;break;case 1:if(a=null!=a?a:new Array,d&&(h=e[i+1],c=e[i+2],l=r(e[i],h),u=r(e[i],c)),p){h=e[i],c=e[i+2],l=r(e[i+1],h),u=r(e[i+1],c),a.push(l),a.push(c.clone()),a.push(h.clone()),a.push(c.clone()),a.push(l.clone()),a.push(u);break}x&&(h=e[i],c=e[i+1],l=r(e[i+2],h),u=r(e[i+2],c)),h&&c&&l&&u&&(a.push(h.clone()),a.push(c.clone()),a.push(l),a.push(u),a.push(l.clone()),a.push(c.clone()));break;case 2:a=null!=a?a:new Array,d||(h=e[i].clone(),c=r(h,e[i+1]),l=r(h,e[i+2]),a.push(h),a.push(c),a.push(l)),p||(h=e[i+1].clone(),c=r(h,e[i+2]),l=r(h,e[i]),a.push(h),a.push(c),a.push(l)),x||(h=e[i+2].clone(),c=r(h,e[i]),l=r(h,e[i+1]),a.push(h),a.push(c),a.push(l))}}return a},G=t instanceof o.Kj?t:null,Q=null==G?void 0:G._thinInstanceDataStorage.matrixData,Z=(null==G?void 0:G.thinInstanceCount)||1,Y=n.jp.Matrix[0];Y.copyFrom(n.y3.IdentityReadOnly);for(let e=0;e<Z;++e){if((null==G?void 0:G.hasThinInstances)&&Q){const t=16*e;Y.setRowFromFloats(0,Q[t+0],Q[t+1],Q[t+2],Q[t+3]),Y.setRowFromFloats(1,Q[t+4],Q[t+5],Q[t+6],Q[t+7]),Y.setRowFromFloats(2,Q[t+8],Q[t+9],Q[t+10],Q[t+11]),Y.setRowFromFloats(3,Q[t+12],Q[t+13],Q[t+14],Q[t+15])}const i=n.y3.RotationYawPitchRoll(L,S,D).multiply(n.y3.Translation(F.x,F.y,F.z)),o=n.y3.Invert(i),r=t.getWorldMatrix(),a=Y.multiply(r).multiply(o),m=new Array(3);for(let e=0;e<_.length;e+=3){let t=m;if(t[0]=U(e,a),T&&v?(t[1]=U(e+2,a),t[2]=U(e+1,a)):(t[1]=U(e+1,a),t[2]=U(e+2,a)),!(s.cullBackFaces&&-t[0].normal.z<=0&&-t[1].normal.z<=0&&-t[2].normal.z<=0)&&(t=k(t,c),t&&(t=k(t,l),t&&(t=k(t,u),t&&(t=k(t,d),t&&(t=k(t,p),t&&(t=k(t,x),t)))))))for(let e=0;e<t.length;e++){const n=t[e];if(B.indices.push(N),v?(n.localPositionOverride?(B.positions[3*N]=n.localPositionOverride[0],B.positions[3*N+1]=n.localPositionOverride[1],B.positions[3*N+2]=n.localPositionOverride[2]):I&&(B.positions[3*N]=I[n.vertexIdx],B.positions[3*N+1]=I[n.vertexIdx+1],B.positions[3*N+2]=I[n.vertexIdx+2]),n.localNormalOverride?(B.normals[3*N]=n.localNormalOverride[0],B.normals[3*N+1]=n.localNormalOverride[1],B.normals[3*N+2]=n.localNormalOverride[2]):b&&(B.normals[3*N]=b[n.vertexIdx],B.normals[3*N+1]=b[n.vertexIdx+1],B.normals[3*N+2]=b[n.vertexIdx+2])):(n.position.toArray(B.positions,3*N),n.normal.toArray(B.normals,3*N)),B.matricesIndices&&B.matricesWeights&&(n.matrixIndicesOverride?(B.matricesIndices[4*N]=n.matrixIndicesOverride[0],B.matricesIndices[4*N+1]=n.matrixIndicesOverride[1],B.matricesIndices[4*N+2]=n.matrixIndicesOverride[2],B.matricesIndices[4*N+3]=n.matrixIndicesOverride[3]):(C&&(B.matricesIndices[4*N]=C[n.vertexIdxForBones],B.matricesIndices[4*N+1]=C[n.vertexIdxForBones+1],B.matricesIndices[4*N+2]=C[n.vertexIdxForBones+2],B.matricesIndices[4*N+3]=C[n.vertexIdxForBones+3]),M&&B.matricesIndicesExtra&&(B.matricesIndicesExtra[4*N]=M[n.vertexIdxForBones],B.matricesIndicesExtra[4*N+1]=M[n.vertexIdxForBones+1],B.matricesIndicesExtra[4*N+2]=M[n.vertexIdxForBones+2],B.matricesIndicesExtra[4*N+3]=M[n.vertexIdxForBones+3])),n.matrixWeightsOverride?(B.matricesWeights[4*N]=n.matrixWeightsOverride[0],B.matricesWeights[4*N+1]=n.matrixWeightsOverride[1],B.matricesWeights[4*N+2]=n.matrixWeightsOverride[2],B.matricesWeights[4*N+3]=n.matrixWeightsOverride[3]):(R&&(B.matricesWeights[4*N]=R[n.vertexIdxForBones],B.matricesWeights[4*N+1]=R[n.vertexIdxForBones+1],B.matricesWeights[4*N+2]=R[n.vertexIdxForBones+2],B.matricesWeights[4*N+3]=R[n.vertexIdxForBones+3]),z&&B.matricesWeightsExtra&&(B.matricesWeightsExtra[4*N]=z[n.vertexIdxForBones],B.matricesWeightsExtra[4*N+1]=z[n.vertexIdxForBones+1],B.matricesWeightsExtra[4*N+2]=z[n.vertexIdxForBones+2],B.matricesWeightsExtra[4*N+3]=z[n.vertexIdxForBones+3]))),s.captureUVS)n.uv.toArray(B.uvs,2*N);else{B.uvs.push(.5+n.position.x/V.x);const e=.5+n.position.y/V.y;B.uvs.push(h.e.UseOpenGLOrientationForUV?1-e:e)}N++}}}0===B.indices.length&&(B.indices=null),0===B.positions.length&&(B.positions=null),0===B.normals.length&&(B.normals=null),0===B.uvs.length&&(B.uvs=null),0===(null===(g=B.matricesIndices)||void 0===g?void 0:g.length)&&(B.matricesIndices=null),0===(null===(y=B.matricesWeights)||void 0===y?void 0:y.length)&&(B.matricesWeights=null),0===(null===(f=B.matricesIndicesExtra)||void 0===f?void 0:f.length)&&(B.matricesIndicesExtra=null),0===(null===(O=B.matricesWeightsExtra)||void 0===O?void 0:O.length)&&(B.matricesWeightsExtra=null);const H=new o.Kj(e,t.getScene());return B.applyToMesh(H),v?(H.skeleton=t.skeleton,H.parent=t):(H.position=F.clone(),H.rotation=new n.P(S,L,D)),H.computeWorldMatrix(!0),H.refreshBoundingInfo(!0,!0),H}const y={CreateDecal:g};o.Kj.CreateDecal=(e,t,s,n,i,o)=>g(e,t,{position:s,normal:n,size:i,angle:o})},8128:(e,t,s)=>{s.d(t,{tX:()=>h,uH:()=>a,vM:()=>r});var n=s(33632),i=s(74517),o=s(53027);function r(e){const t=new Array,s=new Array,n=new Array,r=new Array,a=e.radius||.5,h=e.tessellation||64,c=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,l=0===e.sideOrientation?0:e.sideOrientation||i.x.DEFAULTSIDE;t.push(0,0,0),r.push(.5,.5);const u=2*Math.PI*c,d=1===c?u/h:u/(h-1);let p=0;for(let e=0;e<h;e++){const e=Math.cos(p),s=Math.sin(p),n=(e+1)/2,i=(1-s)/2;t.push(a*e,a*s,0),r.push(n,o.e.UseOpenGLOrientationForUV?1-i:i),p+=d}1===c&&(t.push(t[3],t[4],t[5]),r.push(r[2],o.e.UseOpenGLOrientationForUV?1-r[3]:r[3]));const x=t.length/3;for(let e=1;e<x-1;e++)s.push(e+1,0,e);i.x.ComputeNormals(t,s,n),i.x._ComputeSides(l,t,s,n,r,e.frontUVs,e.backUVs);const m=new i.x;return m.indices=s,m.positions=t,m.normals=n,m.uvs=r,m}function a(e,t={},s=null){const i=new n.Kj(e,s);return t.sideOrientation=n.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,r(t).applyToMesh(i,t.updatable),i}const h={CreateDisc:a};i.x.CreateDisc=r,n.Kj.CreateDisc=(e,t,s,n=null,i,o)=>a(e,{radius:t,tessellation:s,sideOrientation:o,updatable:i},n)},93546:(e,t,s)=>{s.d(t,{_:()=>d,w:()=>u});var n=s(90972),i=s(89859),o=s(33632),r=s(74517),a=s(59288),h=s(81755),c=s(19044),l=s(53027);function u(e,t){const s=e.size,i=e.sizeX||s||1,o=e.sizeY||s||1,a=e.sizeZ||s||1,h=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE,c=new Array,u=new Array,d=new Array,p=new Array;let x=1/0,m=-1/0,g=1/0,y=-1/0;for(let e=0;e<t.vertex.length;e++)x=Math.min(x,t.vertex[e][0]*i),m=Math.max(m,t.vertex[e][0]*i),g=Math.min(g,t.vertex[e][1]*o),y=Math.max(y,t.vertex[e][1]*o);let f=0;for(let e=0;e<t.face.length;e++){const s=t.face[e],r=n.P.FromArray(t.vertex[s[0]]),h=n.P.FromArray(t.vertex[s[2]]),O=n.P.FromArray(t.vertex[s[1]]),A=h.subtract(r),v=O.subtract(r),T=n.P.Cross(v,A).normalize();for(let e=0;e<s.length;e++){d.push(T.x,T.y,T.z);const n=t.vertex[s[e]];c.push(n[0]*i,n[1]*o,n[2]*a);const r=(n[1]*o-g)/(y-g);p.push((n[0]*i-x)/(m-x),l.e.UseOpenGLOrientationForUV?1-r:r)}for(let e=0;e<s.length-2;e++)u.push(f,f+e+2,f+e+1);f+=s.length}r.x._ComputeSides(h,c,u,d,p);const O=new r.x;return O.positions=c,O.indices=u,O.normals=d,O.uvs=p,O}function d(e,t,s=null){const r=t.size,l=t.sizeX||r||1,d=t.sizeY||r||1,p=t.sizeZ||r||1;let x=t.m||1;x!==Math.floor(x)&&(Math.floor(x),a.Y.Warn("m not an integer only floor(m) used"));let m=t.n||0;if(m!==Math.floor(m)&&(Math.floor(m),a.Y.Warn("n not an integer only floor(n) used")),m>x){const e=m;m=x,x=e,a.Y.Warn("n > m therefore m and n swapped")}const g=new h.Bn;g.build(x,m);const y=h.zz.BuildGeodesicData(g),f=y.toGoldbergPolyhedronData(),O=new c.R(e,s);t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),O._originalBuilderSideOrientation=t.sideOrientation,u(t,f).applyToMesh(O,t.updatable),O.goldbergData.nbSharedFaces=y.sharedNodes,O.goldbergData.nbUnsharedFaces=y.poleNodes,O.goldbergData.adjacentFaces=y.adjacentFaces,O.goldbergData.nbFaces=O.goldbergData.nbSharedFaces+O.goldbergData.nbUnsharedFaces,O.goldbergData.nbFacesAtPole=(O.goldbergData.nbUnsharedFaces-12)/12;for(let e=0;e<y.vertex.length;e++)O.goldbergData.faceCenters.push(n.P.FromArray(y.vertex[e])),O.goldbergData.faceCenters[e].x*=l,O.goldbergData.faceCenters[e].y*=d,O.goldbergData.faceCenters[e].z*=p,O.goldbergData.faceColors.push(new i.HE(1,1,1,1));for(let e=0;e<f.face.length;e++){const t=f.face[e],s=n.P.FromArray(f.vertex[t[0]]),i=n.P.FromArray(f.vertex[t[2]]),o=n.P.FromArray(f.vertex[t[1]]),r=i.subtract(s),a=o.subtract(s),h=n.P.Cross(a,r).normalize(),c=n.P.Cross(a,h).normalize();O.goldbergData.faceXaxis.push(a.normalize()),O.goldbergData.faceYaxis.push(h),O.goldbergData.faceZaxis.push(c)}return O}},66377:(e,t,s)=>{s.d(t,{Au:()=>h,GM:()=>c,GQ:()=>a});var n=s(90972),i=s(33632),o=s(74517),r=s(53027);function a(e){const t=e.sideOrientation||o.x.DEFAULTSIDE,s=e.radius||1,i=void 0===e.flat||e.flat,a=0|(e.subdivisions||4),h=e.radiusX||s,c=e.radiusY||s,l=e.radiusZ||s,u=(1+Math.sqrt(5))/2,d=[-1,u,-0,1,u,0,-1,-u,0,1,-u,0,0,-1,-u,0,1,-u,0,-1,u,0,1,u,u,0,1,u,0,-1,-u,0,1,-u,0,-1],p=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],x=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],m=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],g=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],y=new Array,f=new Array,O=new Array,A=new Array;let v=0;const T=new Array(3),_=new Array(3);let P;for(P=0;P<3;P++)T[P]=n.P.Zero(),_[P]=n.FM.Zero();for(let e=0;e<20;e++){for(P=0;P<3;P++){const t=p[3*e+P];T[P].copyFromFloats(d[3*x[t]],d[3*x[t]+1],d[3*x[t]+2]),T[P].normalize(),_[P].copyFromFloats(.134765625*m[2*t]+.05859375+-.0390625*g[e],.2333984375*m[2*t+1]+.025390625+.01953125*g[e])}const t=(e,t,s,o)=>{const u=n.P.Lerp(T[0],T[2],t/a),d=n.P.Lerp(T[1],T[2],t/a),p=a===t?T[2]:n.P.Lerp(u,d,e/(a-t));let x;if(p.normalize(),i){const e=n.P.Lerp(T[0],T[2],o/a),t=n.P.Lerp(T[1],T[2],o/a);x=n.P.Lerp(e,t,s/(a-o))}else x=new n.P(p.x,p.y,p.z);x.x/=h,x.y/=c,x.z/=l,x.normalize();const m=n.FM.Lerp(_[0],_[2],t/a),g=n.FM.Lerp(_[1],_[2],t/a),P=a===t?_[2]:n.FM.Lerp(m,g,e/(a-t));f.push(p.x*h,p.y*c,p.z*l),O.push(x.x,x.y,x.z),A.push(P.x,r.e.UseOpenGLOrientationForUV?1-P.y:P.y),y.push(v),v++};for(let e=0;e<a;e++)for(let s=0;s+e<a;s++)t(s,e,s+1/3,e+1/3),t(s+1,e,s+1/3,e+1/3),t(s,e+1,s+1/3,e+1/3),s+e+1<a&&(t(s+1,e,s+2/3,e+2/3),t(s+1,e+1,s+2/3,e+2/3),t(s,e+1,s+2/3,e+2/3))}o.x._ComputeSides(t,f,y,O,A,e.frontUVs,e.backUVs);const w=new o.x;return w.indices=y,w.positions=f,w.normals=O,w.uvs=A,w}function h(e,t={},s=null){const n=new i.Kj(e,s);return t.sideOrientation=i.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(n,t.updatable),n}const c={CreateIcoSphere:h};o.x.CreateIcoSphere=a,i.Kj.CreateIcoSphere=(e,t,s)=>h(e,t,s)},56755:(e,t,s)=>{s.d(t,{O:()=>r,a:()=>a});var n=s(90972),i=s(33632),o=s(27079);function r(e,t,s=null){const r=t.arc?t.arc<=0||t.arc>1?1:t.arc:1,a=void 0===t.closed||t.closed,h=t.shape,c=t.radius||1,l=t.tessellation||64,u=t.clip||0,d=t.updatable,p=i.Kj._GetDefaultSideOrientation(t.sideOrientation),x=t.cap||i.Kj.NO_CAP,m=2*Math.PI,g=new Array,y=t.invertUV||!1;let f=0,O=0;const A=m/l*r;let v,T;for(f=0;f<=l-u;f++){for(T=[],x!=i.Kj.CAP_START&&x!=i.Kj.CAP_ALL||(T.push(new n.P(0,h[0].y,0)),T.push(new n.P(Math.cos(f*A)*h[0].x*c,h[0].y,Math.sin(f*A)*h[0].x*c))),O=0;O<h.length;O++)v=new n.P(Math.cos(f*A)*h[O].x*c,h[O].y,Math.sin(f*A)*h[O].x*c),T.push(v);x!=i.Kj.CAP_END&&x!=i.Kj.CAP_ALL||(T.push(new n.P(Math.cos(f*A)*h[h.length-1].x*c,h[h.length-1].y,Math.sin(f*A)*h[h.length-1].x*c)),T.push(new n.P(0,h[h.length-1].y,0))),g.push(T)}return(0,o.LY)(e,{pathArray:g,closeArray:a,sideOrientation:p,updatable:d,invertUV:y,frontUVs:t.frontUVs,backUVs:t.backUVs},s)}const a={CreateLathe:r};i.Kj.CreateLathe=(e,t,s,n,i,o,a)=>r(e,{shape:t,radius:s,tessellation:n,sideOrientation:a,updatable:o},i)},57700:(e,t,s)=>{s.d(t,{Pk:()=>x,Yo:()=>p,a4:()=>d,gl:()=>u});var n=s(90972),i=s(89859),o=s(33632),r=s(74517),a=s(50540),h=s(37959),c=s(40078),l=s(53027);function u(e,t,s,o,a,c,u){const d=s||new Array(3),p=o,x=[],m=u||!1;for(let e=0;e<3;e++)void 0===d[e]&&(d[e]=new n.Lt(0,0,1,1)),p&&void 0===p[e]&&(p[e]=new i.HE(1,1,1,1));const g=e.getVerticesData(h.o.PositionKind),y=e.getVerticesData(h.o.NormalKind),f=e.getVerticesData(h.o.UVKind),O=e.getIndices(),A=g.length/9;let v=0,T=0,_=0,P=0,w=0;const I=[0];if(m)for(let e=A;e<g.length/3;e+=4)T=g[3*(e+2)]-g[3*e],_=g[3*(e+2)+2]-g[3*e+2],P=Math.sqrt(T*T+_*_),w+=P,I.push(w);let b=0,E=0;for(let e=0;e<y.length;e+=3)Math.abs(y[e+1])<.001&&(E=1),Math.abs(y[e+1]-1)<.001&&(E=0),Math.abs(y[e+1]+1)<.001&&(E=2),b=e/3,1===E?(v=b-A,f[2*b]=v%4<1.5?m?d[E].x+(d[E].z-d[E].x)*I[Math.floor(v/4)]/w:d[E].x:m?d[E].x+(d[E].z-d[E].x)*I[Math.floor(v/4)+1]/w:d[E].z,f[2*b+1]=v%2==0?l.e.UseOpenGLOrientationForUV?1-d[E].w:d[E].w:l.e.UseOpenGLOrientationForUV?1-d[E].y:d[E].y):(f[2*b]=(1-f[2*b])*d[E].x+f[2*b]*d[E].z,f[2*b+1]=(1-f[2*b+1])*d[E].y+f[2*b+1]*d[E].w,l.e.UseOpenGLOrientationForUV&&(f[2*b+1]=1-f[2*b+1])),p&&x.push(p[E].r,p[E].g,p[E].b,p[E].a);r.x._ComputeSides(t,g,O,y,f,a,c);const C=new r.x;if(C.indices=O,C.positions=g,C.normals=y,C.uvs=f,p){const e=t===r.x.DOUBLESIDE?x.concat(x):x;C.colors=e}return C}function d(e,t,s=null,i=earcut){t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation);const r=t.shape,h=t.holes||[],l=t.depth||0,d=t.smoothingThreshold||2,p=[];let x=[];for(let e=0;e<r.length;e++)p[e]=new n.FM(r[e].x,r[e].z);p[0].equalsWithEpsilon(p[p.length-1],1e-8)&&p.pop();const m=new a.z(e,p,s||c.l.LastCreatedScene,i);for(let e=0;e<h.length;e++){x=[];for(let t=0;t<h[e].length;t++)x.push(new n.FM(h[e][t].x,h[e][t].z));m.addHole(x)}const g=m.build(!1,l,d);return g._originalBuilderSideOrientation=t.sideOrientation,u(g,t.sideOrientation,t.faceUV,t.faceColors,t.frontUVs,t.backUVs,t.wrap).applyToMesh(g,t.updatable),g}function p(e,t,s=null,n=earcut){return d(e,t,s,n)}const x={ExtrudePolygon:p,CreatePolygon:d};r.x.CreatePolygon=u,o.Kj.CreatePolygon=(e,t,s,n,i,o,r=earcut)=>d(e,{shape:t,holes:n,updatable:i,sideOrientation:o},s,r),o.Kj.ExtrudePolygon=(e,t,s,n,i,o,r,a=earcut)=>p(e,{shape:t,holes:i,depth:s,updatable:o,sideOrientation:r},n,a)},23501:(e,t,s)=>{s.d(t,{Qy:()=>h,ox:()=>l,sh:()=>c});var n=s(90972),i=s(89859),o=s(33632),r=s(74517),a=s(53027);function h(e){const t=[];t[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},t[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},t[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},t[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},t[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},t[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},t[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},t[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},t[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},t[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},t[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},t[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},t[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},t[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},t[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};const s=e.type&&(e.type<0||e.type>=t.length)?0:e.type||0,o=e.size,h=e.sizeX||o||1,c=e.sizeY||o||1,l=e.sizeZ||o||1,u=e.custom||t[s],d=u.face.length,p=e.faceUV||new Array(d),x=e.faceColors,m=void 0===e.flat||e.flat,g=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE,y=new Array,f=new Array,O=new Array,A=new Array,v=new Array;let T=0,_=0;const P=new Array;let w,I,b,E,C,R,M=0,z=0;if(m)for(z=0;z<d;z++)x&&void 0===x[z]&&(x[z]=new i.HE(1,1,1,1)),p&&void 0===p[z]&&(p[z]=new n.Lt(0,0,1,1));if(m)for(z=0;z<d;z++){const e=u.face[z].length;for(b=2*Math.PI/e,E=.5*Math.tan(b/2),C=.5,M=0;M<e;M++)y.push(u.vertex[u.face[z][M]][0]*h,u.vertex[u.face[z][M]][1]*c,u.vertex[u.face[z][M]][2]*l),P.push(T),T++,w=p[z].x+(p[z].z-p[z].x)*(.5+E),I=p[z].y+(p[z].w-p[z].y)*(C-.5),A.push(w,a.e.UseOpenGLOrientationForUV?1-I:I),R=E*Math.cos(b)-C*Math.sin(b),C=E*Math.sin(b)+C*Math.cos(b),E=R,x&&v.push(x[z].r,x[z].g,x[z].b,x[z].a);for(M=0;M<e-2;M++)f.push(P[0+_],P[M+2+_],P[M+1+_]);_+=e}else{for(M=0;M<u.vertex.length;M++)y.push(u.vertex[M][0]*h,u.vertex[M][1]*c,u.vertex[M][2]*l),A.push(0,a.e.UseOpenGLOrientationForUV?1:0);for(z=0;z<d;z++)for(M=0;M<u.face[z].length-2;M++)f.push(u.face[z][0],u.face[z][M+2],u.face[z][M+1])}r.x.ComputeNormals(y,f,O),r.x._ComputeSides(g,y,f,O,A,e.frontUVs,e.backUVs);const F=new r.x;return F.positions=y,F.indices=f,F.normals=O,F.uvs=A,x&&m&&(F.colors=v),F}function c(e,t={},s=null){const n=new o.Kj(e,s);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,h(t).applyToMesh(n,t.updatable),n}const l={CreatePolyhedron:c};r.x.CreatePolyhedron=h,o.Kj.CreatePolyhedron=(e,t,s)=>c(e,t,s)},86435:(e,t,s)=>{s.d(t,{Sc:()=>u,cQ:()=>l,qS:()=>c});var n=s(90972),i=s(89859),o=s(33632),r=s(74517),a=s(91694),h=s(53027);function c(e){const t=e.faceUV||new Array(6),s=e.faceColors,c=e.pattern||o.Kj.NO_FLIP,l=e.width||e.size||1,u=e.height||e.size||1,d=e.depth||e.size||1,p=e.tileWidth||e.tileSize||1,x=e.tileHeight||e.tileSize||1,m=e.alignHorizontal||0,g=e.alignVertical||0,y=0===e.sideOrientation?0:e.sideOrientation||r.x.DEFAULTSIDE;for(let e=0;e<6;e++)void 0===t[e]&&(t[e]=new n.Lt(0,0,1,1)),s&&void 0===s[e]&&(s[e]=new i.HE(1,1,1,1));const f=l/2,O=u/2,A=d/2,v=[];for(let e=0;e<2;e++)v[e]=(0,a.mm)({pattern:c,tileWidth:p,tileHeight:x,width:l,height:u,alignVertical:g,alignHorizontal:m,sideOrientation:y});for(let e=2;e<4;e++)v[e]=(0,a.mm)({pattern:c,tileWidth:p,tileHeight:x,width:d,height:u,alignVertical:g,alignHorizontal:m,sideOrientation:y});let T=g;g===o.Kj.BOTTOM?T=o.Kj.TOP:g===o.Kj.TOP&&(T=o.Kj.BOTTOM);for(let e=4;e<6;e++)v[e]=(0,a.mm)({pattern:c,tileWidth:p,tileHeight:x,width:l,height:d,alignVertical:T,alignHorizontal:m,sideOrientation:y});let _=[],P=[],w=[],I=[];const b=[],E=[],C=[],R=[];let M=0,z=0;for(let e=0;e<6;e++){const i=v[e].positions.length;E[e]=[],C[e]=[];for(let t=0;t<i/3;t++)E[e].push(new n.P(v[e].positions[3*t],v[e].positions[3*t+1],v[e].positions[3*t+2])),C[e].push(new n.P(v[e].normals[3*t],v[e].normals[3*t+1],v[e].normals[3*t+2]));M=v[e].uvs.length,R[e]=[];for(let s=0;s<M;s+=2)R[e][s]=t[e].x+(t[e].z-t[e].x)*v[e].uvs[s],R[e][s+1]=t[e].y+(t[e].w-t[e].y)*v[e].uvs[s+1],h.e.UseOpenGLOrientationForUV&&(R[e][s+1]=1-R[e][s+1]);if(w=w.concat(R[e]),I=I.concat(v[e].indices.map((e=>e+z))),z+=E[e].length,s)for(let t=0;t<4;t++)b.push(s[e].r,s[e].g,s[e].b,s[e].a)}const F=new n.P(0,0,A),j=n.y3.RotationY(Math.PI);_=E[0].map((e=>n.P.TransformNormal(e,j).add(F))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]),P=C[0].map((e=>n.P.TransformNormal(e,j))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]),_=_.concat(E[1].map((e=>e.subtract(F))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),P=P.concat(C[1].map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const V=new n.P(f,0,0),D=n.y3.RotationY(-Math.PI/2);_=_.concat(E[2].map((e=>n.P.TransformNormal(e,D).add(V))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),P=P.concat(C[2].map((e=>n.P.TransformNormal(e,D))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const L=n.y3.RotationY(Math.PI/2);_=_.concat(E[3].map((e=>n.P.TransformNormal(e,L).subtract(V))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),P=P.concat(C[3].map((e=>n.P.TransformNormal(e,L))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const K=new n.P(0,O,0),S=n.y3.RotationX(Math.PI/2);_=_.concat(E[4].map((e=>n.P.TransformNormal(e,S).add(K))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),P=P.concat(C[4].map((e=>n.P.TransformNormal(e,S))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[]));const B=n.y3.RotationX(-Math.PI/2);_=_.concat(E[5].map((e=>n.P.TransformNormal(e,B).subtract(K))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),P=P.concat(C[5].map((e=>n.P.TransformNormal(e,B))).map((e=>[e.x,e.y,e.z])).reduce(((e,t)=>e.concat(t)),[])),r.x._ComputeSides(y,_,I,P,w);const N=new r.x;if(N.indices=I,N.positions=_,N.normals=P,N.uvs=w,s){const e=y===r.x.DOUBLESIDE?b.concat(b):b;N.colors=e}return N}function l(e,t,s=null){const n=new o.Kj(e,s);return t.sideOrientation=o.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,c(t).applyToMesh(n,t.updatable),n}const u={CreateTiledBox:l};r.x.CreateTiledBox=c},91694:(e,t,s)=>{s.d(t,{KA:()=>r,P8:()=>a,mm:()=>o});var n=s(33632),i=s(74517);function o(e){const t=e.pattern||n.Kj.NO_FLIP,s=e.tileWidth||e.tileSize||1,o=e.tileHeight||e.tileSize||1,r=e.alignHorizontal||0,a=e.alignVertical||0,h=e.width||e.size||1,c=Math.floor(h/s);let l=h-c*s;const u=e.height||e.size||1,d=Math.floor(u/o);let p=u-d*o;const x=s*c/2,m=o*d/2;let g=0,y=0,f=0,O=0,A=0,v=0;if(l>0||p>0){switch(f=-x,O=-m,A=x,v=m,r){case n.Kj.CENTER:l/=2,f-=l,A+=l;break;case n.Kj.LEFT:A+=l,g=-l/2;break;case n.Kj.RIGHT:f-=l,g=l/2}switch(a){case n.Kj.CENTER:p/=2,O-=p,v+=p;break;case n.Kj.BOTTOM:v+=p,y=-p/2;break;case n.Kj.TOP:O-=p,y=p/2}}const T=[],_=[],P=[];P[0]=[0,0,1,0,1,1,0,1],P[1]=[0,0,1,0,1,1,0,1],t!==n.Kj.ROTATE_TILE&&t!==n.Kj.ROTATE_ROW||(P[1]=[1,1,0,1,0,0,1,0]),t!==n.Kj.FLIP_TILE&&t!==n.Kj.FLIP_ROW||(P[1]=[1,0,0,0,0,1,1,1]),t!==n.Kj.FLIP_N_ROTATE_TILE&&t!==n.Kj.FLIP_N_ROTATE_ROW||(P[1]=[0,1,1,1,1,0,0,0]);let w=[];const I=[],b=[];let E=0;for(let e=0;e<d;e++)for(let i=0;i<c;i++)T.push(i*s-x+g,e*o-m+y,0),T.push((i+1)*s-x+g,e*o-m+y,0),T.push((i+1)*s-x+g,(e+1)*o-m+y,0),T.push(i*s-x+g,(e+1)*o-m+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),w=t===n.Kj.FLIP_TILE||t===n.Kj.ROTATE_TILE||t===n.Kj.FLIP_N_ROTATE_TILE?w.concat(P[(i%2+e%2)%2]):t===n.Kj.FLIP_ROW||t===n.Kj.ROTATE_ROW||t===n.Kj.FLIP_N_ROTATE_ROW?w.concat(P[e%2]):w.concat(P[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1),E+=4;if(l>0||p>0){const e=p>0&&(a===n.Kj.CENTER||a===n.Kj.TOP),i=p>0&&(a===n.Kj.CENTER||a===n.Kj.BOTTOM),h=l>0&&(r===n.Kj.CENTER||r===n.Kj.RIGHT),u=l>0&&(r===n.Kj.CENTER||r===n.Kj.LEFT);let P,C,R,M,z=[];if(e&&h&&(T.push(f+g,O+y,0),T.push(-x+g,O+y,0),T.push(-x+g,O+p+y,0),T.push(f+g,O+p+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,P=1-l/s,C=1-p/o,R=1,M=1,z=[P,C,R,C,R,M,P,M],t===n.Kj.ROTATE_ROW&&(z=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),t===n.Kj.FLIP_ROW&&(z=[1-P,C,1-R,C,1-R,M,1-P,M]),t===n.Kj.FLIP_N_ROTATE_ROW&&(z=[P,1-C,R,1-C,R,1-M,P,1-M]),w=w.concat(z),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),e&&u&&(T.push(x+g,O+y,0),T.push(A+g,O+y,0),T.push(A+g,O+p+y,0),T.push(x+g,O+p+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,P=0,C=1-p/o,R=l/s,M=1,z=[P,C,R,C,R,M,P,M],(t===n.Kj.ROTATE_ROW||t===n.Kj.ROTATE_TILE&&c%2==0)&&(z=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),(t===n.Kj.FLIP_ROW||t===n.Kj.FLIP_TILE&&c%2==0)&&(z=[1-P,C,1-R,C,1-R,M,1-P,M]),(t===n.Kj.FLIP_N_ROTATE_ROW||t===n.Kj.FLIP_N_ROTATE_TILE&&c%2==0)&&(z=[P,1-C,R,1-C,R,1-M,P,1-M]),w=w.concat(z),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),i&&h&&(T.push(f+g,m+y,0),T.push(-x+g,m+y,0),T.push(-x+g,v+y,0),T.push(f+g,v+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,P=1-l/s,C=0,R=1,M=p/o,z=[P,C,R,C,R,M,P,M],(t===n.Kj.ROTATE_ROW&&d%2==1||t===n.Kj.ROTATE_TILE&&d%1==0)&&(z=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),(t===n.Kj.FLIP_ROW&&d%2==1||t===n.Kj.FLIP_TILE&&d%2==0)&&(z=[1-P,C,1-R,C,1-R,M,1-P,M]),(t===n.Kj.FLIP_N_ROTATE_ROW&&d%2==1||t===n.Kj.FLIP_N_ROTATE_TILE&&d%2==0)&&(z=[P,1-C,R,1-C,R,1-M,P,1-M]),w=w.concat(z),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),i&&u&&(T.push(x+g,m+y,0),T.push(A+g,m+y,0),T.push(A+g,v+y,0),T.push(x+g,v+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,P=0,C=0,R=l/s,M=p/o,z=[P,C,R,C,R,M,P,M],(t===n.Kj.ROTATE_ROW&&d%2==1||t===n.Kj.ROTATE_TILE&&(d+c)%2==1)&&(z=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),(t===n.Kj.FLIP_ROW&&d%2==1||t===n.Kj.FLIP_TILE&&(d+c)%2==1)&&(z=[1-P,C,1-R,C,1-R,M,1-P,M]),(t===n.Kj.FLIP_N_ROTATE_ROW&&d%2==1||t===n.Kj.FLIP_N_ROTATE_TILE&&(d+c)%2==1)&&(z=[P,1-C,R,1-C,R,1-M,P,1-M]),w=w.concat(z),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),e){const e=[];P=0,C=1-p/o,R=1,M=1,e[0]=[P,C,R,C,R,M,P,M],e[1]=[P,C,R,C,R,M,P,M],t!==n.Kj.ROTATE_TILE&&t!==n.Kj.ROTATE_ROW||(e[1]=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),t!==n.Kj.FLIP_TILE&&t!==n.Kj.FLIP_ROW||(e[1]=[1-P,C,1-R,C,1-R,M,1-P,M]),t!==n.Kj.FLIP_N_ROTATE_TILE&&t!==n.Kj.FLIP_N_ROTATE_ROW||(e[1]=[P,1-C,R,1-C,R,1-M,P,1-M]);for(let i=0;i<c;i++)T.push(i*s-x+g,O+y,0),T.push((i+1)*s-x+g,O+y,0),T.push((i+1)*s-x+g,O+p+y,0),T.push(i*s-x+g,O+p+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,w=t===n.Kj.FLIP_TILE||t===n.Kj.ROTATE_TILE||t===n.Kj.FLIP_N_ROTATE_TILE?w.concat(e[(i+1)%2]):t===n.Kj.FLIP_ROW||t===n.Kj.ROTATE_ROW||t===n.Kj.FLIP_N_ROTATE_ROW?w.concat(e[1]):w.concat(e[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(i){const e=[];P=0,C=0,R=1,M=p/o,e[0]=[P,C,R,C,R,M,P,M],e[1]=[P,C,R,C,R,M,P,M],t!==n.Kj.ROTATE_TILE&&t!==n.Kj.ROTATE_ROW||(e[1]=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),t!==n.Kj.FLIP_TILE&&t!==n.Kj.FLIP_ROW||(e[1]=[1-P,C,1-R,C,1-R,M,1-P,M]),t!==n.Kj.FLIP_N_ROTATE_TILE&&t!==n.Kj.FLIP_N_ROTATE_ROW||(e[1]=[P,1-C,R,1-C,R,1-M,P,1-M]);for(let i=0;i<c;i++)T.push(i*s-x+g,v-p+y,0),T.push((i+1)*s-x+g,v-p+y,0),T.push((i+1)*s-x+g,v+y,0),T.push(i*s-x+g,v+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,w=t===n.Kj.FLIP_TILE||t===n.Kj.ROTATE_TILE||t===n.Kj.FLIP_N_ROTATE_TILE?w.concat(e[(i+d)%2]):t===n.Kj.FLIP_ROW||t===n.Kj.ROTATE_ROW||t===n.Kj.FLIP_N_ROTATE_ROW?w.concat(e[d%2]):w.concat(e[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(h){const e=[];P=1-l/s,C=0,R=1,M=1,e[0]=[P,C,R,C,R,M,P,M],e[1]=[P,C,R,C,R,M,P,M],t!==n.Kj.ROTATE_TILE&&t!==n.Kj.ROTATE_ROW||(e[1]=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),t!==n.Kj.FLIP_TILE&&t!==n.Kj.FLIP_ROW||(e[1]=[1-P,C,1-R,C,1-R,M,1-P,M]),t!==n.Kj.FLIP_N_ROTATE_TILE&&t!==n.Kj.FLIP_N_ROTATE_ROW||(e[1]=[P,1-C,R,1-C,R,1-M,P,1-M]);for(let s=0;s<d;s++)T.push(f+g,s*o-m+y,0),T.push(f+l+g,s*o-m+y,0),T.push(f+l+g,(s+1)*o-m+y,0),T.push(f+g,(s+1)*o-m+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,w=t===n.Kj.FLIP_TILE||t===n.Kj.ROTATE_TILE||t===n.Kj.FLIP_N_ROTATE_TILE?w.concat(e[(s+1)%2]):t===n.Kj.FLIP_ROW||t===n.Kj.ROTATE_ROW||t===n.Kj.FLIP_N_ROTATE_ROW?w.concat(e[s%2]):w.concat(e[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(u){const e=[];P=0,C=0,R=l/o,M=1,e[0]=[P,C,R,C,R,M,P,M],e[1]=[P,C,R,C,R,M,P,M],t!==n.Kj.ROTATE_TILE&&t!==n.Kj.ROTATE_ROW||(e[1]=[1-P,1-C,1-R,1-C,1-R,1-M,1-P,1-M]),t!==n.Kj.FLIP_TILE&&t!==n.Kj.FLIP_ROW||(e[1]=[1-P,C,1-R,C,1-R,M,1-P,M]),t!==n.Kj.FLIP_N_ROTATE_TILE&&t!==n.Kj.FLIP_N_ROTATE_ROW||(e[1]=[P,1-C,R,1-C,R,1-M,P,1-M]);for(let s=0;s<d;s++)T.push(A-l+g,s*o-m+y,0),T.push(A+g,s*o-m+y,0),T.push(A+g,(s+1)*o-m+y,0),T.push(A-l+g,(s+1)*o-m+y,0),b.push(E,E+1,E+3,E+1,E+2,E+3),E+=4,w=t===n.Kj.FLIP_TILE||t===n.Kj.ROTATE_TILE||t===n.Kj.FLIP_N_ROTATE_TILE?w.concat(e[(s+c)%2]):t===n.Kj.FLIP_ROW||t===n.Kj.ROTATE_ROW||t===n.Kj.FLIP_N_ROTATE_ROW?w.concat(e[s%2]):w.concat(e[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),_.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}}const C=0===e.sideOrientation?0:e.sideOrientation||i.x.DEFAULTSIDE;i.x._ComputeSides(C,T,b,_,w,e.frontUVs,e.backUVs);const R=new i.x;R.indices=b,R.positions=T,R.normals=_,R.uvs=w;const M=C===i.x.DOUBLESIDE?I.concat(I):I;return R.colors=M,R}function r(e,t,s=null){const i=new n.Kj(e,s);return t.sideOrientation=n.Kj._GetDefaultSideOrientation(t.sideOrientation),i._originalBuilderSideOrientation=t.sideOrientation,o(t).applyToMesh(i,t.updatable),i}const a={CreateTiledPlane:r};i.x.CreateTiledPlane=o},92005:(e,t,s)=>{s.d(t,{eu:()=>h,h5:()=>a,t3:()=>c});var n=s(90972),i=s(33632),o=s(74517),r=s(53027);function a(e){const t=[],s=[],i=[],a=[],h=e.diameter||1,c=e.thickness||.5,l=0|(e.tessellation||16),u=0===e.sideOrientation?0:e.sideOrientation||o.x.DEFAULTSIDE,d=l+1;for(let e=0;e<=l;e++){const o=e/l,u=e*Math.PI*2/l-Math.PI/2,p=n.y3.Translation(h/2,0,0).multiply(n.y3.RotationY(u));for(let h=0;h<=l;h++){const u=1-h/l,x=h*Math.PI*2/l+Math.PI,m=Math.cos(x),g=Math.sin(x);let y=new n.P(m,g,0),f=y.scale(c/2);const O=new n.FM(o,u);f=n.P.TransformCoordinates(f,p),y=n.P.TransformNormal(y,p),s.push(f.x,f.y,f.z),i.push(y.x,y.y,y.z),a.push(O.x,r.e.UseOpenGLOrientationForUV?1-O.y:O.y);const A=(e+1)%d,v=(h+1)%d;t.push(e*d+h),t.push(e*d+v),t.push(A*d+h),t.push(e*d+v),t.push(A*d+v),t.push(A*d+h)}}o.x._ComputeSides(u,s,t,i,a,e.frontUVs,e.backUVs);const p=new o.x;return p.indices=t,p.positions=s,p.normals=i,p.uvs=a,p}function h(e,t={},s){const n=new i.Kj(e,s);return t.sideOrientation=i.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(n,t.updatable),n}const c={CreateTorus:h};o.x.CreateTorus=a,i.Kj.CreateTorus=(e,t,s,n,i,o,r)=>h(e,{diameter:t,thickness:s,tessellation:n,sideOrientation:r,updatable:o},i)},19945:(e,t,s)=>{s.d(t,{SN:()=>c,eB:()=>h,i9:()=>a});var n=s(90972),i=s(33632),o=s(74517),r=s(53027);function a(e){const t=new Array,s=new Array,i=new Array,a=new Array,h=e.radius||2,c=e.tube||.5,l=e.radialSegments||32,u=e.tubularSegments||32,d=e.p||2,p=e.q||3,x=0===e.sideOrientation?0:e.sideOrientation||o.x.DEFAULTSIDE,m=e=>{const t=Math.cos(e),s=Math.sin(e),i=p/d*e,o=Math.cos(i),r=h*(2+o)*.5*t,a=h*(2+o)*s*.5,c=h*Math.sin(i)*.5;return new n.P(r,a,c)};let g,y;for(g=0;g<=l;g++){const e=g%l/l*2*d*Math.PI,t=m(e),i=m(e+.01),o=i.subtract(t);let h=i.add(t);const p=n.P.Cross(o,h);for(h=n.P.Cross(p,o),p.normalize(),h.normalize(),y=0;y<u;y++){const e=y%u/u*2*Math.PI,n=-c*Math.cos(e),i=c*Math.sin(e);s.push(t.x+n*h.x+i*p.x),s.push(t.y+n*h.y+i*p.y),s.push(t.z+n*h.z+i*p.z),a.push(g/l),a.push(r.e.UseOpenGLOrientationForUV?1-y/u:y/u)}}for(g=0;g<l;g++)for(y=0;y<u;y++){const e=(y+1)%u,s=g*u+y,n=(g+1)*u+y,i=(g+1)*u+e,o=g*u+e;t.push(o),t.push(n),t.push(s),t.push(o),t.push(i),t.push(n)}o.x.ComputeNormals(s,t,i),o.x._ComputeSides(x,s,t,i,a,e.frontUVs,e.backUVs);const f=new o.x;return f.indices=t,f.positions=s,f.normals=i,f.uvs=a,f}function h(e,t={},s){const n=new i.Kj(e,s);return t.sideOrientation=i.Kj._GetDefaultSideOrientation(t.sideOrientation),n._originalBuilderSideOrientation=t.sideOrientation,a(t).applyToMesh(n,t.updatable),n}const c={CreateTorusKnot:h};o.x.CreateTorusKnot=a,i.Kj.CreateTorusKnot=(e,t,s,n,i,o,r,a,c,l)=>h(e,{radius:t,tube:s,radialSegments:n,tubularSegments:i,p:o,q:r,sideOrientation:l,updatable:c},a)},66540:(e,t,s)=>{s.d(t,{F:()=>h,_:()=>a});var n=s(90972),i=s(33632),o=s(27079),r=s(41021);function a(e,t,s=null){const a=t.path;let h=t.instance,c=1;void 0!==t.radius?c=t.radius:h&&(c=h._creationDataStorage.radius);const l=t.tessellation||64,u=t.radiusFunction||null;let d=t.cap||i.Kj.NO_CAP;const p=t.invertUV||!1,x=t.updatable,m=i.Kj._GetDefaultSideOrientation(t.sideOrientation);t.arc=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1;const g=(e,t,s,o,r,a,h,c)=>{const l=t.getTangents(),u=t.getNormals(),d=t.getDistances(),p=2*Math.PI/r*c,x=a||(()=>o);let m,g,y,f;const O=n.jp.Matrix[0];let A=h===i.Kj.NO_CAP||h===i.Kj.CAP_END?0:2;for(let t=0;t<e.length;t++){g=x(t,d[t]),m=Array(),y=u[t];for(let s=0;s<r;s++)n.y3.RotationAxisToRef(l[t],p*s,O),f=m[s]?m[s]:n.P.Zero(),n.P.TransformCoordinatesToRef(y,O,f),f.scaleInPlace(g).addInPlace(e[t]),m[s]=f;s[A]=m,A++}const v=(t,s)=>{const n=Array();for(let i=0;i<t;i++)n.push(e[s]);return n};switch(h){case i.Kj.NO_CAP:break;case i.Kj.CAP_START:s[0]=v(r,0),s[1]=s[2].slice(0);break;case i.Kj.CAP_END:s[A]=s[A-1].slice(0),s[A+1]=v(r,e.length-1);break;case i.Kj.CAP_ALL:s[0]=v(r,0),s[1]=s[2].slice(0),s[A]=s[A-1].slice(0),s[A+1]=v(r,e.length-1)}return s};let y,f;if(h){const e=h._creationDataStorage,s=t.arc||e.arc;return y=e.path3D.update(a),f=g(a,y,e.pathArray,c,e.tessellation,u,e.cap,s),h=(0,o.LY)("",{pathArray:f,instance:h}),e.path3D=y,e.pathArray=f,e.arc=s,e.radius=c,h}y=new r.$B(a),d=d<0||d>3?0:d,f=g(a,y,new Array,c,l,u,d,t.arc);const O=(0,o.LY)(e,{pathArray:f,closePath:!0,closeArray:!1,updatable:x,sideOrientation:m,invertUV:p,frontUVs:t.frontUVs,backUVs:t.backUVs},s);return O._creationDataStorage.pathArray=f,O._creationDataStorage.path3D=y,O._creationDataStorage.tessellation=l,O._creationDataStorage.cap=d,O._creationDataStorage.arc=t.arc,O._creationDataStorage.radius=c,O}const h={CreateTube:a};i.Kj.CreateTube=(e,t,s,n,i,o,r,h,c,l)=>a(e,{path:t,radius:s,tessellation:n,radiusFunction:i,arc:1,cap:o,updatable:h,sideOrientation:c,instance:l},r)},81755:(e,t,s)=>{s.d(t,{zz:()=>l,lD:()=>c,Bn:()=>h});var n=s(90972),i=s(31865),o=s(7786),r=s(59288);class a{constructor(e=0,t=0){this.x=e,this.y=t,e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("x is not an integer, floor(x) used")),t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("y is not an integer, floor(y) used"))}clone(){return new a(this.x,this.y)}rotate60About(e){const t=this.x;return this.x=e.x+e.y-this.y,this.y=t+this.y-e.x,this}rotateNeg60About(e){const t=this.x;return this.x=t+this.y-e.y,this.y=e.x+e.y-t,this}rotate120(e,t){e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("m not an integer only floor(m) used")),t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("n not an integer only floor(n) used"));const s=this.x;return this.x=e-s-this.y,this.y=t+s,this}rotateNeg120(e,t){e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("m is not an integer, floor(m) used")),t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("n is not an integer,   floor(n) used"));const s=this.x;return this.x=this.y-t,this.y=e+t-s-this.y,this}toCartesianOrigin(e,t){const s=n.P.Zero();return s.x=e.x+2*this.x*t+this.y*t,s.y=e.y+Math.sqrt(3)*this.y*t,s}static Zero(){return new a(0,0)}}class h{constructor(){this.cartesian=[],this.vertices=[],this.max=[],this.min=[],this.closestTo=[],this.innerFacets=[],this.isoVecsABOB=[],this.isoVecsOBOA=[],this.isoVecsBAOA=[],this.vertexTypes=[],this.IDATA=new c("icosahedron","Regular",[[0,o.Q_,-1],[-o.Q_,1,0],[-1,0,-o.Q_],[1,0,-o.Q_],[o.Q_,1,0],[0,o.Q_,1],[-1,0,o.Q_],[-o.Q_,-1,0],[0,-o.Q_,-1],[o.Q_,-1,0],[1,0,o.Q_],[0,-o.Q_,1]],[[0,2,1],[0,3,2],[0,4,3],[0,5,4],[0,1,5],[7,6,1],[8,7,2],[9,8,3],[10,9,4],[6,10,5],[2,7,1],[3,8,2],[4,9,3],[5,10,4],[1,6,5],[11,6,7],[11,7,8],[11,8,9],[11,9,10],[11,10,6]])}setIndices(){let e=12;const t={},s=this.m,n=this.n;let o,r,h,c,l,u=s,d=1,p=0;0!==n&&(u=i.R.HCF(s,n)),d=s/u,p=n/u;const x=a.Zero(),m=new a(s,n),g=new a(-n,s+n),y=a.Zero(),f=a.Zero(),O=a.Zero();let A,v,T,_,P=[];const w=[],I=this.vertByDist,b=(s,n,i,o)=>{A=s+"|"+i,v=n+"|"+o,A in t||v in t?A in t&&!(v in t)?t[v]=t[A]:v in t&&!(A in t)&&(t[A]=t[v]):(t[A]=e,t[v]=e,e++),I[i][0]>2?w[t[A]]=[-I[i][0],I[i][1],t[A]]:w[t[A]]=[P[I[i][0]],I[i][1],t[A]]};this.IDATA.edgematch=[[1,"B"],[2,"B"],[3,"B"],[4,"B"],[0,"B"],[10,"O",14,"A"],[11,"O",10,"A"],[12,"O",11,"A"],[13,"O",12,"A"],[14,"O",13,"A"],[0,"O"],[1,"O"],[2,"O"],[3,"O"],[4,"O"],[19,"B",5,"A"],[15,"B",6,"A"],[16,"B",7,"A"],[17,"B",8,"A"],[18,"B",9,"A"]];for(let i=0;i<20;i++){if(P=this.IDATA.face[i],h=P[2],c=P[1],l=P[0],T=x.x+"|"+x.y,A=i+"|"+T,A in t||(t[A]=h,w[h]=[P[I[T][0]],I[T][1]]),T=m.x+"|"+m.y,A=i+"|"+T,A in t||(t[A]=c,w[c]=[P[I[T][0]],I[T][1]]),T=g.x+"|"+g.y,A=i+"|"+T,A in t||(t[A]=l,w[l]=[P[I[T][0]],I[T][1]]),o=this.IDATA.edgematch[i][0],r=this.IDATA.edgematch[i][1],"B"===r)for(let e=1;e<u;e++)f.x=s-e*(d+p),f.y=n+e*d,O.x=-e*p,O.y=e*(d+p),T=f.x+"|"+f.y,_=O.x+"|"+O.y,b(i,o,T,_);if("O"===r)for(let e=1;e<u;e++)O.x=-e*p,O.y=e*(d+p),y.x=e*d,y.y=e*p,T=O.x+"|"+O.y,_=y.x+"|"+y.y,b(i,o,T,_);if(o=this.IDATA.edgematch[i][2],r=this.IDATA.edgematch[i][3],r&&"A"===r)for(let e=1;e<u;e++)y.x=e*d,y.y=e*p,f.x=s-(u-e)*(d+p),f.y=n+(u-e)*d,T=y.x+"|"+y.y,_=f.x+"|"+f.y,b(i,o,T,_);for(let s=0;s<this.vertices.length;s++)T=this.vertices[s].x+"|"+this.vertices[s].y,A=i+"|"+T,A in t||(t[A]=e++,I[T][0]>2?w[t[A]]=[-I[T][0],I[T][1],t[A]]:w[t[A]]=[P[I[T][0]],I[T][1],t[A]])}this.closestTo=w,this.vecToidx=t}calcCoeffs(){const e=this.m,t=this.n,s=Math.sqrt(3)/3,n=e*e+t*t+e*t;this.coau=(e+t)/n,this.cobu=-t/n,this.coav=-s*(e-t)/n,this.cobv=s*(2*e+t)/n}createInnerFacets(){const e=this.m,t=this.n;for(let s=0;s<t+e+1;s++)for(let e=this.min[s];e<this.max[s]+1;e++)e<this.max[s]&&e<this.max[s+1]+1&&this.innerFacets.push(["|"+e+"|"+s,"|"+e+"|"+(s+1),"|"+(e+1)+"|"+s]),s>0&&e<this.max[s-1]&&e+1<this.max[s]+1&&this.innerFacets.push(["|"+e+"|"+s,"|"+(e+1)+"|"+s,"|"+(e+1)+"|"+(s-1)])}edgeVecsABOB(){const e=this.m,t=this.n,s=new a(-t,e+t);for(let n=1;n<e+t;n++){const e=new a(this.min[n],n),t=new a(this.min[n-1],n-1),i=new a(this.min[n+1],n+1),o=e.clone(),r=t.clone(),h=i.clone();o.rotate60About(s),r.rotate60About(s),h.rotate60About(s);const c=new a(this.max[o.y],o.y),l=new a(this.max[o.y-1],o.y-1),u=new a(this.max[o.y-1]-1,o.y-1);o.x===c.x&&o.y===c.y||(o.x!==l.x?(this.vertexTypes.push([1,0,0]),this.isoVecsABOB.push([e,l,u]),this.vertexTypes.push([1,0,0]),this.isoVecsABOB.push([e,u,c])):o.y===h.y?(this.vertexTypes.push([1,1,0]),this.isoVecsABOB.push([e,t,l]),this.vertexTypes.push([1,0,1]),this.isoVecsABOB.push([e,l,i])):(this.vertexTypes.push([1,1,0]),this.isoVecsABOB.push([e,t,l]),this.vertexTypes.push([1,0,0]),this.isoVecsABOB.push([e,l,c])))}}mapABOBtoOBOA(){const e=new a(0,0);for(let t=0;t<this.isoVecsABOB.length;t++){const s=[];for(let n=0;n<3;n++)e.x=this.isoVecsABOB[t][n].x,e.y=this.isoVecsABOB[t][n].y,0===this.vertexTypes[t][n]&&e.rotateNeg120(this.m,this.n),s.push(e.clone());this.isoVecsOBOA.push(s)}}mapABOBtoBAOA(){const e=new a(0,0);for(let t=0;t<this.isoVecsABOB.length;t++){const s=[];for(let n=0;n<3;n++)e.x=this.isoVecsABOB[t][n].x,e.y=this.isoVecsABOB[t][n].y,1===this.vertexTypes[t][n]&&e.rotate120(this.m,this.n),s.push(e.clone());this.isoVecsBAOA.push(s)}}MapToFace(e,t){const s=this.IDATA.face[e],i=s[2],o=s[1],r=s[0],a=n.P.FromArray(this.IDATA.vertex[i]),h=n.P.FromArray(this.IDATA.vertex[o]),c=n.P.FromArray(this.IDATA.vertex[r]),l=h.subtract(a),u=c.subtract(a),d=l.scale(this.coau).add(u.scale(this.cobu)),p=l.scale(this.coav).add(u.scale(this.cobv)),x=[];let m,g=n.jp.Vector3[0];for(let s=0;s<this.cartesian.length;s++)g=d.scale(this.cartesian[s].x).add(p.scale(this.cartesian[s].y)).add(a),x[s]=[g.x,g.y,g.z],m=e+"|"+this.vertices[s].x+"|"+this.vertices[s].y,t.vertex[this.vecToidx[m]]=[g.x,g.y,g.z]}build(e,t){const s=new Array,n=a.Zero(),o=new a(e,t),r=new a(-t,e+t);s.push(n,o,r);for(let n=t;n<e+1;n++)for(let t=0;t<e+1-n;t++)s.push(new a(t,n));if(t>0){const n=i.R.HCF(e,t),o=e/n,r=t/n;for(let i=1;i<n;i++)s.push(new a(i*o,i*r)),s.push(new a(-i*r,i*(o+r))),s.push(new a(e-i*(o+r),t+i*o));const h=e/t;for(let n=1;n<t;n++)for(let i=0;i<n*h;i++)s.push(new a(i,n)),s.push(new a(i,n).rotate120(e,t)),s.push(new a(i,n).rotateNeg120(e,t))}s.sort(((e,t)=>e.x-t.x)),s.sort(((e,t)=>e.y-t.y));const h=new Array(e+t+1),c=new Array(e+t+1);for(let e=0;e<h.length;e++)h[e]=1/0,c[e]=-1/0;let l=0,u=0;const d=s.length;for(let e=0;e<d;e++)u=s[e].x,l=s[e].y,h[l]=Math.min(u,h[l]),c[l]=Math.max(u,c[l]);const p=(s,n)=>{const i=s.clone();return"A"===n&&i.rotateNeg120(e,t),"B"===n&&i.rotate120(e,t),i.x<0?i.y:i.x+i.y},x=[],m=[],g=[],y=[],f={},O=[];let A=-1,v=-1;for(let e=0;e<d;e++)x[e]=s[e].toCartesianOrigin(new a(0,0),.5),m[e]=p(s[e],"O"),g[e]=p(s[e],"A"),y[e]=p(s[e],"B"),m[e]===g[e]&&g[e]===y[e]?(A=3,v=m[e]):m[e]===g[e]?(A=4,v=m[e]):g[e]===y[e]?(A=5,v=g[e]):y[e]===m[e]&&(A=6,v=m[e]),m[e]<g[e]&&m[e]<y[e]&&(A=2,v=m[e]),g[e]<m[e]&&g[e]<y[e]&&(A=1,v=g[e]),y[e]<g[e]&&y[e]<m[e]&&(A=0,v=y[e]),O.push([A,v,s[e].x,s[e].y]);O.sort(((e,t)=>e[2]-t[2])),O.sort(((e,t)=>e[3]-t[3])),O.sort(((e,t)=>e[1]-t[1])),O.sort(((e,t)=>e[0]-t[0]));for(let e=0;e<O.length;e++)f[O[e][2]+"|"+O[e][3]]=[O[e][0],O[e][1],e];return this.m=e,this.n=t,this.vertices=s,this.vertByDist=f,this.cartesian=x,this.min=h,this.max=c,this}}class c{constructor(e,t,s,n){this.name=e,this.category=t,this.vertex=s,this.face=n}}class l extends c{innerToData(e,t){for(let s=0;s<t.innerFacets.length;s++)this.face.push(t.innerFacets[s].map((s=>t.vecToidx[e+s])))}mapABOBtoDATA(e,t){const s=t.IDATA.edgematch[e][0];for(let n=0;n<t.isoVecsABOB.length;n++){const i=[];for(let o=0;o<3;o++)0===t.vertexTypes[n][o]?i.push(e+"|"+t.isoVecsABOB[n][o].x+"|"+t.isoVecsABOB[n][o].y):i.push(s+"|"+t.isoVecsABOB[n][o].x+"|"+t.isoVecsABOB[n][o].y);this.face.push([t.vecToidx[i[0]],t.vecToidx[i[1]],t.vecToidx[i[2]]])}}mapOBOAtoDATA(e,t){const s=t.IDATA.edgematch[e][0];for(let n=0;n<t.isoVecsOBOA.length;n++){const i=[];for(let o=0;o<3;o++)1===t.vertexTypes[n][o]?i.push(e+"|"+t.isoVecsOBOA[n][o].x+"|"+t.isoVecsOBOA[n][o].y):i.push(s+"|"+t.isoVecsOBOA[n][o].x+"|"+t.isoVecsOBOA[n][o].y);this.face.push([t.vecToidx[i[0]],t.vecToidx[i[1]],t.vecToidx[i[2]]])}}mapBAOAtoDATA(e,t){const s=t.IDATA.edgematch[e][2];for(let n=0;n<t.isoVecsBAOA.length;n++){const i=[];for(let o=0;o<3;o++)1===t.vertexTypes[n][o]?i.push(e+"|"+t.isoVecsBAOA[n][o].x+"|"+t.isoVecsBAOA[n][o].y):i.push(s+"|"+t.isoVecsBAOA[n][o].x+"|"+t.isoVecsBAOA[n][o].y);this.face.push([t.vecToidx[i[0]],t.vecToidx[i[1]],t.vecToidx[i[2]]])}}orderData(e){const t=[];for(let e=0;e<13;e++)t[e]=[];const s=e.closestTo;for(let e=0;e<s.length;e++)s[e][0]>-1?s[e][1]>0&&t[s[e][0]].push([e,s[e][1]]):t[12].push([e,s[e][0]]);const n=[];for(let e=0;e<12;e++)n[e]=e;let i=12;for(let e=0;e<12;e++){t[e].sort(((e,t)=>e[1]-t[1]));for(let s=0;s<t[e].length;s++)n[t[e][s][0]]=i++}for(let e=0;e<t[12].length;e++)n[t[12][e][0]]=i++;for(let e=0;e<this.vertex.length;e++)this.vertex[e].push(n[e]);this.vertex.sort(((e,t)=>e[3]-t[3]));for(let e=0;e<this.vertex.length;e++)this.vertex[e].pop();for(let e=0;e<this.face.length;e++)for(let t=0;t<this.face[e].length;t++)this.face[e][t]=n[this.face[e][t]];this.sharedNodes=t[12].length,this.poleNodes=this.vertex.length-this.sharedNodes}setOrder(e,t){const s=[],n=[];let i=t.pop();n.push(i);let o=this.face[i].indexOf(e);o=(o+2)%3;let r=this.face[i][o];s.push(r);let a=0;for(;t.length>0;)i=t[a],this.face[i].indexOf(r)>-1?(o=(this.face[i].indexOf(r)+1)%3,r=this.face[i][o],s.push(r),n.push(i),t.splice(a,1),a=0):a++;return this.adjacentFaces.push(s),n}toGoldbergPolyhedronData(){const e=new c("GeoDual","Goldberg",[],[]);e.name="GD dual";const t=this.vertex.length,s=new Array(t);for(let e=0;e<t;e++)s[e]=[];for(let e=0;e<this.face.length;e++)for(let t=0;t<3;t++)s[this.face[e][t]].push(e);let n=0,i=0,o=0,r=[],a=[];this.adjacentFaces=[];for(let t=0;t<s.length;t++)e.face[t]=this.setOrder(t,s[t].concat([])),s[t].forEach((t=>{n=0,i=0,o=0,r=this.face[t];for(let e=0;e<3;e++)a=this.vertex[r[e]],n+=a[0],i+=a[1],o+=a[2];e.vertex[t]=[n/3,i/3,o/3]}));return e}static BuildGeodesicData(e){const t=new l("Geodesic-m-n","Geodesic",[[0,o.Q_,-1],[-o.Q_,1,0],[-1,0,-o.Q_],[1,0,-o.Q_],[o.Q_,1,0],[0,o.Q_,1],[-1,0,o.Q_],[-o.Q_,-1,0],[0,-o.Q_,-1],[o.Q_,-1,0],[1,0,o.Q_],[0,-o.Q_,1]],[]);e.setIndices(),e.calcCoeffs(),e.createInnerFacets(),e.edgeVecsABOB(),e.mapABOBtoOBOA(),e.mapABOBtoBAOA();for(let s=0;s<e.IDATA.face.length;s++)e.MapToFace(s,t),t.innerToData(s,e),"B"===e.IDATA.edgematch[s][1]&&t.mapABOBtoDATA(s,e),"O"===e.IDATA.edgematch[s][1]&&t.mapOBOAtoDATA(s,e),"A"===e.IDATA.edgematch[s][3]&&t.mapBAOAtoDATA(s,e);return t.orderData(e),t.vertex=t.vertex.map((function(e){const t=e[0],s=e[1],n=e[2],i=Math.sqrt(t*t+s*s+n*n);return e[0]*=1/i,e[1]*=1/i,e[2]*=1/i,e})),t}}},16721:(e,t,s)=>{s.d(t,{V:()=>I});var n=s(27079),i=s(8128),o=s(48110),r=s(86435),a=s(16765),h=s(76565),c=s(92005),l=s(19945),u=s(71528),d=s(57700),p=s(69590),x=s(56755),m=s(86654),g=s(91694),y=s(30307),f=s(66540),O=s(23501),A=s(66377),v=s(21724),T=s(77966),_=s(69609),P=s(93546),w=s(80133);const I={CreateBox:o.NR,CreateTiledBox:r.cQ,CreateSphere:a.Qk,CreateDisc:i.uH,CreateIcoSphere:A.Au,CreateRibbon:n.LY,CreateCylinder:h.wf,CreateTorus:c.eu,CreateTorusKnot:l.eB,CreateLineSystem:u.xW,CreateLines:u.nL,CreateDashedLines:u.Gz,ExtrudeShape:p.Gc,ExtrudeShapeCustom:p.bC,CreateLathe:x.O,CreateTiledPlane:g.KA,CreatePlane:m.pT,CreateGround:y.$6,CreateTiledGround:y.DG,CreateGroundFromHeightMap:y.W,CreatePolygon:d.a4,ExtrudePolygon:d.Yo,CreateTube:f._,CreatePolyhedron:O.sh,CreateGeodesic:_.M,CreateGoldberg:P._,CreateDecal:v.t,CreateCapsule:T.iz,CreateText:w.p}},50540:(e,t,s)=>{s.d(t,{m:()=>p,z:()=>x});var n=s(59288),i=s(90972),o=s(37959),r=s(33632),a=s(74517),h=s(41021),c=s(7786),l=s(40078);class u extends i.FM{constructor(e,t){super(e.x,e.y),this.index=t}}class d{constructor(){this.elements=new Array}add(e){const t=new Array;return e.forEach((e=>{const s=new u(e,this.elements.length);t.push(s),this.elements.push(s)})),t}computeBounds(){const e=new i.FM(this.elements[0].x,this.elements[0].y),t=new i.FM(this.elements[0].x,this.elements[0].y);return this.elements.forEach((s=>{s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y)})),{min:e,max:t,width:t.x-e.x,height:t.y-e.y}}}class p{static Rectangle(e,t,s,n){return[new i.FM(e,t),new i.FM(s,t),new i.FM(s,n),new i.FM(e,n)]}static Circle(e,t=0,s=0,n=32){const o=new Array;let r=0;const a=2*Math.PI/n;for(let h=0;h<n;h++)o.push(new i.FM(t+Math.cos(r)*e,s+Math.sin(r)*e)),r-=a;return o}static Parse(e){const t=e.split(/[^-+eE.\d]+/).map(parseFloat).filter((e=>!isNaN(e)));let s;const n=[];for(s=0;s<(2147483646&t.length);s+=2)n.push(new i.FM(t[s],t[s+1]));return n}static StartingAt(e,t){return h.ZZ.StartingAt(e,t)}}class x{_addToepoint(e){for(const t of e)this._epoints.push(t.x,t.y)}constructor(e,t,s,i=earcut){let o;this._points=new d,this._outlinepoints=new d,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this.bjsEarcut=i,this._name=e,this._scene=s||l.l.LastCreatedScene,o=t instanceof h.ZZ?t.getPoints():t,this._addToepoint(o),this._points.add(o),this._outlinepoints.add(o),void 0===this.bjsEarcut&&n.Y.Warn("Earcut was not found, the polygon will not be built.")}addHole(e){this._points.add(e);const t=new d;return t.add(e),this._holes.push(t),this._eholes.push(this._epoints.length/2),this._addToepoint(e),this}build(e=!1,t=0,s=2){const n=new r.Kj(this._name,this._scene),i=this.buildVertexData(t,s);return n.setVerticesData(o.o.PositionKind,i.positions,e),n.setVerticesData(o.o.NormalKind,i.normals,e),n.setVerticesData(o.o.UVKind,i.uvs,e),n.setIndices(i.indices),n}buildVertexData(e=0,t=2){const s=new a.x,n=new Array,i=new Array,o=new Array,r=this._points.computeBounds();this._points.elements.forEach((e=>{n.push(0,1,0),i.push(e.x,0,e.y),o.push((e.x-r.min.x)/r.width,(e.y-r.min.y)/r.height)}));const h=new Array,c=this.bjsEarcut(this._epoints,this._eholes,2);for(let e=0;e<c.length;e++)h.push(c[e]);if(e>0){const s=i.length/3;this._points.elements.forEach((t=>{n.push(0,-1,0),i.push(t.x,-e,t.y),o.push(1-(t.x-r.min.x)/r.width,1-(t.y-r.min.y)/r.height)}));const a=h.length;for(let e=0;e<a;e+=3){const t=h[e+0],n=h[e+1],i=h[e+2];h.push(i+s),h.push(n+s),h.push(t+s)}this._addSide(i,n,o,h,r,this._outlinepoints,e,!1,t),this._holes.forEach((s=>{this._addSide(i,n,o,h,r,s,e,!0,t)}))}return s.indices=h,s.positions=i,s.normals=n,s.uvs=o,s}_addSide(e,t,s,n,o,r,a,h,l){let u=e.length/3,d=0;for(let p=0;p<r.elements.length;p++){const x=r.elements[p],m=r.elements[(p+1)%r.elements.length];e.push(x.x,0,x.y),e.push(x.x,-a,x.y),e.push(m.x,0,m.y),e.push(m.x,-a,m.y);const g=r.elements[(p+r.elements.length-1)%r.elements.length],y=r.elements[(p+2)%r.elements.length];let f=new i.P(-(m.y-x.y),0,m.x-x.x),O=new i.P(-(x.y-g.y),0,x.x-g.x),A=new i.P(-(y.y-m.y),0,y.x-m.x);h||(f=f.scale(-1),O=O.scale(-1),A=A.scale(-1));const v=f.normalizeToNew();let T=O.normalizeToNew(),_=A.normalizeToNew();const P=i.P.Dot(T,v);T=P>l?P<c.kn-1?new i.P(x.x,0,x.y).subtract(new i.P(m.x,0,m.y)).normalize():O.add(f).normalize():v;const w=i.P.Dot(A,f);_=w>l?w<c.kn-1?new i.P(m.x,0,m.y).subtract(new i.P(x.x,0,x.y)).normalize():A.add(f).normalize():v,s.push(d/o.width,0),s.push(d/o.width,1),d+=f.length(),s.push(d/o.width,0),s.push(d/o.width,1),t.push(T.x,T.y,T.z),t.push(T.x,T.y,T.z),t.push(_.x,_.y,_.z),t.push(_.x,_.y,_.z),h?(n.push(u),n.push(u+2),n.push(u+1),n.push(u+1),n.push(u+2),n.push(u+3)):(n.push(u),n.push(u+1),n.push(u+2),n.push(u+1),n.push(u+3),n.push(u+2)),u+=4}}}},33852:(e,t,s)=>{s.d(t,{P:()=>c,n:()=>l});var n=s(59288),i=s(74517),o=s(33632),r=s(7417),a=s(64673),h=s(37959);class c{constructor(e=Recast){this.bjsRECAST={},this.name="RecastJSPlugin",this._maximumSubStepCount=10,this._timeStep=1/60,this._timeFactor=1,this._worker=null,"function"==typeof e?n.Y.Error("RecastJS is not ready. Please make sure you await Recast() before using the plugin."):this.bjsRECAST=e,this.isSupported()?(this.setTimeStep(),this._tempVec1=new this.bjsRECAST.Vec3,this._tempVec2=new this.bjsRECAST.Vec3):n.Y.Error("RecastJS is not available. Please make sure you included the js file.")}setWorkerURL(e){return!(!window||!window.Worker||(this._worker=new Worker(e),0))}setTimeStep(e=1/60){this._timeStep=e}getTimeStep(){return this._timeStep}setMaximumSubStepCount(e=10){this._maximumSubStepCount=e}getMaximumSubStepCount(){return this._maximumSubStepCount}set timeFactor(e){this._timeFactor=Math.max(e,0)}get timeFactor(){return this._timeFactor}createNavMesh(e,t,s){let n,i,o;this._worker&&!s?console.warn("A worker is avaible but no completion callback. Defaulting to blocking navmesh creation"):!this._worker&&s&&console.warn("A completion callback is avaible but no worker. Defaulting to blocking navmesh creation"),this.navMesh=new this.bjsRECAST.NavMesh;const a=[],c=[];let l=0;for(n=0;n<e.length;n++)if(e[n]){const t=e[n],s=t.getIndices();if(!s)continue;const u=t.getVerticesData(h.o.PositionKind,!1,!1);if(!u)continue;const d=[],p=t.computeWorldMatrix(!0);if(t.hasThinInstances){const e=t.thinInstanceGetWorldMatrices();for(let t=0;t<e.length;t++){const s=new r.y3;e[t].multiplyToRef(p,s),d.push(s)}}else d.push(p);for(let e=0;e<d.length;e++){const t=d[e];for(i=0;i<s.length;i++)a.push(s[i]+l);const n=r.P.Zero(),h=r.P.Zero();for(o=0;o<u.length;o+=3)r.P.FromArrayToRef(u,o,h),r.P.TransformCoordinatesToRef(h,t,n),c.push(n.x,n.y,n.z);l+=u.length/3}}if(this._worker&&s)this._worker.postMessage([c,l,a,a.length,t]),this._worker.onmessage=function(e){s(e.data)};else{const e=new this.bjsRECAST.rcConfig;e.cs=t.cs,e.ch=t.ch,e.borderSize=t.borderSize?t.borderSize:0,e.tileSize=t.tileSize?t.tileSize:0,e.walkableSlopeAngle=t.walkableSlopeAngle,e.walkableHeight=t.walkableHeight,e.walkableClimb=t.walkableClimb,e.walkableRadius=t.walkableRadius,e.maxEdgeLen=t.maxEdgeLen,e.maxSimplificationError=t.maxSimplificationError,e.minRegionArea=t.minRegionArea,e.mergeRegionArea=t.mergeRegionArea,e.maxVertsPerPoly=t.maxVertsPerPoly,e.detailSampleDist=t.detailSampleDist,e.detailSampleMaxError=t.detailSampleMaxError,this.navMesh.build(c,l,a,a.length,e)}}createDebugNavMesh(e){let t,s;const n=this.navMesh.getDebugNavMesh(),r=n.getTriangleCount(),a=[],h=[];for(t=0;t<3*r;t++)a.push(t);for(t=0;t<r;t++)for(s=0;s<3;s++){const e=n.getTriangle(t).getPoint(s);h.push(e.x,e.y,e.z)}const c=new o.Kj("NavMeshDebug",e),l=new i.x;return l.indices=a,l.positions=h,l.applyToMesh(c,!1),c}getClosestPoint(e){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const t=this.navMesh.getClosestPoint(this._tempVec1);return new r.P(t.x,t.y,t.z)}getClosestPointToRef(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const s=this.navMesh.getClosestPoint(this._tempVec1);t.set(s.x,s.y,s.z)}getRandomPointAround(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const s=this.navMesh.getRandomPointAround(this._tempVec1,t);return new r.P(s.x,s.y,s.z)}getRandomPointAroundToRef(e,t,s){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;const n=this.navMesh.getRandomPointAround(this._tempVec1,t);s.set(n.x,n.y,n.z)}moveAlong(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;const s=this.navMesh.moveAlong(this._tempVec1,this._tempVec2);return new r.P(s.x,s.y,s.z)}moveAlongToRef(e,t,s){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;const n=this.navMesh.moveAlong(this._tempVec1,this._tempVec2);s.set(n.x,n.y,n.z)}computePath(e,t){let s;this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;const n=this.navMesh.computePath(this._tempVec1,this._tempVec2),i=n.getPointCount(),o=[];for(s=0;s<i;s++){const e=n.getPoint(s);o.push(new r.P(e.x,e.y,e.z))}return o}createCrowd(e,t,s){return new l(this,e,t,s)}setDefaultQueryExtent(e){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.setDefaultQueryExtent(this._tempVec1)}getDefaultQueryExtent(){const e=this.navMesh.getDefaultQueryExtent();return new r.P(e.x,e.y,e.z)}buildFromNavmeshData(e){const t=e.length*e.BYTES_PER_ELEMENT,s=this.bjsRECAST._malloc(t),n=new Uint8Array(this.bjsRECAST.HEAPU8.buffer,s,t);n.set(e);const i=new this.bjsRECAST.NavmeshData;i.dataPointer=n.byteOffset,i.size=e.length,this.navMesh=new this.bjsRECAST.NavMesh,this.navMesh.buildFromNavmeshData(i),this.bjsRECAST._free(n.byteOffset)}getNavmeshData(){const e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.bjsRECAST.HEAPU8.buffer,e.dataPointer,e.size),s=new Uint8Array(e.size);return s.set(t),this.navMesh.freeNavmeshData(e),s}getDefaultQueryExtentToRef(e){const t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){}addCylinderObstacle(e,t,s){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.addCylinderObstacle(this._tempVec1,t,s)}addBoxObstacle(e,t,s){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z,this.navMesh.addBoxObstacle(this._tempVec1,this._tempVec2,s)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return void 0!==this.bjsRECAST}}class l{constructor(e,t,s,n){this.recastCrowd={},this.transforms=new Array,this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this._onBeforeAnimationsObserver=null,this.onReachTargetObservable=new a.y$,this.bjsRECASTPlugin=e,this.recastCrowd=new this.bjsRECASTPlugin.bjsRECAST.Crowd(t,s,this.bjsRECASTPlugin.navMesh.getNavMesh()),this._scene=n,this._onBeforeAnimationsObserver=n.onBeforeAnimationsObservable.add((()=>{this.update(.001*n.getEngine().getDeltaTime()*e.timeFactor)}))}addAgent(e,t,s){const n=new this.bjsRECASTPlugin.bjsRECAST.dtCrowdAgentParams;n.radius=t.radius,n.height=t.height,n.maxAcceleration=t.maxAcceleration,n.maxSpeed=t.maxSpeed,n.collisionQueryRange=t.collisionQueryRange,n.pathOptimizationRange=t.pathOptimizationRange,n.separationWeight=t.separationWeight,n.updateFlags=7,n.obstacleAvoidanceType=0,n.queryFilterType=0,n.userData=0;const i=this.recastCrowd.addAgent(new this.bjsRECASTPlugin.bjsRECAST.Vec3(e.x,e.y,e.z),n);return this.transforms.push(s),this.agents.push(i),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new r.P(0,0,0)),i}getAgentPosition(e){const t=this.recastCrowd.getAgentPosition(e);return new r.P(t.x,t.y,t.z)}getAgentPositionToRef(e,t){const s=this.recastCrowd.getAgentPosition(e);t.set(s.x,s.y,s.z)}getAgentVelocity(e){const t=this.recastCrowd.getAgentVelocity(e);return new r.P(t.x,t.y,t.z)}getAgentVelocityToRef(e,t){const s=this.recastCrowd.getAgentVelocity(e);t.set(s.x,s.y,s.z)}getAgentNextTargetPath(e){const t=this.recastCrowd.getAgentNextTargetPath(e);return new r.P(t.x,t.y,t.z)}getAgentNextTargetPathToRef(e,t){const s=this.recastCrowd.getAgentNextTargetPath(e);t.set(s.x,s.y,s.z)}getAgentState(e){return this.recastCrowd.getAgentState(e)}overOffmeshConnection(e){return this.recastCrowd.overOffmeshConnection(e)}agentGoto(e,t){this.recastCrowd.agentGoto(e,new this.bjsRECASTPlugin.bjsRECAST.Vec3(t.x,t.y,t.z));const s=this.agents.indexOf(e);s>-1&&(this._agentDestinationArmed[s]=!0,this._agentDestination[s].set(t.x,t.y,t.z))}agentTeleport(e,t){this.recastCrowd.agentTeleport(e,new this.bjsRECASTPlugin.bjsRECAST.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){const s=this.recastCrowd.getAgentParameters(e);void 0!==t.radius&&(s.radius=t.radius),void 0!==t.height&&(s.height=t.height),void 0!==t.maxAcceleration&&(s.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(s.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(s.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(s.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(s.separationWeight=t.separationWeight),this.recastCrowd.setAgentParameters(e,s)}removeAgent(e){this.recastCrowd.removeAgent(e);const t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.bjsRECASTPlugin.navMesh.update(),e<=r.kn)return;const t=this.bjsRECASTPlugin.getTimeStep(),s=this.bjsRECASTPlugin.getMaximumSubStepCount();if(t<=r.kn)this.recastCrowd.update(e);else{let n=Math.floor(e/t);s&&n>s&&(n=s),n<1&&(n=1);const i=e/n;for(let e=0;e<n;e++)this.recastCrowd.update(i)}for(let e=0;e<this.agents.length;e++){const t=this.agents[e],s=this.getAgentPosition(t);if(this.transforms[e].position=s,this._agentDestinationArmed[e]){const n=s.x-this._agentDestination[e].x,i=s.z-this._agentDestination[e].z,o=this.reachRadii[e],r=this._agentDestination[e].y-this.reachRadii[e],a=this._agentDestination[e].y+this.reachRadii[e],h=n*n+i*i;s.y>r&&s.y<a&&h<o*o&&(this.onReachTargetObservable.notifyObservers({agentIndex:t,destination:this._agentDestination[e]}),this._agentDestinationArmed[e]=!1)}}}setDefaultQueryExtent(e){const t=new this.bjsRECASTPlugin.bjsRECAST.Vec3(e.x,e.y,e.z);this.recastCrowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){const e=this.recastCrowd.getDefaultQueryExtent();return new r.P(e.x,e.y,e.z)}getDefaultQueryExtentToRef(e){const t=this.recastCrowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t;const s=this.recastCrowd.getCorners(e),n=s.getPointCount(),i=[];for(t=0;t<n;t++){const e=s.getPoint(t);i.push(new r.P(e.x,e.y,e.z))}return i}dispose(){this.recastCrowd.destroy(),this._scene.onBeforeAnimationsObservable.remove(this._onBeforeAnimationsObserver),this._onBeforeAnimationsObserver=null,this.onReachTargetObservable.clear()}}}}]);
//# sourceMappingURL=981.babylonBundle.js.map